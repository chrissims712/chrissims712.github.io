//>>built
require({cache:{"esri/layers/unitBezier":function(){define([],function(){var a=function(b,c,e,f){function a(b,c){var e,f,g,l;c=null==c?1E-6:c;g=b;for(f=0;8>f;f++){l=((d*g+k)*g+h)*g-b;if(Math.abs(l)<c)return g;e=(3*d*g+2*k)*g+h;if(1E-6>Math.abs(e))break;g-=l/e}e=0;f=1;g=b;if(g<e)return e;if(g>f)return f;for(;e<f;){l=((d*g+k)*g+h)*g;if(Math.abs(l-b)<c)break;b>l?e=g:f=g;g=0.5*(f-e)+e}return g}var h=3*b,k=3*(e-b)-h,d=1-h-k,l=3*c,n=3*(f-c)-l,p=1-l-n;return function(b,c){var e=a(b,c);return((p*e+n)*e+l)*
e}},d=/^cubic-bezier\((.*)\)/;a.parse=function(b){var c=a[b]||null;if(!c&&(b=d.exec(b)))b=b[1].split(",").map(function(b){return parseFloat(b.trim())}),4===b.length&&!b.some(function(b){return isNaN(b)})&&(c=a.apply(a,b));return c};a.ease=a(0.25,0.1,0.25,1);a.linear=a(0,0,1,1);a.easeIn=a["ease-in"]=a(0.42,0,1,1);a.easeOut=a["ease-out"]=a(0,0,0.58,1);a.easeInOut=a["ease-in-out"]=a(0.42,0,0.58,1);return a})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang"],
function(a,d,b,c){return function(e,f){var a=c.mixin({},{url:e,failOk:!0},f);"array-buffer"===f.responseType?(a.handleAs="arraybuffer",delete a.responseType):f.responseType&&(a.handleAs=f.responseType,delete a.responseType);null!==f.query&&(a.content=a.query,delete a.query);return b(a).then(function(b){return{data:b}})}})},"esri/layers/vectorTiles/core/promiseUtils":function(){define(["require","exports","dojo/Deferred","./Error"],function(a,d,b,c){d.eachAlways=function(c){var f=new b,a=[],h=c.length;
0===h&&f.resolve(a);c.forEach(function(b){var c={promise:b};a.push(c);b.then(function(b){c.value=b}).otherwise(function(b){c.error=b}).then(function(){--h;0===h&&f.resolve(a)})});return f.promise};d.create=function(c){var f=new b;c(function(b){void 0===b&&(b=null);return f.resolve(b)},f.reject);return f.promise};d.reject=function(c){var f=new b;f.reject(c);return f.promise};d.resolve=function(c){void 0===c&&(c=null);var f=new b;f.resolve(c);return f.promise};d.after=function(c,f){void 0===f&&(f=null);
var a=0,h=new b(function(){a&&(clearTimeout(a),a=0)}),a=setTimeout(function(){h.resolve(f)},c);return h.promise};d.timeout=function(e,f,a){var h=0,k=new b(e.cancel);e.then(function(b){k.isFulfilled()||(k.resolve(b),h&&(clearTimeout(h),h=0))});e.otherwise(function(b){k.isFulfilled()||(k.reject(b),h&&(clearTimeout(h),h=0))});h=setTimeout(function(){var b=a||new c("promiseUtils:timeout","The wrapped promise did not resolve within "+f+" ms");k.reject(b)},f);return k.promise};d.wrapCallback=function(c){var f=
!1,a=new b(function(){return f=!0});c(function(b){f||a.resolve(b)});return a.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(a,d,b,c,e){a=function(c){function e(){c.apply(this,arguments)}b(e,c);return e}(e);a.prototype.type="error";return a})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(a,d){function b(){this.constructor=
a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(a,d,b,c){var e=arguments.length,f=3>e?d:null===c?c=Object.getOwnPropertyDescriptor(d,b):c,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,d,b,c);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(d,b,f):g(d,b))||f;return 3<
e&&f&&Object.defineProperty(d,b,f),f}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","dojo/string"],function(a,d,b,c,e){return function(){function b(c,f,a){this.name=c;this.message=f&&e.substitute(f,a,function(b){return null==b?"":b})||"";this.details=a}b.prototype.toString=function(){return"["+this.name+"]: "+this.message};return b}()})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require",
"exports","esri/urlUtils","dojo/_base/url"],function(a,d,b,c){function e(b){return f(b)||l.test(b)}function f(b){return b&&"/"===b[0]&&"/"===b[1]}function g(b){if("string"===typeof b)return new c(h(b));b.scheme||(b.scheme=d.appUrl.scheme);return b}function h(b,c){void 0===c&&(c=d.appBaseUrl);if(f(b))return"file"===d.appUrl.scheme?"https:"+b:d.appUrl.scheme+":"+b;if(l.test(b))return b;var e=k,a;if("/"===b[0]){a=c;var g=a.indexOf("//"),g=a.indexOf("/",g+2);a=-1===g?a:a.slice(0,g)}else a=c;return e(a,
b)}function k(){for(var b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];if(b&&b.length){c=[];if(e(b[0])){var f=b[0],a=f.indexOf("//");c.push(f.slice(0,a+1));m.test(b[0])&&(c[0]+="/");b[0]=f.slice(a+2)}else"/"===b[0][0]&&c.push("");b=b.reduce(function(b,c){return b.concat(c.split("/"))},[]);for(f=0;f<b.length;f++)a=b[f],".."===a&&0<c.length?c.pop():a&&("."!==a||0===c.length)&&c.push(a);return c.join("/")}}d.normalize=function(c){return b.normalize(c)};d.canUseXhr=function(c){return b.canUseXhr(c)};
a=Function("return this")();d.appUrl=new c(a.location);d.appBaseUrl=function(){var b=d.appUrl.path,b=b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]));return""+(d.appUrl.scheme+"://"+d.appUrl.host+(null!=d.appUrl.port?":"+d.appUrl.port:""))+b}();var m=/^\s*file:/i,l=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;d.isAbsolute=e;d.urlToObject=function(c){return b.urlToObject(c)};d.getOrigin=function(b){if("data:"===b.slice(0,5))return null;var c=b.indexOf("://");if(-1===c&&f(b))c=2;else if(-1!==c)c+=
3;else return null;c=b.indexOf("/",c);return-1===c?b:b.slice(0,c)};d.makeAbsolute=h;d.hasSameOrigin=function(b,c,e){void 0===e&&(e=!1);b=g(b);c=g(c);return!e&&b.scheme!==c.scheme?!1:b.host.toLowerCase()===c.host.toLowerCase()&&b.port===c.port};d.join=k})},"esri/layers/vectorTiles/layers/support/vectorTileLayerLoader":function(){define("require exports dojo/has dojo/_base/lang ../../core/promiseUtils ../../core/urlUtils ../../config ../../request".split(" "),function(a,d,b,c,e,f,g,h){function k(b){if(b){var c=
f.getOrigin(b);!f.canUseXhr(c)&&-1===q.indexOf(c)&&q.push(c);return b}}function m(b,c,e){if(null!=c.sources){e&&-1!==e.path.indexOf("root.json")&&(e.path=e.path.substr(0,e.path.indexOf("root.json")),b.styleUrl=e.path);var a=p(c,e),g=c.sprite,h=c.glyphs;a&&a.url&&(a=e&&e.path?e.path:a.url,c.sprite&&!f.isAbsolute(c.sprite)&&(g=f.join(a,c.sprite)),c.glyphs&&!f.isAbsolute(c.glyphs)&&(h=f.join(a,c.glyphs)));b.style=c;b.spriteUrl=g;b.glyphsUrl=h;return n(b,c,e)}if(c.hasOwnProperty("tileInfo"))return b.layerDefinition=
c,b.serviceUrl=e.path,l(b,c,e)}function l(b,c,e){if(s&&!c.hasOwnProperty("defaultStyles"))throw Error("Service definition must have 'defaultStyles' element!");c=c.defaultStyles;f.isAbsolute(c)?b.styleUrl=f.normalize(c):b.styleUrl=f.normalize(f.join(e.path,c));k(b.styleUrl);return h(f.join(b.styleUrl,"root.json"),{responseType:"json"}).then(function(c){var e=c.data.sprite,a=c.data.glyphs;e&&!f.isAbsolute(e)&&(e=f.join(b.styleUrl,e));a&&!f.isAbsolute(a)&&(a=f.join(b.styleUrl,a));b.spriteUrl=e;b.glyphsUrl=
a;return b.style=c.data})}function n(b,c,a){(c=p(c,a))||e.reject("Source isn't available in the syle object!");if(c.url)return b.serviceUrl=c.url,f.isAbsolute(b.serviceUrl)||(b.serviceUrl=f.join(a.path,b.serviceUrl)),k(b.serviceUrl),h(b.serviceUrl,{query:{f:"json"},responseType:"json"}).then(function(c){b.layerDefinition=r(c.data);return b});b.layerDefinition=r(c);return e.resolve(b)}function p(b,c){if(!b.sources)return null;var e=b.sources,a=null;if(e.esri)a=e.esri,c&&(a.url&&!f.isAbsolute(a.url))&&
(e=c.path.substring(0,c.path.lastIndexOf("/")),a.url=f.join(e,a.url));else{for(var g=0,h=Object.keys(e);g<h.length;g++){var k=h[g];if(-1!==k.toLocaleLowerCase().indexOf("street")&&"vector"===a.type){a=e[k];break}}if(!a){g=0;for(h=Object.keys(e);g<h.length&&!(k=h[g],a=e[k],"vector"===a.type);g++);}}return a}function r(b){if(b.hasOwnProperty("tileInfo"))return b;for(var c={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},
e=(c.xmax-c.xmin)/512,f=[],a=b.hasOwnProperty("minzoom")?parseFloat(b.minzoom):0,g=b.hasOwnProperty("maxzoom")?parseFloat(b.maxzoom):16;a<g;a++){var h=e/Math.pow(2,a);f.push({level:a,scale:Math.floor(3779.527559055118*h),resolution:h})}b.tiles.forEach(k);return{capabilities:"TilesOnly",initialExtent:c,fullExtent:c,minScale:f[0].scale,maxScale:f[f.length-1].scale,tiles:b.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:f,spatialReference:{wkid:102100}}}}
var s=0,q=g.defaults&&g.defaults.io.corsEnabledServers||g.request.corsEnabledServers;d.loadMetadata=function(b){if(!b)return e.reject("invalid input URL!");var a={layerDefinition:null,parsedUrl:null,serviceUrl:null,style:null,styleUrl:null,url:null,spriteUrl:null,glyphsUrl:null};if("string"!==typeof b)return m(a,b,null).then(function(){return a});b=a.url=f.normalize(b);var g=a.parsedUrl=f.urlToObject(b);k(b);return h(g.path,{responseType:"json",query:c.mixin({f:"json"},g.query)}).then(function(b){return m(a,
b.data,g)}).then(function(){return a})}})},"esri/layers/vectorTiles/config":function(){define(["require","exports","esri/config"],function(a,d,b){return b})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","./StyleLayer"],function(a,d,b){return function(){function c(b,f){this.styleJSON=b;this.version=parseFloat(b.version);this.sprite=f?f.spriteUrl:b.sprite;this.glyphs=f?f.glyphsUrl:b.glyphs;this.layers=(b.layers||[]).map(c._create);this._identifyRefLayers()}
c.prototype._identifyRefLayers=function(){for(var b=[],c=[],a=0,h=this.layers;a<h.length;a++){var k=h[a];if(1===k.type){var d=k.sourceLayer,d=d+("|"+JSON.stringify(k.minzoom)),d=d+("|"+JSON.stringify(k.maxzoom)),d=d+("|"+JSON.stringify(k.filter));b.push({key:d,layer:k})}2===k.type&&(d=k.sourceLayer,d+="|"+JSON.stringify(k.minzoom),d+="|"+JSON.stringify(k.maxzoom),d+="|"+JSON.stringify(k.filter),d+="|"+JSON.stringify(k.layout["line-cap"]),d+="|"+JSON.stringify(k.layout["line-join"]),c.push({key:d,
layer:k}))}this._assignRefLayers(b);this._assignRefLayers(c)};c.prototype._assignRefLayers=function(b){b.sort(function(b,c){return b.key<c.key?-1:b.key>c.key?1:0});for(var c,a,h=b.length,k=0;k<h;k++){var d=b[k];if(d.key===c)d.layer.refLayerId=a;else if(c=d.key,a=d.layer.id,1===d.layer.type&&!d.layer.hasPaintProperty("fill-outline-color"))for(var l=k+1;l<h;l++){var n=b[l];if(n.key===c){if(n.layer.hasPaintProperty("fill-outline-color")){b[k]=n;b[l]=d;a=n.layer.id;break}}else break}}};c._create=function(c,
f,a){f=1-(1+f)*(1/(a.length+1));switch(c.type){case "background":return new b.StyleLayer(0,c,f);case "fill":return new b.StyleLayer(1,c,f);case "line":return new b.StyleLayer(2,c,f);case "symbol":return new b.StyleLayer(3,c,f);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":throw Error("Unsupported vector tile circle layer");}throw Error("Unknown vector tile layer");};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define(["require",
"exports","./StyleDefinition","./StyleProperty","./Filter"],function(a,d,b,c,e){a=function(){function f(c,e,f){this.type=c;this.id=e.id;this.source=e.source;this.sourceLayer=e["source-layer"];this.minzoom=e.minzoom;this.maxzoom=e.maxzoom;this.filter=e.filter;this.layout=e.layout;this.paint=e.paint;this.z=f;switch(c){case 0:this._layoutDefinition=b.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=b.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=b.StyleDefinition.fillLayoutDefinition;
this._paintDefinition=b.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=b.StyleDefinition.lineLayoutDefinition;this._paintDefinition=b.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=b.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=b.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}f.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?
this._featureFilter:this._featureFilter=e.createFilter(this.filter)};f.prototype.hasLayoutProperty=function(b){var c=this._layoutProperties;return c&&c[b]?!0:!1};f.prototype.hasPaintProperty=function(b){var c=this._paintProperties;return c?void 0!==c[b]:!1};f.prototype.getLayoutValue=function(b,c){var e,f=this._layoutProperties;f&&(f=f[b])&&(e=f.getValue(c));f=this._layoutDefinition[b];void 0===e&&(e=f["default"]);"enum"===f.type&&(e=f.values.indexOf(e));return e};f.prototype.getPaintValue=function(b,
c){var e,f=this._paintProperties;f&&(f=f[b])&&(e=f.getValue(c));f=this._paintDefinition[b];void 0===e&&(e=f["default"]);"enum"===f.type&&(e=f.values.indexOf(e));return e};f.prototype._parseLayout=function(b){var e={},f;for(f in b)e[f]=new c(this._layoutDefinition[f],b[f]);return e};f.prototype._parsePaint=function(b){var e={},f;for(f in b)e[f]=new c(this._paintDefinition[f],b[f]);return e};return f}();d.StyleLayer=a;a=function(){return function(b,c){this.cap=b.getLayoutValue("line-cap",c);this.join=
b.getLayoutValue("line-join",c);this.miterLimit=b.getLayoutValue("line-miter-limit",c);this.roundLimit=b.getLayoutValue("line-round-limit",c)}}();d.LineLayout=a;a=function(){return function(b,c,e){this.allowOverlap=b.getLayoutValue("icon-allow-overlap",c);this.ignorePlacement=b.getLayoutValue("icon-ignore-placement",c);this.optional=b.getLayoutValue("icon-optional",c);this.rotationAlignment=b.getLayoutValue("icon-rotation-alignment",c);this.size=b.getLayoutValue("icon-size",c);this.rotate=b.getLayoutValue("icon-rotate",
c);this.padding=b.getLayoutValue("icon-padding",c);this.keepUpright=b.getLayoutValue("icon-keep-upright",c);this.offset=b.getLayoutValue("icon-offset",c);e&&(1===this.rotationAlignment&&!b.hasLayoutProperty("icon-rotation-alignment"))&&(this.rotationAlignment=0)}}();d.IconLayout=a;a=function(){return function(b,c,e){this.allowOverlap=b.getLayoutValue("text-allow-overlap",c);this.ignorePlacement=b.getLayoutValue("text-ignore-placement",c);this.optional=b.getLayoutValue("text-optional",c);this.rotationAlignment=
b.getLayoutValue("text-rotation-alignment",c);this.font=b.getLayoutValue("text-font",c);this.maxWidth=b.getLayoutValue("text-max-width",c);this.lineHeight=b.getLayoutValue("text-line-height",c);this.letterSpacing=b.getLayoutValue("text-letter-spacing",c);this.justify=b.getLayoutValue("text-justify",c);this.anchor=b.getLayoutValue("text-anchor",c);this.maxAngle=b.getLayoutValue("text-max-angle",c);this.size=b.getLayoutValue("text-size",c);this.rotate=b.getLayoutValue("text-rotate",c);this.padding=
b.getLayoutValue("text-padding",c);this.keepUpright=b.getLayoutValue("text-keep-upright",c);this.transform=b.getLayoutValue("text-transform",c);this.offset=b.getLayoutValue("text-offset",c);e&&(1===this.rotationAlignment&&!b.hasLayoutProperty("text-rotation-alignment"))&&(this.rotationAlignment=0)}}();d.TextLayout=a})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(a,d){var b=function(){function b(){}b.backgroundLayoutDefinition=
{visibility:{type:"enum",values:["visible","none"],"default":"visible"}};b.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};b.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};
b.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map",
"viewport"],"default":"viewport"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!0},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},
"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number",
"default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};b.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,
"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};b.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};
b.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",
value:"number","default":[]},"line-pattern":{type:"string"}};b.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},
"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};b.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,
"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};b.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",
minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};return b}();d.StyleDefinition=b})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(a,d,b,c){return function(){function e(b,
c){var a;switch(b.type){case "number":a=!0;break;case "color":a=!0;c=e._parseColor(c);break;case "array":a="number"===b.value;break;default:a=!1}this.getValue=a?this._interpolate(c):this._piecewise(c)}e.prototype._piecewise=function(b){var c=b.stops;return c?function(b){var e=c.length;if(0!==e){for(var f=0,a=0;a<e;a++)if(c[a][0]<=b)f=a;else break;return c[f][1]}}:function(){return b}};e.prototype._interpolate=function(b){var e=b.stops;if(e){var a=b.base||1;return function(b){for(var f,d,n=e.length,
p=0;p<n;p++){var r=e[p];if(r[0]<=b)f=r;else{d=r;break}}if(f&&d){p=d[0]-f[0];b-=f[0];b=1===a?b/p:(Math.pow(a,b)-1)/(Math.pow(a,p)-1);if(Array.isArray(f[1])){f=f[1];d=d[1];n=[];for(p=0;p<f.length;p++)n.push(c.interpolate(f[p],d[p],b));return n}return c.interpolate(f[1],d[1],b)}if(f)return f[1];if(d)return d[1]}}return function(){return b}};e._parseColor=function(c){if(Array.isArray(c))return c;if("string"===typeof c){var a=new b(c);if(a)return[a.r/255,a.g/255,a.b/255,a.a||1]}if(c&&c.stops)return c.stops=
c.stops.map(function(b){return[b[0],e._parseColor(b[1])]}),c;throw Error("Incorrect color definition "+c);};return e}()})},"esri/layers/vectorTiles/Color":function(){define(["require","exports","esri/Color"],function(a,d,b){return function(){return function(c){return new b(c)}}()})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(a,d){function b(b,c){b%=c;return 0<=b?b:b+c}d.C_INFINITY=Number.POSITIVE_INFINITY;d.C_PI=Math.PI;d.C_2PI=2*d.C_PI;
d.C_PI_BY_2=d.C_PI/2;d.C_RAD_TO_256=128/d.C_PI;d.C_256_TO_RAD=d.C_PI/128;d.C_DEG_TO_256=256/360;d.C_DEG_TO_RAD=d.C_PI/180;d.C_SQRT2=1.414213562;d.C_SQRT2_INV=1/d.C_SQRT2;var c=1/Math.LN2;d.positiveMod=b;d.radToByte=function(c){return b(c*d.C_RAD_TO_256,256)};d.degToByte=function(c){return b(c*d.C_DEG_TO_256,256)};d.log2=function(b){return Math.log(b)*c};d.sqr=function(b){return b*b};d.clamp=function(b,c,a){return Math.min(Math.max(b,c),a)};d.interpolate=function(b,c,a){return b*(1-a)+c*a};d.between=
function(b,c,a){return b>=c&&b<=a||b>=a&&b<=c}})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(a,d){return function(){function b(c,e,a){this._op=c;"$type"===e?(this._val=a instanceof Array?a.map(function(c){return b._types.indexOf(c)}):b._types.indexOf(a),this._op+=11):(this._key=e,this._val=a)}b.prototype.filter=function(b){switch(this._op){case 0:return this._val;case 1:return b.values[this._key]===this._val;case 2:return b.values[this._key]!==
this._val;case 3:return b.values[this._key]<this._val;case 4:return b.values[this._key]>this._val;case 5:return b.values[this._key]<=this._val;case 6:return b.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(b.values[this._key]);case 8:return-1===this._val.indexOf(b.values[this._key]);case 9:for(var e=0,a=this._val;e<a.length;e++){var g=a[e];if(g.filter(b))return!0}return!1;case 10:e=0;for(a=this._val;e<a.length;e++)if(g=a[e],!g.filter(b))return!1;return!0;case 11:e=0;for(a=this._val;e<
a.length;e++)if(g=a[e],g.filter(b))return!1;return!0;case 12:return b.type===this._val;case 13:return b.type!==this._val;case 14:return b.type<this._val;case 15:return b.type>this._val;case 16:return b.type>=this._val;case 17:return b.type<=this._val;case 18:return-1!==this._val.indexOf(b.type);case 19:return-1===this._val.indexOf(b.type)}};b.createFilter=function(c){if(!c)return new b(0,void 0,!0);var e=c[0];if(1>=c.length)return new b(0,void 0,"any"!==e);switch(e){case "\x3d\x3d":return new b(1,
c[1],c[2]);case "!\x3d":return new b(2,c[1],c[2]);case "\x3e":return new b(4,c[1],c[2]);case "\x3c":return new b(3,c[1],c[2]);case "\x3e\x3d":return new b(6,c[1],c[2]);case "\x3c\x3d":return new b(5,c[1],c[2]);case "in":return new b(7,c[1],c.slice(2));case "!in":return new b(8,c[1],c.slice(2));case "any":return new b(9,void 0,c.slice(1).map(b.createFilter.bind(this)));case "all":return new b(10,void 0,c.slice(1).map(b.createFilter.bind(this)));case "none":return new b(11,void 0,c.slice(1).map(b.createFilter.bind(this)));
default:throw Error("invalid operator: "+e);}};b._types=["Unknown","Point","LineString","Polygon"];return b}()})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileContainer":function(){define("require exports ../../core/tsSupport/extendsHelper dojo/has ../../core/libs/gl-matrix/vec3 ../../core/libs/gl-matrix/mat4 ../2d/engine/Container ./renderers/Renderer ./GeometryUtils ./StencilClipGenerator".split(" "),function(a,d,b,c,e,f,g,h,k,m){return function(c){function a(){c.call(this);this.isInitialized=
!1;this._displayHeight=this._displayWidth=0;this._clip=new m;this._tileCoordinateScale=e.create();this._orientationVec=e.create();this._displayScale=e.create();this._orientationVec.set([0,0,1]);this._defaultTransform=f.create()}b(a,c);a.prototype.initialize=function(b,c,e,a){this._renderer=new h(b,c);this._tileInfoView=a;this._tileInfo=e;this.isInitialized=!0};a.prototype.prepareChildrenRenderParameters=function(b){var c=b.state;if(!c||!this._tileInfo||!this.isInitialized)return b;b.displayLevel=
this._tileInfo.scaleToZoom(c.scale);b.requiredLevel=this._tileInfoView.getClosestInfoForScale(c.scale).level;b.renderer=this._renderer;return b};a.prototype.renderChildren=function(b){if(!(0===this.children.length||!this.isInitialized||!b||!b.state)){this.sortChildren(function(b,c){return c.resolution-b.resolution});this._clip.update(this.children);this._updateTilesTransform(b.state,this._tileInfoView.getClosestInfoForScale(b.state.scale).level);var e=b.context;e.setDepthWriteEnabled(!0);this._renderer.setStateParams(b.state,
b.devicePixelRatio,b.displayLevel);this._renderer.drawClippingMasks(e,this.children);e.setStencilWriteMask(0);e.setBlendFunctionSeparate(1,771,1,771);e.setStencilOp(7680,7680,7681);e.setDepthFunction(515);e.setBlendingEnabled(!1);e.setStencilTestEnabled(!0);e.setDepthTestEnabled(!0);e.setDepthWriteEnabled(!0);b.drawphase=0;c.prototype.renderChildren.call(this,b);e.setDepthWriteEnabled(!1);e.setBlendingEnabled(!0);b.drawphase=1;c.prototype.renderChildren.call(this,b);b.drawphase=2;c.prototype.renderChildren.call(this,
b);e.setStencilTestEnabled(!1);e.setDepthTestEnabled(!1);this._renderer.needsRedraw()&&this.requestRender()}};a.prototype.attachChild=function(b,c){return b.attach(c)};a.prototype.detachChild=function(b,c){b.detach(c)};a.prototype.renderChild=function(b,c){b.render(c)};a.prototype._updateTilesTransform=function(b,c){var e=1/b.width,a=1/b.height,f=[0,0];this._calculateRelativeViewProjMat(this._tileInfo.lods[c].resolution,b.resolution,b.rotation,this._tileInfo.size[1],4096,b.width,b.height,this._defaultTransform);
for(var g=0,h=this.children;g<h.length;g++){var k=h[g];b.toScreen(f,k.topLeft);f[1]=b.height-f[1];k.tileTransform.displayCoord[0]=2*f[0]*e-1;k.tileTransform.displayCoord[1]=2*f[1]*a-1;k.key.level===c&&4096===k.coordRange?k.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this._tileInfo.lods[k.key.level].resolution,b.resolution,b.rotation,this._tileInfo.size[1],k.coordRange,b.width,b.height,k.tileTransform.transform)}};a.prototype._calculateRelativeViewProjMat=
function(b,c,e,a,g,h,d,l){var m=0.125;512!==a&&4096!==g&&(m=a/g);b=m*(b/c);this._tileCoordinateScale.set([b,b,1]);if(h!==this._displayWidth||d!==this._displayHeight)this._displayScale.set([2/h,-2/d,1]),this._displayWidth=h,this._displayHeight=d;f.identity(l);f.scale(l,l,this._tileCoordinateScale);f.rotate(l,l,-e*k.C_DEG_TO_RAD,this._orientationVec);f.scale(l,l,this._displayScale);f.transpose(l,l)};return a}(g)})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],function(a){var d=
{create:function(){var b=new a.ARRAY_TYPE(3);b[0]=0;b[1]=0;b[2]=0;return b},clone:function(b){var c=new a.ARRAY_TYPE(3);c[0]=b[0];c[1]=b[1];c[2]=b[2];return c},fromValues:function(b,c,e){var f=new a.ARRAY_TYPE(3);f[0]=b;f[1]=c;f[2]=e;return f},copy:function(b,c){b[0]=c[0];b[1]=c[1];b[2]=c[2];return b},set:function(b,c,e,a){b[0]=c;b[1]=e;b[2]=a;return b},add:function(b,c,e){b[0]=c[0]+e[0];b[1]=c[1]+e[1];b[2]=c[2]+e[2];return b},subtract:function(b,c,e){b[0]=c[0]-e[0];b[1]=c[1]-e[1];b[2]=c[2]-e[2];
return b}};d.sub=d.subtract;d.multiply=function(b,c,e){b[0]=c[0]*e[0];b[1]=c[1]*e[1];b[2]=c[2]*e[2];return b};d.mul=d.multiply;d.divide=function(b,c,e){b[0]=c[0]/e[0];b[1]=c[1]/e[1];b[2]=c[2]/e[2];return b};d.div=d.divide;d.ceil=function(b,c){b[0]=Math.ceil(c[0]);b[1]=Math.ceil(c[1]);b[2]=Math.ceil(c[2]);return b};d.floor=function(b,c){b[0]=Math.floor(c[0]);b[1]=Math.floor(c[1]);b[2]=Math.floor(c[2]);return b};d.min=function(b,c,e){b[0]=Math.min(c[0],e[0]);b[1]=Math.min(c[1],e[1]);b[2]=Math.min(c[2],
e[2]);return b};d.max=function(b,c,e){b[0]=Math.max(c[0],e[0]);b[1]=Math.max(c[1],e[1]);b[2]=Math.max(c[2],e[2]);return b};d.round=function(b,c){b[0]=Math.round(c[0]);b[1]=Math.round(c[1]);b[2]=Math.round(c[2]);return b};d.scale=function(b,c,e){b[0]=c[0]*e;b[1]=c[1]*e;b[2]=c[2]*e;return b};d.scaleAndAdd=function(b,c,e,a){b[0]=c[0]+e[0]*a;b[1]=c[1]+e[1]*a;b[2]=c[2]+e[2]*a;return b};d.distance=function(b,c){var e=c[0]-b[0],a=c[1]-b[1],g=c[2]-b[2];return Math.sqrt(e*e+a*a+g*g)};d.dist=d.distance;d.squaredDistance=
function(b,c){var e=c[0]-b[0],a=c[1]-b[1],g=c[2]-b[2];return e*e+a*a+g*g};d.sqrDist=d.squaredDistance;d.length=function(b){var c=b[0],e=b[1];b=b[2];return Math.sqrt(c*c+e*e+b*b)};d.len=d.length;d.squaredLength=function(b){var c=b[0],e=b[1];b=b[2];return c*c+e*e+b*b};d.sqrLen=d.squaredLength;d.negate=function(b,c){b[0]=-c[0];b[1]=-c[1];b[2]=-c[2];return b};d.inverse=function(b,c){b[0]=1/c[0];b[1]=1/c[1];b[2]=1/c[2];return b};d.normalize=function(b,c){var e=c[0],a=c[1],g=c[2],e=e*e+a*a+g*g;0<e&&(e=
1/Math.sqrt(e),b[0]=c[0]*e,b[1]=c[1]*e,b[2]=c[2]*e);return b};d.dot=function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]};d.cross=function(b,c,e){var a=c[0],g=c[1];c=c[2];var h=e[0],k=e[1];e=e[2];b[0]=g*e-c*k;b[1]=c*h-a*e;b[2]=a*k-g*h;return b};d.lerp=function(b,c,e,a){var g=c[0],h=c[1];c=c[2];b[0]=g+a*(e[0]-g);b[1]=h+a*(e[1]-h);b[2]=c+a*(e[2]-c);return b};d.hermite=function(b,c,e,a,g,h){var k=h*h,d=k*(2*h-3)+1,l=k*(h-2)+h,n=k*(h-1);h=k*(3-2*h);b[0]=c[0]*d+e[0]*l+a[0]*n+g[0]*h;b[1]=c[1]*d+e[1]*l+a[1]*
n+g[1]*h;b[2]=c[2]*d+e[2]*l+a[2]*n+g[2]*h;return b};d.bezier=function(b,c,e,a,g,h){var k=1-h,d=k*k,l=h*h,n=d*k,d=3*h*d,k=3*l*k;h*=l;b[0]=c[0]*n+e[0]*d+a[0]*k+g[0]*h;b[1]=c[1]*n+e[1]*d+a[1]*k+g[1]*h;b[2]=c[2]*n+e[2]*d+a[2]*k+g[2]*h;return b};d.random=function(b,c){c=c||1;var e=2*a.RANDOM()*Math.PI,f=2*a.RANDOM()-1,g=Math.sqrt(1-f*f)*c;b[0]=Math.cos(e)*g;b[1]=Math.sin(e)*g;b[2]=f*c;return b};d.transformMat4=function(b,c,e){var a=c[0],g=c[1];c=c[2];var h=e[3]*a+e[7]*g+e[11]*c+e[15],h=h||1;b[0]=(e[0]*
a+e[4]*g+e[8]*c+e[12])/h;b[1]=(e[1]*a+e[5]*g+e[9]*c+e[13])/h;b[2]=(e[2]*a+e[6]*g+e[10]*c+e[14])/h;return b};d.transformMat3=function(b,c,e){var a=c[0],g=c[1];c=c[2];b[0]=a*e[0]+g*e[3]+c*e[6];b[1]=a*e[1]+g*e[4]+c*e[7];b[2]=a*e[2]+g*e[5]+c*e[8];return b};d.transformQuat=function(b,c,e){var a=c[0],g=c[1],h=c[2];c=e[0];var k=e[1],d=e[2];e=e[3];var l=e*a+k*h-d*g,n=e*g+d*a-c*h,p=e*h+c*g-k*a,a=-c*a-k*g-d*h;b[0]=l*e+a*-c+n*-d-p*-k;b[1]=n*e+a*-k+p*-c-l*-d;b[2]=p*e+a*-d+l*-k-n*-c;return b};d.rotateX=function(b,
c,e,a){var g=[],h=[];g[0]=c[0]-e[0];g[1]=c[1]-e[1];g[2]=c[2]-e[2];h[0]=g[0];h[1]=g[1]*Math.cos(a)-g[2]*Math.sin(a);h[2]=g[1]*Math.sin(a)+g[2]*Math.cos(a);b[0]=h[0]+e[0];b[1]=h[1]+e[1];b[2]=h[2]+e[2];return b};d.rotateY=function(b,c,e,a){var g=[],h=[];g[0]=c[0]-e[0];g[1]=c[1]-e[1];g[2]=c[2]-e[2];h[0]=g[2]*Math.sin(a)+g[0]*Math.cos(a);h[1]=g[1];h[2]=g[2]*Math.cos(a)-g[0]*Math.sin(a);b[0]=h[0]+e[0];b[1]=h[1]+e[1];b[2]=h[2]+e[2];return b};d.rotateZ=function(b,c,e,a){var g=[],h=[];g[0]=c[0]-e[0];g[1]=
c[1]-e[1];g[2]=c[2]-e[2];h[0]=g[0]*Math.cos(a)-g[1]*Math.sin(a);h[1]=g[0]*Math.sin(a)+g[1]*Math.cos(a);h[2]=g[2];b[0]=h[0]+e[0];b[1]=h[1]+e[1];b[2]=h[2]+e[2];return b};d.forEach=function(){var b=d.create();return function(c,e,a,g,h,k){e||(e=3);a||(a=0);for(g=g?Math.min(g*e+a,c.length):c.length;a<g;a+=e)b[0]=c[a],b[1]=c[a+1],b[2]=c[a+2],h(b,b,k),c[a]=b[0],c[a+1]=b[1],c[a+2]=b[2];return c}}();d.angle=function(b,c){var e=d.fromValues(b[0],b[1],b[2]),a=d.fromValues(c[0],c[1],c[2]);d.normalize(e,e);d.normalize(a,
a);e=d.dot(e,a);return 1<e?0:Math.acos(e)};d.str=function(b){return"vec3("+b[0]+", "+b[1]+", "+b[2]+")"};d.exactEquals=function(b,c){return b[0]===c[0]&&b[1]===c[1]&&b[2]===c[2]};d.equals=function(b,c){var e=b[0],f=b[1],g=b[2],h=c[0],k=c[1],d=c[2];return Math.abs(e-h)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(f-k)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(g-d)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(d))};return d})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],
function(){var a={EPSILON:1E-6};a.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;a.RANDOM=Math.random;a.ENABLE_SIMD=!1;a.SIMD_AVAILABLE=a.ARRAY_TYPE===Float32Array&&"SIMD"in this;a.USE_SIMD=a.ENABLE_SIMD&&a.SIMD_AVAILABLE;a.setMatrixArrayType=function(b){a.ARRAY_TYPE=b};var d=Math.PI/180;a.toRadian=function(b){return b*d};a.equals=function(b,c){return Math.abs(b-c)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(c))};return a})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],
function(a){var d={scalar:{},SIMD:{},create:function(){var b=new a.ARRAY_TYPE(16);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},clone:function(b){var c=new a.ARRAY_TYPE(16);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];c[9]=b[9];c[10]=b[10];c[11]=b[11];c[12]=b[12];c[13]=b[13];c[14]=b[14];c[15]=b[15];return c},copy:function(b,c){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=
c[4];b[5]=c[5];b[6]=c[6];b[7]=c[7];b[8]=c[8];b[9]=c[9];b[10]=c[10];b[11]=c[11];b[12]=c[12];b[13]=c[13];b[14]=c[14];b[15]=c[15];return b},fromValues:function(b,c,e,f,g,h,k,d,l,n,p,r,s,q,t,u){var v=new a.ARRAY_TYPE(16);v[0]=b;v[1]=c;v[2]=e;v[3]=f;v[4]=g;v[5]=h;v[6]=k;v[7]=d;v[8]=l;v[9]=n;v[10]=p;v[11]=r;v[12]=s;v[13]=q;v[14]=t;v[15]=u;return v},set:function(b,c,e,a,g,h,k,d,l,n,p,r,s,q,t,u,v){b[0]=c;b[1]=e;b[2]=a;b[3]=g;b[4]=h;b[5]=k;b[6]=d;b[7]=l;b[8]=n;b[9]=p;b[10]=r;b[11]=s;b[12]=q;b[13]=t;b[14]=
u;b[15]=v;return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}};d.scalar.transpose=function(b,c){if(b===c){var e=c[1],a=c[2],g=c[3],h=c[6],k=c[7],d=c[11];b[1]=c[4];b[2]=c[8];b[3]=c[12];b[4]=e;b[6]=c[9];b[7]=c[13];b[8]=a;b[9]=h;b[11]=c[14];b[12]=g;b[13]=k;b[14]=d}else b[0]=c[0],b[1]=c[4],b[2]=c[8],b[3]=c[12],b[4]=c[1],b[5]=c[5],b[6]=c[9],b[7]=c[13],b[8]=c[2],b[9]=c[6],b[10]=c[10],b[11]=c[14],b[12]=
c[3],b[13]=c[7],b[14]=c[11],b[15]=c[15];return b};d.SIMD.transpose=function(b,c){var e,a,g,h,k,d,l;e=SIMD.Float32x4.load(c,0);a=SIMD.Float32x4.load(c,4);g=SIMD.Float32x4.load(c,8);h=SIMD.Float32x4.load(c,12);k=SIMD.Float32x4.shuffle(e,a,0,1,4,5);d=SIMD.Float32x4.shuffle(g,h,0,1,4,5);l=SIMD.Float32x4.shuffle(k,d,0,2,4,6);k=SIMD.Float32x4.shuffle(k,d,1,3,5,7);SIMD.Float32x4.store(b,0,l);SIMD.Float32x4.store(b,4,k);k=SIMD.Float32x4.shuffle(e,a,2,3,6,7);d=SIMD.Float32x4.shuffle(g,h,2,3,6,7);e=SIMD.Float32x4.shuffle(k,
d,0,2,4,6);a=SIMD.Float32x4.shuffle(k,d,1,3,5,7);SIMD.Float32x4.store(b,8,e);SIMD.Float32x4.store(b,12,a);return b};d.transpose=a.USE_SIMD?d.SIMD.transpose:d.scalar.transpose;d.scalar.invert=function(b,c){var e=c[0],a=c[1],g=c[2],h=c[3],k=c[4],d=c[5],l=c[6],n=c[7],p=c[8],r=c[9],s=c[10],q=c[11],t=c[12],u=c[13],v=c[14],x=c[15],w=e*d-a*k,z=e*l-g*k,A=e*n-h*k,y=a*l-g*d,B=a*n-h*d,E=g*n-h*l,H=p*u-r*t,J=p*v-s*t,F=p*x-q*t,I=r*v-s*u,L=r*x-q*u,K=s*x-q*v,G=w*K-z*L+A*I+y*F-B*J+E*H;if(!G)return null;G=1/G;b[0]=
(d*K-l*L+n*I)*G;b[1]=(g*L-a*K-h*I)*G;b[2]=(u*E-v*B+x*y)*G;b[3]=(s*B-r*E-q*y)*G;b[4]=(l*F-k*K-n*J)*G;b[5]=(e*K-g*F+h*J)*G;b[6]=(v*A-t*E-x*z)*G;b[7]=(p*E-s*A+q*z)*G;b[8]=(k*L-d*F+n*H)*G;b[9]=(a*F-e*L-h*H)*G;b[10]=(t*B-u*A+x*w)*G;b[11]=(r*A-p*B-q*w)*G;b[12]=(d*J-k*I-l*H)*G;b[13]=(e*I-a*J+g*H)*G;b[14]=(u*z-t*y-v*w)*G;b[15]=(p*y-r*z+s*w)*G;return b};d.SIMD.invert=function(b,c){var e,a,g,h,k,d,l,n,p;d=SIMD.Float32x4.load(c,0);l=SIMD.Float32x4.load(c,4);n=SIMD.Float32x4.load(c,8);p=SIMD.Float32x4.load(c,
12);k=SIMD.Float32x4.shuffle(d,l,0,1,4,5);a=SIMD.Float32x4.shuffle(n,p,0,1,4,5);e=SIMD.Float32x4.shuffle(k,a,0,2,4,6);a=SIMD.Float32x4.shuffle(a,k,1,3,5,7);k=SIMD.Float32x4.shuffle(d,l,2,3,6,7);h=SIMD.Float32x4.shuffle(n,p,2,3,6,7);g=SIMD.Float32x4.shuffle(k,h,0,2,4,6);h=SIMD.Float32x4.shuffle(h,k,1,3,5,7);k=SIMD.Float32x4.mul(g,h);k=SIMD.Float32x4.swizzle(k,1,0,3,2);d=SIMD.Float32x4.mul(a,k);l=SIMD.Float32x4.mul(e,k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,k),
d);l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,k),l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);k=SIMD.Float32x4.mul(a,g);k=SIMD.Float32x4.swizzle(k,1,0,3,2);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),d);p=SIMD.Float32x4.mul(e,k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(h,k));p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,k),p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);k=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,3,0,1),h);k=SIMD.Float32x4.swizzle(k,1,0,3,2);g=SIMD.Float32x4.swizzle(g,
2,3,0,1);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,k),d);n=SIMD.Float32x4.mul(e,k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(g,k));n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,k),n);n=SIMD.Float32x4.swizzle(n,2,3,0,1);k=SIMD.Float32x4.mul(e,a);k=SIMD.Float32x4.swizzle(k,1,0,3,2);n=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),n);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),p);k=SIMD.Float32x4.swizzle(k,2,3,0,1);n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,k),n);p=SIMD.Float32x4.sub(p,
SIMD.Float32x4.mul(g,k));k=SIMD.Float32x4.mul(e,h);k=SIMD.Float32x4.swizzle(k,1,0,3,2);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(g,k));n=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,k),n);k=SIMD.Float32x4.swizzle(k,2,3,0,1);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,k),l);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(a,k));k=SIMD.Float32x4.mul(e,g);k=SIMD.Float32x4.swizzle(k,1,0,3,2);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),l);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(a,k));k=SIMD.Float32x4.swizzle(k,2,
3,0,1);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(h,k));p=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,k),p);e=SIMD.Float32x4.mul(e,d);e=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(e,2,3,0,1),e);e=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(e,1,0,3,2),e);k=SIMD.Float32x4.reciprocalApproximation(e);e=SIMD.Float32x4.sub(SIMD.Float32x4.add(k,k),SIMD.Float32x4.mul(e,SIMD.Float32x4.mul(k,k)));e=SIMD.Float32x4.swizzle(e,0,0,0,0);if(!e)return null;SIMD.Float32x4.store(b,0,SIMD.Float32x4.mul(e,d));SIMD.Float32x4.store(b,
4,SIMD.Float32x4.mul(e,l));SIMD.Float32x4.store(b,8,SIMD.Float32x4.mul(e,n));SIMD.Float32x4.store(b,12,SIMD.Float32x4.mul(e,p));return b};d.invert=a.USE_SIMD?d.SIMD.invert:d.scalar.invert;d.scalar.adjoint=function(b,c){var e=c[0],a=c[1],g=c[2],h=c[3],d=c[4],m=c[5],l=c[6],n=c[7],p=c[8],r=c[9],s=c[10],q=c[11],t=c[12],u=c[13],v=c[14],x=c[15];b[0]=m*(s*x-q*v)-r*(l*x-n*v)+u*(l*q-n*s);b[1]=-(a*(s*x-q*v)-r*(g*x-h*v)+u*(g*q-h*s));b[2]=a*(l*x-n*v)-m*(g*x-h*v)+u*(g*n-h*l);b[3]=-(a*(l*q-n*s)-m*(g*q-h*s)+r*(g*
n-h*l));b[4]=-(d*(s*x-q*v)-p*(l*x-n*v)+t*(l*q-n*s));b[5]=e*(s*x-q*v)-p*(g*x-h*v)+t*(g*q-h*s);b[6]=-(e*(l*x-n*v)-d*(g*x-h*v)+t*(g*n-h*l));b[7]=e*(l*q-n*s)-d*(g*q-h*s)+p*(g*n-h*l);b[8]=d*(r*x-q*u)-p*(m*x-n*u)+t*(m*q-n*r);b[9]=-(e*(r*x-q*u)-p*(a*x-h*u)+t*(a*q-h*r));b[10]=e*(m*x-n*u)-d*(a*x-h*u)+t*(a*n-h*m);b[11]=-(e*(m*q-n*r)-d*(a*q-h*r)+p*(a*n-h*m));b[12]=-(d*(r*v-s*u)-p*(m*v-l*u)+t*(m*s-l*r));b[13]=e*(r*v-s*u)-p*(a*v-g*u)+t*(a*s-g*r);b[14]=-(e*(m*v-l*u)-d*(a*v-g*u)+t*(a*l-g*m));b[15]=e*(m*s-l*r)-d*
(a*s-g*r)+p*(a*l-g*m);return b};d.SIMD.adjoint=function(b,c){var e,a,g,h,d,m,l,n,p;e=SIMD.Float32x4.load(c,0);a=SIMD.Float32x4.load(c,4);g=SIMD.Float32x4.load(c,8);h=SIMD.Float32x4.load(c,12);l=SIMD.Float32x4.shuffle(e,a,0,1,4,5);m=SIMD.Float32x4.shuffle(g,h,0,1,4,5);d=SIMD.Float32x4.shuffle(l,m,0,2,4,6);m=SIMD.Float32x4.shuffle(m,l,1,3,5,7);l=SIMD.Float32x4.shuffle(e,a,2,3,6,7);a=SIMD.Float32x4.shuffle(g,h,2,3,6,7);e=SIMD.Float32x4.shuffle(l,a,0,2,4,6);a=SIMD.Float32x4.shuffle(a,l,1,3,5,7);l=SIMD.Float32x4.mul(e,
a);l=SIMD.Float32x4.swizzle(l,1,0,3,2);g=SIMD.Float32x4.mul(m,l);h=SIMD.Float32x4.mul(d,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(m,l),g);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,l),h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);l=SIMD.Float32x4.mul(m,e);l=SIMD.Float32x4.swizzle(l,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,l),g);p=SIMD.Float32x4.mul(d,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(a,l));p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,
l),p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,2,3,0,1),a);l=SIMD.Float32x4.swizzle(l,1,0,3,2);e=SIMD.Float32x4.swizzle(e,2,3,0,1);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),g);n=SIMD.Float32x4.mul(d,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(e,l));n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,l),n);n=SIMD.Float32x4.swizzle(n,2,3,0,1);l=SIMD.Float32x4.mul(d,m);l=SIMD.Float32x4.swizzle(l,1,0,3,2);n=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,
l),n);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),p);l=SIMD.Float32x4.swizzle(l,2,3,0,1);n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),n);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(e,l));l=SIMD.Float32x4.mul(d,a);l=SIMD.Float32x4.swizzle(l,1,0,3,2);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(e,l));n=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,l),n);l=SIMD.Float32x4.swizzle(l,2,3,0,1);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),h);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(m,l));l=SIMD.Float32x4.mul(d,e);
l=SIMD.Float32x4.swizzle(l,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,l),h);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(m,l));l=SIMD.Float32x4.swizzle(l,2,3,0,1);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(a,l));p=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,l),p);SIMD.Float32x4.store(b,0,g);SIMD.Float32x4.store(b,4,h);SIMD.Float32x4.store(b,8,n);SIMD.Float32x4.store(b,12,p);return b};d.adjoint=a.USE_SIMD?d.SIMD.adjoint:d.scalar.adjoint;d.determinant=function(b){var c=b[0],e=b[1],a=b[2],g=b[3],h=b[4],
d=b[5],m=b[6],l=b[7],n=b[8],p=b[9],r=b[10],s=b[11],q=b[12],t=b[13],u=b[14];b=b[15];return(c*d-e*h)*(r*b-s*u)-(c*m-a*h)*(p*b-s*t)+(c*l-g*h)*(p*u-r*t)+(e*m-a*d)*(n*b-s*q)-(e*l-g*d)*(n*u-r*q)+(a*l-g*m)*(n*t-p*q)};d.SIMD.multiply=function(b,c,a){var f=SIMD.Float32x4.load(c,0),g=SIMD.Float32x4.load(c,4),h=SIMD.Float32x4.load(c,8);c=SIMD.Float32x4.load(c,12);var d=SIMD.Float32x4.load(a,0),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,
1,1,1,1),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),c))));SIMD.Float32x4.store(b,0,d);d=SIMD.Float32x4.load(a,4);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),c))));SIMD.Float32x4.store(b,
4,d);d=SIMD.Float32x4.load(a,8);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),c))));SIMD.Float32x4.store(b,8,d);a=SIMD.Float32x4.load(a,12);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,
1,1,1,1),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,3,3,3,3),c))));SIMD.Float32x4.store(b,12,f);return b};d.scalar.multiply=function(b,c,a){var f=c[0],g=c[1],h=c[2],d=c[3],m=c[4],l=c[5],n=c[6],p=c[7],r=c[8],s=c[9],q=c[10],t=c[11],u=c[12],v=c[13],x=c[14];c=c[15];var w=a[0],z=a[1],A=a[2],y=a[3];b[0]=w*f+z*m+A*r+y*u;b[1]=w*g+z*l+A*s+y*v;b[2]=w*h+z*n+A*q+y*x;b[3]=w*d+z*p+A*t+y*c;w=a[4];z=a[5];A=a[6];y=a[7];b[4]=w*f+z*m+A*r+
y*u;b[5]=w*g+z*l+A*s+y*v;b[6]=w*h+z*n+A*q+y*x;b[7]=w*d+z*p+A*t+y*c;w=a[8];z=a[9];A=a[10];y=a[11];b[8]=w*f+z*m+A*r+y*u;b[9]=w*g+z*l+A*s+y*v;b[10]=w*h+z*n+A*q+y*x;b[11]=w*d+z*p+A*t+y*c;w=a[12];z=a[13];A=a[14];y=a[15];b[12]=w*f+z*m+A*r+y*u;b[13]=w*g+z*l+A*s+y*v;b[14]=w*h+z*n+A*q+y*x;b[15]=w*d+z*p+A*t+y*c;return b};d.multiply=a.USE_SIMD?d.SIMD.multiply:d.scalar.multiply;d.mul=d.multiply;d.scalar.translate=function(b,c,a){var f=a[0],g=a[1];a=a[2];var h,d,m,l,n,p,r,s,q,t,u,v;c===b?(b[12]=c[0]*f+c[4]*g+
c[8]*a+c[12],b[13]=c[1]*f+c[5]*g+c[9]*a+c[13],b[14]=c[2]*f+c[6]*g+c[10]*a+c[14],b[15]=c[3]*f+c[7]*g+c[11]*a+c[15]):(h=c[0],d=c[1],m=c[2],l=c[3],n=c[4],p=c[5],r=c[6],s=c[7],q=c[8],t=c[9],u=c[10],v=c[11],b[0]=h,b[1]=d,b[2]=m,b[3]=l,b[4]=n,b[5]=p,b[6]=r,b[7]=s,b[8]=q,b[9]=t,b[10]=u,b[11]=v,b[12]=h*f+n*g+q*a+c[12],b[13]=d*f+p*g+t*a+c[13],b[14]=m*f+r*g+u*a+c[14],b[15]=l*f+s*g+v*a+c[15]);return b};d.SIMD.translate=function(b,c,a){var f=SIMD.Float32x4.load(c,0),g=SIMD.Float32x4.load(c,4),h=SIMD.Float32x4.load(c,
8),d=SIMD.Float32x4.load(c,12);a=SIMD.Float32x4(a[0],a[1],a[2],0);c!==b&&(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[8]=c[8],b[9]=c[9],b[10]=c[10],b[11]=c[11]);f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(a,0,0,0,0));g=SIMD.Float32x4.mul(g,SIMD.Float32x4.swizzle(a,1,1,1,1));h=SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(a,2,2,2,2));c=SIMD.Float32x4.add(f,SIMD.Float32x4.add(g,SIMD.Float32x4.add(h,d)));SIMD.Float32x4.store(b,12,c);return b};d.translate=a.USE_SIMD?
d.SIMD.translate:d.scalar.translate;d.scalar.scale=function(b,c,a){var f=a[0],g=a[1];a=a[2];b[0]=c[0]*f;b[1]=c[1]*f;b[2]=c[2]*f;b[3]=c[3]*f;b[4]=c[4]*g;b[5]=c[5]*g;b[6]=c[6]*g;b[7]=c[7]*g;b[8]=c[8]*a;b[9]=c[9]*a;b[10]=c[10]*a;b[11]=c[11]*a;b[12]=c[12];b[13]=c[13];b[14]=c[14];b[15]=c[15];return b};d.SIMD.scale=function(b,c,a){var f;a=SIMD.Float32x4(a[0],a[1],a[2],0);f=SIMD.Float32x4.load(c,0);SIMD.Float32x4.store(b,0,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(a,0,0,0,0)));f=SIMD.Float32x4.load(c,
4);SIMD.Float32x4.store(b,4,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(a,1,1,1,1)));f=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(b,8,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(a,2,2,2,2)));b[12]=c[12];b[13]=c[13];b[14]=c[14];b[15]=c[15];return b};d.scale=a.USE_SIMD?d.SIMD.scale:d.scalar.scale;d.rotate=function(b,c,e,f){var g=f[0],h=f[1];f=f[2];var d=Math.sqrt(g*g+h*h+f*f),m,l,n,p,r,s,q,t,u,v,x,w,z,A,y,B,E,H,J,F;if(Math.abs(d)<a.EPSILON)return null;d=1/d;g*=d;h*=d;f*=d;m=Math.sin(e);l=Math.cos(e);
n=1-l;e=c[0];d=c[1];p=c[2];r=c[3];s=c[4];q=c[5];t=c[6];u=c[7];v=c[8];x=c[9];w=c[10];z=c[11];A=g*g*n+l;y=h*g*n+f*m;B=f*g*n-h*m;E=g*h*n-f*m;H=h*h*n+l;J=f*h*n+g*m;F=g*f*n+h*m;g=h*f*n-g*m;h=f*f*n+l;b[0]=e*A+s*y+v*B;b[1]=d*A+q*y+x*B;b[2]=p*A+t*y+w*B;b[3]=r*A+u*y+z*B;b[4]=e*E+s*H+v*J;b[5]=d*E+q*H+x*J;b[6]=p*E+t*H+w*J;b[7]=r*E+u*H+z*J;b[8]=e*F+s*g+v*h;b[9]=d*F+q*g+x*h;b[10]=p*F+t*g+w*h;b[11]=r*F+u*g+z*h;c!==b&&(b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]);return b};d.scalar.rotateX=function(b,c,a){var f=
Math.sin(a);a=Math.cos(a);var g=c[4],h=c[5],d=c[6],m=c[7],l=c[8],n=c[9],p=c[10],r=c[11];c!==b&&(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]);b[4]=g*a+l*f;b[5]=h*a+n*f;b[6]=d*a+p*f;b[7]=m*a+r*f;b[8]=l*a-g*f;b[9]=n*a-h*f;b[10]=p*a-d*f;b[11]=r*a-m*f;return b};d.SIMD.rotateX=function(b,c,a){var f=SIMD.Float32x4.splat(Math.sin(a));a=SIMD.Float32x4.splat(Math.cos(a));c!==b&&(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]);
var g=SIMD.Float32x4.load(c,4);c=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(b,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(g,a),SIMD.Float32x4.mul(c,f)));SIMD.Float32x4.store(b,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,a),SIMD.Float32x4.mul(g,f)));return b};d.rotateX=a.USE_SIMD?d.SIMD.rotateX:d.scalar.rotateX;d.scalar.rotateY=function(b,c,a){var f=Math.sin(a);a=Math.cos(a);var g=c[0],h=c[1],d=c[2],m=c[3],l=c[8],n=c[9],p=c[10],r=c[11];c!==b&&(b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[12]=c[12],b[13]=
c[13],b[14]=c[14],b[15]=c[15]);b[0]=g*a-l*f;b[1]=h*a-n*f;b[2]=d*a-p*f;b[3]=m*a-r*f;b[8]=g*f+l*a;b[9]=h*f+n*a;b[10]=d*f+p*a;b[11]=m*f+r*a;return b};d.SIMD.rotateY=function(b,c,a){var f=SIMD.Float32x4.splat(Math.sin(a));a=SIMD.Float32x4.splat(Math.cos(a));c!==b&&(b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]);var g=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(b,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,a),SIMD.Float32x4.mul(c,f)));
SIMD.Float32x4.store(b,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(g,f),SIMD.Float32x4.mul(c,a)));return b};d.rotateY=a.USE_SIMD?d.SIMD.rotateY:d.scalar.rotateY;d.scalar.rotateZ=function(b,c,a){var f=Math.sin(a);a=Math.cos(a);var g=c[0],h=c[1],d=c[2],m=c[3],l=c[4],n=c[5],p=c[6],r=c[7];c!==b&&(b[8]=c[8],b[9]=c[9],b[10]=c[10],b[11]=c[11],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]);b[0]=g*a+l*f;b[1]=h*a+n*f;b[2]=d*a+p*f;b[3]=m*a+r*f;b[4]=l*a-g*f;b[5]=n*a-h*f;b[6]=p*a-d*f;b[7]=r*a-m*f;return b};d.SIMD.rotateZ=
function(b,c,a){var f=SIMD.Float32x4.splat(Math.sin(a));a=SIMD.Float32x4.splat(Math.cos(a));c!==b&&(b[8]=c[8],b[9]=c[9],b[10]=c[10],b[11]=c[11],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]);var g=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,4);SIMD.Float32x4.store(b,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(g,a),SIMD.Float32x4.mul(c,f)));SIMD.Float32x4.store(b,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,a),SIMD.Float32x4.mul(g,f)));return b};d.rotateZ=a.USE_SIMD?d.SIMD.rotateZ:d.scalar.rotateZ;
d.fromTranslation=function(b,c){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];b[15]=1;return b};d.fromScaling=function(b,c){b[0]=c[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=c[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=c[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotation=function(b,c,e){var f=e[0],g=e[1];e=e[2];var h=Math.sqrt(f*f+g*g+e*e),d;if(Math.abs(h)<a.EPSILON)return null;h=1/h;f*=h;g*=h;e*=h;h=Math.sin(c);c=Math.cos(c);
d=1-c;b[0]=f*f*d+c;b[1]=g*f*d+e*h;b[2]=e*f*d-g*h;b[3]=0;b[4]=f*g*d-e*h;b[5]=g*g*d+c;b[6]=e*g*d+f*h;b[7]=0;b[8]=f*e*d+g*h;b[9]=g*e*d-f*h;b[10]=e*e*d+c;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromXRotation=function(b,c){var a=Math.sin(c),f=Math.cos(c);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=f;b[6]=a;b[7]=0;b[8]=0;b[9]=-a;b[10]=f;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromYRotation=function(b,c){var a=Math.sin(c),f=Math.cos(c);b[0]=f;b[1]=0;b[2]=-a;b[3]=0;b[4]=0;b[5]=1;b[6]=
0;b[7]=0;b[8]=a;b[9]=0;b[10]=f;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromZRotation=function(b,c){var a=Math.sin(c),f=Math.cos(c);b[0]=f;b[1]=a;b[2]=0;b[3]=0;b[4]=-a;b[5]=f;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotationTranslation=function(b,c,a){var f=c[0],g=c[1],h=c[2],d=c[3],m=f+f,l=g+g,n=h+h;c=f*m;var p=f*l,f=f*n,r=g*l,g=g*n,h=h*n,m=d*m,l=d*l,d=d*n;b[0]=1-(r+h);b[1]=p+d;b[2]=f-l;b[3]=0;b[4]=p-d;b[5]=1-(c+h);b[6]=g+m;b[7]=0;b[8]=
f+l;b[9]=g-m;b[10]=1-(c+r);b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};d.getTranslation=function(b,c){b[0]=c[12];b[1]=c[13];b[2]=c[14];return b};d.getRotation=function(b,c){var a=c[0]+c[5]+c[10],f=0;0<a?(f=2*Math.sqrt(a+1),b[3]=0.25*f,b[0]=(c[6]-c[9])/f,b[1]=(c[8]-c[2])/f,b[2]=(c[1]-c[4])/f):c[0]>c[5]&c[0]>c[10]?(f=2*Math.sqrt(1+c[0]-c[5]-c[10]),b[3]=(c[6]-c[9])/f,b[0]=0.25*f,b[1]=(c[1]+c[4])/f,b[2]=(c[8]+c[2])/f):c[5]>c[10]?(f=2*Math.sqrt(1+c[5]-c[0]-c[10]),b[3]=(c[8]-c[2])/f,b[0]=
(c[1]+c[4])/f,b[1]=0.25*f,b[2]=(c[6]+c[9])/f):(f=2*Math.sqrt(1+c[10]-c[0]-c[5]),b[3]=(c[1]-c[4])/f,b[0]=(c[8]+c[2])/f,b[1]=(c[6]+c[9])/f,b[2]=0.25*f);return b};d.fromRotationTranslationScale=function(b,c,a,f){var g=c[0],h=c[1],d=c[2],m=c[3],l=g+g,n=h+h,p=d+d;c=g*l;var r=g*n,g=g*p,s=h*n,h=h*p,d=d*p,l=m*l,n=m*n,m=m*p,p=f[0],q=f[1];f=f[2];b[0]=(1-(s+d))*p;b[1]=(r+m)*p;b[2]=(g-n)*p;b[3]=0;b[4]=(r-m)*q;b[5]=(1-(c+d))*q;b[6]=(h+l)*q;b[7]=0;b[8]=(g+n)*f;b[9]=(h-l)*f;b[10]=(1-(c+s))*f;b[11]=0;b[12]=a[0];
b[13]=a[1];b[14]=a[2];b[15]=1;return b};d.fromRotationTranslationScaleOrigin=function(b,c,a,f,g){var h=c[0],d=c[1],m=c[2],l=c[3],n=h+h,p=d+d,r=m+m;c=h*n;var s=h*p,h=h*r,q=d*p,d=d*r,m=m*r,n=l*n,p=l*p,l=l*r,r=f[0],t=f[1];f=f[2];var u=g[0],v=g[1];g=g[2];b[0]=(1-(q+m))*r;b[1]=(s+l)*r;b[2]=(h-p)*r;b[3]=0;b[4]=(s-l)*t;b[5]=(1-(c+m))*t;b[6]=(d+n)*t;b[7]=0;b[8]=(h+p)*f;b[9]=(d-n)*f;b[10]=(1-(c+q))*f;b[11]=0;b[12]=a[0]+u-(b[0]*u+b[4]*v+b[8]*g);b[13]=a[1]+v-(b[1]*u+b[5]*v+b[9]*g);b[14]=a[2]+g-(b[2]*u+b[6]*
v+b[10]*g);b[15]=1;return b};d.fromQuat=function(b,c){var a=c[0],f=c[1],g=c[2],d=c[3],k=a+a,m=f+f,l=g+g,a=a*k,n=f*k,f=f*m,p=g*k,r=g*m,g=g*l,k=d*k,m=d*m,d=d*l;b[0]=1-f-g;b[1]=n+d;b[2]=p-m;b[3]=0;b[4]=n-d;b[5]=1-a-g;b[6]=r+k;b[7]=0;b[8]=p+m;b[9]=r-k;b[10]=1-a-f;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.frustum=function(b,c,a,f,g,d,k){var m=1/(a-c),l=1/(g-f),n=1/(d-k);b[0]=2*d*m;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*d*l;b[6]=0;b[7]=0;b[8]=(a+c)*m;b[9]=(g+f)*l;b[10]=(k+d)*n;b[11]=-1;b[12]=0;b[13]=
0;b[14]=2*(k*d)*n;b[15]=0;return b};d.perspective=function(b,c,a,f,g){c=1/Math.tan(c/2);var d=1/(f-g);b[0]=c/a;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=c;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=(g+f)*d;b[11]=-1;b[12]=0;b[13]=0;b[14]=2*g*f*d;b[15]=0;return b};d.perspectiveFromFieldOfView=function(b,c,a,f){var g=Math.tan(c.upDegrees*Math.PI/180),d=Math.tan(c.downDegrees*Math.PI/180),k=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var m=2/(k+c),l=2/(g+d);b[0]=m;b[1]=0;b[2]=0;b[3]=0;b[4]=
0;b[5]=l;b[6]=0;b[7]=0;b[8]=-(0.5*(k-c)*m);b[9]=0.5*(g-d)*l;b[10]=f/(a-f);b[11]=-1;b[12]=0;b[13]=0;b[14]=f*a/(a-f);b[15]=0;return b};d.ortho=function(b,c,a,f,g,d,k){var m=1/(c-a),l=1/(f-g),n=1/(d-k);b[0]=-2*m;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*l;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*n;b[11]=0;b[12]=(c+a)*m;b[13]=(g+f)*l;b[14]=(k+d)*n;b[15]=1;return b};d.lookAt=function(b,c,e,f){var g,h,k,m,l,n,p,r,s=c[0],q=c[1];c=c[2];k=f[0];m=f[1];h=f[2];p=e[0];f=e[1];g=e[2];if(Math.abs(s-p)<a.EPSILON&&Math.abs(q-
f)<a.EPSILON&&Math.abs(c-g)<a.EPSILON)return d.identity(b);e=s-p;f=q-f;p=c-g;r=1/Math.sqrt(e*e+f*f+p*p);e*=r;f*=r;p*=r;g=m*p-h*f;h=h*e-k*p;k=k*f-m*e;(r=Math.sqrt(g*g+h*h+k*k))?(r=1/r,g*=r,h*=r,k*=r):k=h=g=0;m=f*k-p*h;l=p*g-e*k;n=e*h-f*g;(r=Math.sqrt(m*m+l*l+n*n))?(r=1/r,m*=r,l*=r,n*=r):n=l=m=0;b[0]=g;b[1]=m;b[2]=e;b[3]=0;b[4]=h;b[5]=l;b[6]=f;b[7]=0;b[8]=k;b[9]=n;b[10]=p;b[11]=0;b[12]=-(g*s+h*q+k*c);b[13]=-(m*s+l*q+n*c);b[14]=-(e*s+f*q+p*c);b[15]=1;return b};d.str=function(b){return"mat4("+b[0]+", "+
b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};d.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};d.add=function(b,c,a){b[0]=c[0]+
a[0];b[1]=c[1]+a[1];b[2]=c[2]+a[2];b[3]=c[3]+a[3];b[4]=c[4]+a[4];b[5]=c[5]+a[5];b[6]=c[6]+a[6];b[7]=c[7]+a[7];b[8]=c[8]+a[8];b[9]=c[9]+a[9];b[10]=c[10]+a[10];b[11]=c[11]+a[11];b[12]=c[12]+a[12];b[13]=c[13]+a[13];b[14]=c[14]+a[14];b[15]=c[15]+a[15];return b};d.subtract=function(b,c,a){b[0]=c[0]-a[0];b[1]=c[1]-a[1];b[2]=c[2]-a[2];b[3]=c[3]-a[3];b[4]=c[4]-a[4];b[5]=c[5]-a[5];b[6]=c[6]-a[6];b[7]=c[7]-a[7];b[8]=c[8]-a[8];b[9]=c[9]-a[9];b[10]=c[10]-a[10];b[11]=c[11]-a[11];b[12]=c[12]-a[12];b[13]=c[13]-
a[13];b[14]=c[14]-a[14];b[15]=c[15]-a[15];return b};d.sub=d.subtract;d.multiplyScalar=function(b,c,a){b[0]=c[0]*a;b[1]=c[1]*a;b[2]=c[2]*a;b[3]=c[3]*a;b[4]=c[4]*a;b[5]=c[5]*a;b[6]=c[6]*a;b[7]=c[7]*a;b[8]=c[8]*a;b[9]=c[9]*a;b[10]=c[10]*a;b[11]=c[11]*a;b[12]=c[12]*a;b[13]=c[13]*a;b[14]=c[14]*a;b[15]=c[15]*a;return b};d.multiplyScalarAndAdd=function(b,c,a,f){b[0]=c[0]+a[0]*f;b[1]=c[1]+a[1]*f;b[2]=c[2]+a[2]*f;b[3]=c[3]+a[3]*f;b[4]=c[4]+a[4]*f;b[5]=c[5]+a[5]*f;b[6]=c[6]+a[6]*f;b[7]=c[7]+a[7]*f;b[8]=c[8]+
a[8]*f;b[9]=c[9]+a[9]*f;b[10]=c[10]+a[10]*f;b[11]=c[11]+a[11]*f;b[12]=c[12]+a[12]*f;b[13]=c[13]+a[13]*f;b[14]=c[14]+a[14]*f;b[15]=c[15]+a[15]*f;return b};d.exactEquals=function(b,c){return b[0]===c[0]&&b[1]===c[1]&&b[2]===c[2]&&b[3]===c[3]&&b[4]===c[4]&&b[5]===c[5]&&b[6]===c[6]&&b[7]===c[7]&&b[8]===c[8]&&b[9]===c[9]&&b[10]===c[10]&&b[11]===c[11]&&b[12]===c[12]&&b[13]===c[13]&&b[14]===c[14]&&b[15]===c[15]};d.equals=function(b,c){var e=b[0],f=b[1],g=b[2],d=b[3],k=b[4],m=b[5],l=b[6],n=b[7],p=b[8],r=
b[9],s=b[10],q=b[11],t=b[12],u=b[13],v=b[14],x=b[15],w=c[0],z=c[1],A=c[2],y=c[3],B=c[4],E=c[5],H=c[6],J=c[7],F=c[8],I=c[9],L=c[10],K=c[11],G=c[12],D=c[13],C=c[14],M=c[15];return Math.abs(e-w)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(f-z)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(g-A)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(d-y)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(y))&&Math.abs(k-B)<=a.EPSILON*Math.max(1,Math.abs(k),Math.abs(B))&&Math.abs(m-E)<=
a.EPSILON*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(l-H)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(H))&&Math.abs(n-J)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(J))&&Math.abs(p-F)<=a.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(r-I)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(I))&&Math.abs(s-L)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(L))&&Math.abs(q-K)<=a.EPSILON*Math.max(1,Math.abs(q),Math.abs(K))&&Math.abs(t-G)<=a.EPSILON*Math.max(1,Math.abs(t),Math.abs(G))&&Math.abs(u-D)<=a.EPSILON*
Math.max(1,Math.abs(u),Math.abs(D))&&Math.abs(v-C)<=a.EPSILON*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(x-M)<=a.EPSILON*Math.max(1,Math.abs(x),Math.abs(M))};return d})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(a,d,b,c){var e;(function(b){b[b.BEFORE=0]="BEFORE";b[b.ATTACHING=1]="ATTACHING";b[b.DETACHING=2]="DETACHING";b[b.RENDERING=3]="RENDERING";b[b.AFTER=4]="AFTER";b[b.DONE=5]=
"DONE"})(e||(e={}));return function(c){function a(){c.apply(this,arguments);this._childrenSet=new Set;this._childrenToAttach=[];this._childrenToDetach=[];this._renderPhase=e.DONE;this.children=[]}b(a,c);Object.defineProperty(a.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});a.prototype.attach=function(b){return!0};a.prototype.detach=function(b){var c=this.children;b=this.prepareChildrenRenderParameters(b);for(var a=0,e=c.length;a<e;a++){var f=c[a];
f.attached&&(this.detachChild(f,b),f.attached=!1,f.parent=null)}};a.prototype.render=function(b){var c=this.prepareChildrenRenderParameters(b);this._renderPhase=e.BEFORE;this.beforeRenderChildren(b,c);this._renderPhase=e.ATTACHING;this.attachChildren(c)||this.requestRender();this._renderPhase=e.DETACHING;for(var a=this._childrenToDetach;0<a.length;){var f=a.shift();this.detachChild(f,c);f.attached=!1;f.parent=null}this._renderPhase=e.RENDERING;this.renderChildren(c);this._renderPhase=e.AFTER;this.afterRenderChildren(b,
c);this._renderPhase=e.DONE};a.prototype.addChild=function(b){return this.addChildAt(b,this.children.length)};a.prototype.addChildAt=function(b,c){void 0===c&&(c=this.numChildren);if(!b||this.contains(b))return b;var a=b.parent;a&&a!==this&&a.removeChild(b);c>=this.numChildren?this.children.push(b):this.children.splice(c,0,b);this._childrenSet.add(b);a=this._childrenToDetach.indexOf(b);-1<a&&this._childrenToDetach.splice(a,1);this._childrenToAttach.push(b);this._renderPhase>=e.RENDERING&&this.requestRender();
return b};a.prototype.contains=function(b){return this._childrenSet.has(b)};a.prototype.getChildIndex=function(b){return this.children.indexOf(b)};a.prototype.getChildAt=function(b){return 0>b||b>this.children.length?null:this.children[b]};a.prototype.removeAllChildren=function(){for(var b=this.numChildren;b--;)this.removeChildAt(0)};a.prototype.removeChild=function(b){return this.contains(b)?this.removeChildAt(this.getChildIndex(b)):b};a.prototype.removeChildAt=function(b){if(0>b||b>=this.children.length)return null;
b=this.children.splice(b,1)[0];this._childrenSet["delete"](b);if(b.attached)this._childrenToDetach.push(b),this._renderPhase>=e.RENDERING&&this.requestRender();else{var c=this._childrenToAttach.indexOf(b);-1<c&&this._childrenToAttach.splice(c,1)}return b};a.prototype.requestChildRender=function(b){b&&(b.parent===this&&this._renderPhase>=e.RENDERING)&&this.requestRender()};a.prototype.setChildIndex=function(b,c){var a=this.getChildIndex(b);-1<a&&(this.children.splice(a,1),this.children.splice(c,0,
b),this._renderPhase>=e.RENDERING&&this.requestRender())};a.prototype.sortChildren=function(b){this._renderPhase>e.RENDERING&&this.requestRender();return this.children.sort(b)};a.prototype.attachChildren=function(b){var c=this._childrenToAttach;if(0===c.length)return!0;for(var a=0===c.length;!a;)a=c.shift(),this.attachChild(a,b)&&(a.attached=!0,a.parent=this),a=0===c.length;return 0===c.length};a.prototype.renderChildren=function(b){for(var c=this.children,a=0,e=c.length;a<e;a++){var f=c[a];f.attached&&
this.renderChild(f,b)}};a.prototype.beforeRenderChildren=function(b,c){};a.prototype.afterRenderChildren=function(b,c){};return a}(c)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper"],function(a,d,b){var c=0;return function(){function b(){this.attached=!1;this._opacity=1;this._visible=!0;Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-do-"+c++})}Object.defineProperty(b.prototype,
"opacity",{get:function(){return this._opacity},set:function(b){this._opacity!==b&&(this._opacity=b,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visible",{get:function(){return this._visible},set:function(b){this._visible!==b&&(this._visible=b,this.requestRender())},enumerable:!0,configurable:!0});b.prototype.requestRender=function(){this.parent&&this.parent.requestChildRender(this)};b.prototype.dispose=function(){};return b}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/Renderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../GeometryUtils ./BackgroundRenderer ./LineRenderer ./FillRenderer ./SymbolRenderer ./TileInfoRenderer ./FadeRecorder".split(" "),
function(a,d,b,c,e,f,g,h,k,m){return function(){function a(b,c,d){void 0===d&&(d=!0);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this._pixelRatio=1;this._SpriteMosaic=b;this._glyphMosaic=c;this._ignoreSpeed=!d;this._backgroundRenderer=new e;this._lineRenderer=new f;this._fillRenderer=new g;this._symbolRenderer=new h;this._tileInfoRenderer=
new k;this._fadeRecorder=new m.FadeRecorder(300);this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._backgroundColor=new Float32Array([1,0,0,1])}a.prototype.setStateParams=function(a,e,f){this._pixelRatio=e;this._fadeRecorder.recordLevel(f);this._state=a;if(this._state.width!==this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/a.width,this._extrudeScaleVector[1]=-2/a.height,
b.identity(this._extrudeMatrix),b.rotate(this._extrudeMatrix,this._extrudeMatrix,-a.rotation*c.C_DEG_TO_RAD,this._extrudeRotateVector),b.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),b.transpose(this._extrudeMatrix,this._extrudeMatrix),b.identity(this._extrudeNoRotationMatrix),b.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),b.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,
this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};a.prototype.drawClippingMasks=function(b,c){if(0!==c.length){b.setDepthWriteEnabled(!1);b.setDepthTestEnabled(!1);b.setStencilTestEnabled(!0);b.setBlendingEnabled(!1);b.setColorMask(!1,!1,!1,!1);b.setStencilOp(7680,7680,7681);b.setClearStencil(0);b.clear(b.gl.STENCIL_BUFFER_BIT);for(var a=0;a<c.length;a++){var e=c[a];e.attached&&e.visible&&(b.setStencilFunctionSeparate(1032,519,e.stencilData.reference,e.stencilData.mask),
b.setStencilWriteMask(e.stencilData.mask),this._backgroundRenderer.renderSolidColor(b,{u_matrix:e.tileTransform.transform,u_normalized_origin:e.tileTransform.displayCoord,u_coord_range:e.coordRange,u_depth:0,u_color:this._backgroundColor}))}b.setColorMask(!0,!0,!0,!0);b.setBlendingEnabled(!0);b.setStencilWriteMask(255)}};a.prototype.renderDebug=function(b,c){var a=c.key;this._backgroundColor.set([a.col%2,a.row%2,0===a.col%2&&0===a.row%2?1:0,0.5]);this._backgroundRenderer.renderSolidColor(b,{u_matrix:c.tileTransform.transform,
u_normalized_origin:c.tileTransform.displayCoord,u_coord_range:c.coordRange,u_depth:0,u_color:this._backgroundColor})};a.prototype.renderBucket=function(b,c,a,e,f,g,d,h){switch(c.type){case 0:2!==f&&this._renderBackground(b,a,f,g,d,h);break;case 1:2!==f&&this._renderFill(b,c,a,f,g,d,h);break;case 2:1===f&&this._renderLine(b,c,a,g,d,h);break;case 3:2===f&&this._renderSymbol(b,c,a,e,g,d,h)}};a.prototype.renderTileInfo=function(b,c){this._tileInfoRenderer.render(b,c)};a.prototype.needsRedraw=function(){return this._fadeRecorder.needsRedraw()};
a.prototype._renderBackground=function(b,c,a,e,f,g){this._backgroundRenderer.render(b,c,a,e,f,this._SpriteMosaic,this._SpriteMosaic.pixelRatio,g)};a.prototype._renderLine=function(b,c,a,e,f,g){this._lineRenderer.render(b,c,a,this._state,e,f,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,g)};a.prototype._renderFill=function(b,c,a,e,f,g,d){this._fillRenderer.render(b,c,a,this._state.rotation,e,f,g,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,d)};a.prototype._renderSymbol=
function(b,c,a,e,f,g,d){var h=!0;e===f.key.level&&(h=!1);b.setStencilTestEnabled(h);this._symbolRenderer.render(b,c,a,this._state.rotation,this._fadeRecorder.getFadeValues(this._ignoreSpeed),f,g,this._SpriteMosaic,this._glyphMosaic,this._extrudeMatrix,this._extrudeNoRotationMatrix,this._SpriteMosaic.pixelRatio,d)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/BackgroundRenderer":function(){define("require exports dojo/text!./shaders/background.vs.glsl dojo/text!./shaders/background.fs.glsl dojo/text!./shaders/patternFillShader.vs.glsl dojo/text!./shaders/patternFillShader.fs.glsl ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject".split(" "),
function(a,d,b,c,e,f,g,h,k,m,l){return function(){function a(){this._patternMatrix=g.create();this._color=h.create();this._initialized=!1}a.prototype.renderSolidColor=function(b,c){this._initialized||this._initialize(b);b.bindVAO(this._solidVertexArrayObject);b.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",c.u_matrix);this._solidProgram.setUniform2fv("u_normalized_origin",c.u_normalized_origin);this._solidProgram.setUniform1f("u_coord_range",c.u_coord_range||
4096);this._solidProgram.setUniform1f("u_depth",c.u_depth||0);this._solidProgram.setUniform4fv("u_color",c.u_color||new Float32Array([1,0,0,1]));b.drawArrays(5,0,4);b.bindVAO()};a.prototype.render=function(b,c,a,e,f,d,h,k){this._initialized||this._initialize(b);var l=f.getPaintValue("background-color",c);k*=f.getPaintValue("background-opacity",c);var m=f.getPaintValue("background-pattern",c),n=void 0!==m,y=l[3]*k,B=n||1>y;if(!(B&&0===a)&&(B||1!==a)){if(n){b.bindVAO(this._patternVertexArrayObject);
b.bindProgram(this._patternProgram);a=d.getMosaicItemPosition(m,!0);if(!a)return;c=e.coordRange/512/Math.pow(2,Math.floor(c)-e.key.level)/h;g.identity(this._patternMatrix);h=1/(a.size[1]*c);this._patternMatrix[0]=1/(a.size[0]*c);this._patternMatrix[4]=h;d.bind(b,9729,0);this._patternProgram.setUniformMatrix4fv("u_transformMatrix",e.tileTransform.transform);this._patternProgram.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord);this._patternProgram.setUniform1f("u_depth",f.z);this._patternProgram.setUniformMatrix3fv("u_pattern_matrix",
this._patternMatrix);this._patternProgram.setUniform1f("u_opacity",k);this._patternProgram.setUniform2f("u_pattern_tl",a.tl[0],a.tl[1]);this._patternProgram.setUniform2f("u_pattern_br",a.br[0],a.br[1]);this._patternProgram.setUniform1i("u_texture",0)}else this._color[0]=y*l[0],this._color[1]=y*l[1],this._color[2]=y*l[2],this._color[3]=y,b.bindVAO(this._solidVertexArrayObject),b.bindProgram(this._solidProgram),this._solidProgram.setUniformMatrix4fv("u_transformMatrix",e.tileTransform.transform),this._solidProgram.setUniform2fv("u_normalized_origin",
e.tileTransform.displayCoord),this._solidProgram.setUniform1f("u_coord_range",e.coordRange),this._solidProgram.setUniform1f("u_depth",f.z||0),this._solidProgram.setUniform4fv("u_color",this._color);b.drawArrays(5,0,4);b.bindVAO()}};a.prototype._initialize=function(a){if(this._initialized)return!0;var g={a_pos:0},d=new k(a,b,c,g);if(!d)return!1;var h=new k(a,e,f,g);if(!h)return!1;var n={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},u=new Int8Array([0,0,1,0,
0,1,1,1]),v=l.createVertex(a,35044,u),v=new m(a,g,n,{geometry:v}),u=new Int16Array([0,0,4096,0,0,4096,4096,4096]),u=l.createVertex(a,35044,u);a=new m(a,g,{geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:u});this._solidProgram=d;this._patternProgram=h;this._vertexAttributes=n;this._solidVertexArrayObject=v;this._patternVertexArrayObject=a;return this._initialized=!0};return a}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat3":function(){define(["./common"],
function(a){var d={create:function(){var b=new a.ARRAY_TYPE(9);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},fromMat4:function(b,c){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[4];b[4]=c[5];b[5]=c[6];b[6]=c[8];b[7]=c[9];b[8]=c[10];return b},clone:function(b){var c=new a.ARRAY_TYPE(9);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];return c},copy:function(b,c){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=c[4];b[5]=c[5];b[6]=c[6];b[7]=c[7];
b[8]=c[8];return b},fromValues:function(b,c,e,f,g,d,k,m,l){var n=new a.ARRAY_TYPE(9);n[0]=b;n[1]=c;n[2]=e;n[3]=f;n[4]=g;n[5]=d;n[6]=k;n[7]=m;n[8]=l;return n},set:function(b,c,a,f,g,d,k,m,l,n){b[0]=c;b[1]=a;b[2]=f;b[3]=g;b[4]=d;b[5]=k;b[6]=m;b[7]=l;b[8]=n;return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},transpose:function(b,a){if(b===a){var e=a[1],f=a[2],g=a[5];b[1]=a[3];b[2]=a[6];b[3]=e;b[5]=a[7];b[6]=f;b[7]=g}else b[0]=a[0],b[1]=a[3],b[2]=a[6],
b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8];return b},invert:function(b,a){var e=a[0],f=a[1],g=a[2],d=a[3],k=a[4],m=a[5],l=a[6],n=a[7],p=a[8],r=p*k-m*n,s=-p*d+m*l,q=n*d-k*l,t=e*r+f*s+g*q;if(!t)return null;t=1/t;b[0]=r*t;b[1]=(-p*f+g*n)*t;b[2]=(m*f-g*k)*t;b[3]=s*t;b[4]=(p*e-g*l)*t;b[5]=(-m*e+g*d)*t;b[6]=q*t;b[7]=(-n*e+f*l)*t;b[8]=(k*e-f*d)*t;return b},adjoint:function(b,a){var e=a[0],f=a[1],g=a[2],d=a[3],k=a[4],m=a[5],l=a[6],n=a[7],p=a[8];b[0]=k*p-m*n;b[1]=g*n-f*p;b[2]=f*m-g*k;b[3]=
m*l-d*p;b[4]=e*p-g*l;b[5]=g*d-e*m;b[6]=d*n-k*l;b[7]=f*l-e*n;b[8]=e*k-f*d;return b},determinant:function(b){var a=b[3],e=b[4],f=b[5],g=b[6],d=b[7],k=b[8];return b[0]*(k*e-f*d)+b[1]*(-k*a+f*g)+b[2]*(d*a-e*g)},multiply:function(b,a,e){var f=a[0],g=a[1],d=a[2],k=a[3],m=a[4],l=a[5],n=a[6],p=a[7];a=a[8];var r=e[0],s=e[1],q=e[2],t=e[3],u=e[4],v=e[5],x=e[6],w=e[7];e=e[8];b[0]=r*f+s*k+q*n;b[1]=r*g+s*m+q*p;b[2]=r*d+s*l+q*a;b[3]=t*f+u*k+v*n;b[4]=t*g+u*m+v*p;b[5]=t*d+u*l+v*a;b[6]=x*f+w*k+e*n;b[7]=x*g+w*m+e*p;
b[8]=x*d+w*l+e*a;return b}};d.mul=d.multiply;d.translate=function(b,a,e){var f=a[0],g=a[1],d=a[2],k=a[3],m=a[4],l=a[5],n=a[6],p=a[7];a=a[8];var r=e[0];e=e[1];b[0]=f;b[1]=g;b[2]=d;b[3]=k;b[4]=m;b[5]=l;b[6]=r*f+e*k+n;b[7]=r*g+e*m+p;b[8]=r*d+e*l+a;return b};d.rotate=function(b,a,e){var f=a[0],g=a[1],d=a[2],k=a[3],m=a[4],l=a[5],n=a[6],p=a[7];a=a[8];var r=Math.sin(e);e=Math.cos(e);b[0]=e*f+r*k;b[1]=e*g+r*m;b[2]=e*d+r*l;b[3]=e*k-r*f;b[4]=e*m-r*g;b[5]=e*l-r*d;b[6]=n;b[7]=p;b[8]=a;return b};d.scale=function(b,
a,e){var f=e[0];e=e[1];b[0]=f*a[0];b[1]=f*a[1];b[2]=f*a[2];b[3]=e*a[3];b[4]=e*a[4];b[5]=e*a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};d.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=a[0];b[7]=a[1];b[8]=1;return b};d.fromRotation=function(b,a){var e=Math.sin(a),f=Math.cos(a);b[0]=f;b[1]=e;b[2]=0;b[3]=-e;b[4]=f;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};d.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=a[1];b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};d.fromMat2d=function(b,
a){b[0]=a[0];b[1]=a[1];b[2]=0;b[3]=a[2];b[4]=a[3];b[5]=0;b[6]=a[4];b[7]=a[5];b[8]=1;return b};d.fromQuat=function(b,a){var e=a[0],f=a[1],g=a[2],d=a[3],k=e+e,m=f+f,l=g+g,e=e*k,n=f*k,f=f*m,p=g*k,r=g*m,g=g*l,k=d*k,m=d*m,d=d*l;b[0]=1-f-g;b[3]=n-d;b[6]=p+m;b[1]=n+d;b[4]=1-e-g;b[7]=r-k;b[2]=p-m;b[5]=r+k;b[8]=1-e-f;return b};d.normalFromMat4=function(b,a){var e=a[0],f=a[1],g=a[2],d=a[3],k=a[4],m=a[5],l=a[6],n=a[7],p=a[8],r=a[9],s=a[10],q=a[11],t=a[12],u=a[13],v=a[14],x=a[15],w=e*m-f*k,z=e*l-g*k,A=e*n-d*
k,y=f*l-g*m,B=f*n-d*m,E=g*n-d*l,H=p*u-r*t,J=p*v-s*t,p=p*x-q*t,F=r*v-s*u,r=r*x-q*u,s=s*x-q*v,q=w*s-z*r+A*F+y*p-B*J+E*H;if(!q)return null;q=1/q;b[0]=(m*s-l*r+n*F)*q;b[1]=(l*p-k*s-n*J)*q;b[2]=(k*r-m*p+n*H)*q;b[3]=(g*r-f*s-d*F)*q;b[4]=(e*s-g*p+d*J)*q;b[5]=(f*p-e*r-d*H)*q;b[6]=(u*E-v*B+x*y)*q;b[7]=(v*A-t*E-x*z)*q;b[8]=(t*B-u*A+x*w)*q;return b};d.str=function(b){return"mat3("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+")"};d.frob=function(b){return Math.sqrt(Math.pow(b[0],
2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2))};d.add=function(b,a,e){b[0]=a[0]+e[0];b[1]=a[1]+e[1];b[2]=a[2]+e[2];b[3]=a[3]+e[3];b[4]=a[4]+e[4];b[5]=a[5]+e[5];b[6]=a[6]+e[6];b[7]=a[7]+e[7];b[8]=a[8]+e[8];return b};d.subtract=function(b,a,e){b[0]=a[0]-e[0];b[1]=a[1]-e[1];b[2]=a[2]-e[2];b[3]=a[3]-e[3];b[4]=a[4]-e[4];b[5]=a[5]-e[5];b[6]=a[6]-e[6];b[7]=a[7]-e[7];b[8]=a[8]-e[8];return b};d.sub=d.subtract;d.multiplyScalar=
function(b,a,e){b[0]=a[0]*e;b[1]=a[1]*e;b[2]=a[2]*e;b[3]=a[3]*e;b[4]=a[4]*e;b[5]=a[5]*e;b[6]=a[6]*e;b[7]=a[7]*e;b[8]=a[8]*e;return b};d.multiplyScalarAndAdd=function(b,a,e,f){b[0]=a[0]+e[0]*f;b[1]=a[1]+e[1]*f;b[2]=a[2]+e[2]*f;b[3]=a[3]+e[3]*f;b[4]=a[4]+e[4]*f;b[5]=a[5]+e[5]*f;b[6]=a[6]+e[6]*f;b[7]=a[7]+e[7]*f;b[8]=a[8]+e[8]*f;return b};d.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&b[8]===a[8]};d.equals=function(b,
c){var e=b[0],f=b[1],g=b[2],d=b[3],k=b[4],m=b[5],l=b[6],n=b[7],p=b[8],r=c[0],s=c[1],q=c[2],t=c[3],u=c[4],v=c[5],x=b[6],w=c[7],z=c[8];return Math.abs(e-r)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(f-s)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(s))&&Math.abs(g-q)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(q))&&Math.abs(d-t)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(k-u)<=a.EPSILON*Math.max(1,Math.abs(k),Math.abs(u))&&Math.abs(m-v)<=a.EPSILON*Math.max(1,Math.abs(m),Math.abs(v))&&
Math.abs(l-x)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(n-w)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(p-z)<=a.EPSILON*Math.max(1,Math.abs(p),Math.abs(z))};return d})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],function(a){var d={create:function(){var b=new a.ARRAY_TYPE(4);b[0]=0;b[1]=0;b[2]=0;b[3]=0;return b},clone:function(b){var c=new a.ARRAY_TYPE(4);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];return c},fromValues:function(b,c,e,
f){var g=new a.ARRAY_TYPE(4);g[0]=b;g[1]=c;g[2]=e;g[3]=f;return g},copy:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set:function(b,a,e,f,g){b[0]=a;b[1]=e;b[2]=f;b[3]=g;return b},add:function(b,a,e){b[0]=a[0]+e[0];b[1]=a[1]+e[1];b[2]=a[2]+e[2];b[3]=a[3]+e[3];return b},subtract:function(b,a,e){b[0]=a[0]-e[0];b[1]=a[1]-e[1];b[2]=a[2]-e[2];b[3]=a[3]-e[3];return b}};d.sub=d.subtract;d.multiply=function(b,a,e){b[0]=a[0]*e[0];b[1]=a[1]*e[1];b[2]=a[2]*e[2];b[3]=a[3]*e[3];return b};d.mul=
d.multiply;d.divide=function(b,a,e){b[0]=a[0]/e[0];b[1]=a[1]/e[1];b[2]=a[2]/e[2];b[3]=a[3]/e[3];return b};d.div=d.divide;d.ceil=function(b,a){b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);b[2]=Math.ceil(a[2]);b[3]=Math.ceil(a[3]);return b};d.floor=function(b,a){b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);b[2]=Math.floor(a[2]);b[3]=Math.floor(a[3]);return b};d.min=function(b,a,e){b[0]=Math.min(a[0],e[0]);b[1]=Math.min(a[1],e[1]);b[2]=Math.min(a[2],e[2]);b[3]=Math.min(a[3],e[3]);return b};d.max=function(b,
a,e){b[0]=Math.max(a[0],e[0]);b[1]=Math.max(a[1],e[1]);b[2]=Math.max(a[2],e[2]);b[3]=Math.max(a[3],e[3]);return b};d.round=function(b,a){b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);b[3]=Math.round(a[3]);return b};d.scale=function(b,a,e){b[0]=a[0]*e;b[1]=a[1]*e;b[2]=a[2]*e;b[3]=a[3]*e;return b};d.scaleAndAdd=function(b,a,e,f){b[0]=a[0]+e[0]*f;b[1]=a[1]+e[1]*f;b[2]=a[2]+e[2]*f;b[3]=a[3]+e[3]*f;return b};d.distance=function(b,a){var e=a[0]-b[0],f=a[1]-b[1],g=a[2]-b[2],d=a[3]-b[3];
return Math.sqrt(e*e+f*f+g*g+d*d)};d.dist=d.distance;d.squaredDistance=function(b,a){var e=a[0]-b[0],f=a[1]-b[1],g=a[2]-b[2],d=a[3]-b[3];return e*e+f*f+g*g+d*d};d.sqrDist=d.squaredDistance;d.length=function(b){var a=b[0],e=b[1],f=b[2];b=b[3];return Math.sqrt(a*a+e*e+f*f+b*b)};d.len=d.length;d.squaredLength=function(b){var a=b[0],e=b[1],f=b[2];b=b[3];return a*a+e*e+f*f+b*b};d.sqrLen=d.squaredLength;d.negate=function(b,a){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};d.inverse=function(b,a){b[0]=
1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};d.normalize=function(b,a){var e=a[0],f=a[1],g=a[2],d=a[3],k=e*e+f*f+g*g+d*d;0<k&&(k=1/Math.sqrt(k),b[0]=e*k,b[1]=f*k,b[2]=g*k,b[3]=d*k);return b};d.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]};d.lerp=function(b,a,e,f){var g=a[0],d=a[1],k=a[2];a=a[3];b[0]=g+f*(e[0]-g);b[1]=d+f*(e[1]-d);b[2]=k+f*(e[2]-k);b[3]=a+f*(e[3]-a);return b};d.random=function(b,c){c=c||1;b[0]=a.RANDOM();b[1]=a.RANDOM();b[2]=a.RANDOM();b[3]=a.RANDOM();d.normalize(b,
b);d.scale(b,b,c);return b};d.transformMat4=function(b,a,e){var f=a[0],g=a[1],d=a[2];a=a[3];b[0]=e[0]*f+e[4]*g+e[8]*d+e[12]*a;b[1]=e[1]*f+e[5]*g+e[9]*d+e[13]*a;b[2]=e[2]*f+e[6]*g+e[10]*d+e[14]*a;b[3]=e[3]*f+e[7]*g+e[11]*d+e[15]*a;return b};d.transformQuat=function(b,a,e){var f=a[0],g=a[1],d=a[2],k=e[0],m=e[1],l=e[2];e=e[3];var n=e*f+m*d-l*g,p=e*g+l*f-k*d,r=e*d+k*g-m*f,f=-k*f-m*g-l*d;b[0]=n*e+f*-k+p*-l-r*-m;b[1]=p*e+f*-m+r*-k-n*-l;b[2]=r*e+f*-l+n*-m-p*-k;b[3]=a[3];return b};d.forEach=function(){var b=
d.create();return function(a,e,f,g,d,k){e||(e=4);f||(f=0);for(g=g?Math.min(g*e+f,a.length):a.length;f<g;f+=e)b[0]=a[f],b[1]=a[f+1],b[2]=a[f+2],b[3]=a[f+3],d(b,b,k),a[f]=b[0],a[f+1]=b[1],a[f+2]=b[2],a[f+3]=b[3];return a}}();d.str=function(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};d.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]};d.equals=function(b,c){var e=b[0],f=b[1],g=b[2],d=b[3],k=c[0],m=c[1],l=c[2],n=c[3];return Math.abs(e-k)<=a.EPSILON*Math.max(1,
Math.abs(e),Math.abs(k))&&Math.abs(f-m)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(m))&&Math.abs(g-l)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(l))&&Math.abs(d-n)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(n))};return d})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require","exports","dojo/has"],function(a,d,b){return function(){function b(a,f,g,d,k){this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines=
void 0;this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};a||console.error("RenderingContext isn't initialized!");0===f.length&&console.error("Shaders source should not be empty!");this._context=a;this._vertexShaderSource=f;this._fragmentShaderSource=g;this._defines=k;this._id=b._nextId++;this._locations=d}Object.defineProperty(b.prototype,
"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});b.prototype.dispose=function(){var b=this._context.gl;this._vShader&&(b.deleteShader(this._vShader),this._vShader=null);this._fShader&&(b.deleteShader(this._fShader),this._fShader=null);this._glName&&(b.deleteProgram(this._glName),
this._glName=null)};b.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);(!this._vShader||!this._fShader)&&console.error("Error loading shaders!");var b=this._context.gl,a=b.createProgram();b.attachShader(a,this._vShader);b.attachShader(a,this._fShader);for(var c in this._locations)b.bindAttribLocation(a,this._locations[c],c);b.linkProgram(a);b.getProgramParameter(a,b.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+
b.getProgramParameter(a,b.VALIDATE_STATUS)+", gl error ["+b.getError()+"]infoLog: "+b.getProgramInfoLog(a));this._glName=a;this._initialized=!0}};b.prototype.getUniformLocation=function(b){this.initialize();void 0===this._nameToUniformLocation[b]&&(this._nameToUniformLocation[b]=this._context.gl.getUniformLocation(this._glName,b));return this._nameToUniformLocation[b]};b.prototype.hasUniform=function(b){return null!==this.getUniformLocation(b)};b.prototype.getAttribLocation=function(b){this.initialize();
void 0===this._nameToAttribLocation[b]&&(this._nameToAttribLocation[b]=this._context.gl.getAttribLocation(this._glName,b));return this._nameToAttribLocation[b]};b.prototype.setUniform1i=function(b,a){var c=this._nameToUniform1[b];if(void 0===c||a!==c)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(b),a),this._nameToUniform1[b]=a};b.prototype.setUniform1f=function(b,a){var c=this._nameToUniform1[b];if(void 0===c||a!==c)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(b),
a),this._nameToUniform1[b]=a};b.prototype.setUniform1fv=function(a,f){var g=this._nameToUniform2[a];if(void 0===g||!b._arraysEqual(f,g))this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(a),f),void 0===g?this._nameToUniform2[a]=new Float32Array(f):g.set(f)};b.prototype.setUniform2f=function(b,a,c){var d=this._nameToUniform2[b];if(void 0===d||a!==d[0]||c!==d[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(b),a,c),void 0===d?this._nameToUniform2[b]=
new Float32Array([a,c]):(d[0]=a,d[1]=c)};b.prototype.setUniform2fv=function(a,f){var g=this._nameToUniform2[a];if(void 0===g||!b._arraysEqual(f,g))this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(a),f),void 0===g?this._nameToUniform2[a]=new Float32Array(f):g.set(f)};b.prototype.setUniform3f=function(b,a,c,d){var k=this._nameToUniform3[b];if(void 0===k||a!==k[0]||c!==k[1]||d!==k[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(b),
a,c,d),void 0===k?this._nameToUniform3[b]=new Float32Array([a,c,d]):(k[0]=a,k[1]=c,k[2]=d)};b.prototype.setUniform3fv=function(a,f){var g=this._nameToUniform3[a];if(void 0===g||!b._arraysEqual(f,g))this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(a),f),void 0===g?this._nameToUniform3[a]=new Float32Array(f):g.set(f)};b.prototype.setUniform4f=function(b,a,c,d,k){var m=this._nameToUniform4[b];if(void 0===m||a!==m[0]||c!==m[1]||d!==m[2]||k!==m[3])this._context.bindProgram(this),
this._context.gl.uniform4f(this.getUniformLocation(b),a,c,d,k),void 0===m?this._nameToUniform4[b]=new Float32Array([a,c,d,k]):(m[0]=a,m[1]=c,m[2]=d,m[3]=k)};b.prototype.setUniform4fv=function(a,f){var g=this._nameToUniform4[a];if(void 0===g||!b._arraysEqual(f,g))this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(a),f),void 0===g?this._nameToUniform4[a]=new Float32Array(f):g.set(f)};b.prototype.setUniformMatrix3fv=function(a,f,g){void 0===g&&(g=!1);var d=this._nameToUniformMatrix3[a];
if(void 0===d||(9===d.length?!b._matrix3Equal(d,f):!b._arraysEqual(f,d)))this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(a),g,f),void 0===d?this._nameToUniformMatrix3[a]=new Float32Array(f):d.set(f)};b.prototype.setUniformMatrix4fv=function(a,f,g){void 0===g&&(g=!1);var d=this._nameToUniformMatrix4[a];if(void 0===d||(16===d.length?!b._matrix4Equal(d,f):!b._arraysEqual(f,d)))this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(a),
g,f),void 0===d?this._nameToUniformMatrix4[a]=new Float32Array(f):d.set(f)};b._padToThree=function(b){var a=b.toString();1E3>b&&(a=("  "+b).slice(-3));return a};b.prototype._addLineNumbers=function(a){var f=2;return a.replace(/\n/g,function(){return"\n"+b._padToThree(f++)+":"})};b.prototype._loadShader=function(b){var a=35633===b?this._vertexShaderSource:this._fragmentShaderSource;if(void 0!==this._defines){var c="";if(Array.isArray(this._defines))for(var d=0,k=this._defines;d<k.length;d++)var m=
k[d],c=c+("#define "+m+"\n");else for(m in this._defines)c+="#define "+m+"\n";a=c+a}c=this._context.gl;b=c.createShader(b);c.shaderSource(b,a);c.compileShader(b);c.getShaderParameter(b,c.COMPILE_STATUS)||(console.error(c.getShaderInfoLog(b)),console.error(this._addLineNumbers(a)));return b};b._matrix4Equal=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&
b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};b._matrix3Equal=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&b[8]===a[8]};b._arraysEqual=function(b,a){if(b.length!==a.length)return!1;for(var c=0;c<b.length;++c)if(b[c]!==a[c])return!1;return!0};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require","exports"],function(a,d){return function(){function b(a,e,f,g,d){this._locations=
this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=a;this._layout=f;this._buffers=g;this._locations=e;d&&(this._indexBuffer=d);this._id=b._nextId++}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"vertexBuffers",{get:function(){return this._buffers},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});b.prototype.dispose=function(b){void 0===b&&(b=!0);var a=this._context.extensions.vao;a&&this._glName&&(a.deleteVertexArrayOES(this._glName),
this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(b){for(var f in this._buffers)this._buffers[f].dispose(),delete this._buffers[f];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}};b.prototype.initialize=function(){if(!this._initialized){var b=this._context.extensions.vao;if(b){var a=b.createVertexArrayOES();b.bindVertexArrayOES(a);this._bindLayout();b.bindVertexArrayOES(null);this._glName=a}this._initialized=!0}};b.prototype.bind=function(){this.initialize();
var b=this._context.extensions.vao;b?b.bindVertexArrayOES(this.glName):(this._context.bindVAO(null),this._bindLayout())};b.prototype._bindLayout=function(){var b=this._buffers,a=this._context.extensions.vao,f=this._layout,g=this._indexBuffer;b||console.error("Vertex buffer dictionary is empty!");var d=this._context.gl,k,m,l=0,n;for(n in b){(k=b[n])||console.error("Vertex buffer is uninitialized!");(m=f[n])||console.error("Vertex element descriptor is empty!");this._context.bindBuffer(k);for(l=0;l<
m.length;++l){k=m[l];var p=this._locations[k.name];void 0===p&&console.error("There is no location for vertex attribute '"+k.name+" defined.");if(4>=k.count){if(d.enableVertexAttribArray(p),d.vertexAttribPointer(p,k.count,k.type,k.normalized,k.stride,k.offset),k.divisor&&0<k.divisor){var r=this._context.extensions.angleInstancedArrays;r&&r.vertexAttribDivisorANGLE(p,k.divisor)}}else if(16===k.count&&5126===k.type)for(var s=0;4>s;s++)d.enableVertexAttribArray(p+s),d.vertexAttribPointer(p+s,4,k.type,
k.normalized,k.stride,k.offset+16*s),k.divisor&&0<k.divisor&&(r=this._context.extensions.angleInstancedArrays)&&r.vertexAttribDivisorANGLE(p+s,k.divisor);else console.error("Unsupported vertex attribute element count: "+k.count)}}g&&(a?d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,g.glName):this._context.bindBuffer(g))};b.prototype.unbind=function(){this.initialize();var b=this._context.extensions.vao;b?b.bindVertexArrayOES(null):this._unbindLayout()};b.prototype._unbindLayout=function(){var b=this._buffers,
a=this._layout,f=this._locations,g=this._context;b||console.error("Vertex buffer dictionary is empty!");var d=g.gl,k,m,l,n=0,p=0,r;for(r in b){(k=b[r])||console.error("Vertex buffer is uninitialized!");m=a[r];n=0;for(p=m.length;n<p;++n)l=m[n],d.disableVertexAttribArray(f[l.name]);g.unbindBuffer(k.bufferType)}(b=this._indexBuffer)&&g.unbindBuffer(b.bufferType)};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports"],function(a,d){return function(){function b(a,
e,f,g){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=a;this._bufferType=e;this._usage=f;this._id=b._nextId++;this._glName=this._context.gl.createBuffer();g&&this.setData(g)}b.createIndex=function(a,e,f){return new b(a,34963,e,f)};b.createVertex=function(a,e,f){return new b(a,34962,e,f)};Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"indexType",{get:function(){return this._indexType},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null)};b.prototype.setData=function(b){if(b){if("number"===typeof b)0>b&&console.error("Buffer size cannot be negative!"),this._size=b;else{var a=b.byteLength;b instanceof Uint16Array&&
(a/=2,this._indexType=5123);b instanceof Uint32Array&&(a/=4,this._indexType=5125);this._size=a}a=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,b,this._usage);this._context.bindVAO(a)}};b.prototype.setSubData=function(b,a,f,g){void 0===a&&(a=0);void 0===f&&(f=0);if(b){(0>a||a>=this._size)&&console.error("offset is out of range!");var d=a,k=f,m=g,l=b.byteLength;b instanceof Uint16Array&&(l/=2,d*=2,k*=2,m*=2);b instanceof
Uint32Array&&(l/=4,d*=4,k*=4,m*=2);void 0===g&&(g=l-1);f>=g&&console.error("end must be bigger than start!");a+f-g>this._size&&console.error("An attempt to write beyond the end of the buffer!");a=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferSubData(this._bufferType,d,(b instanceof ArrayBuffer?b:b.buffer).slice(k,m));this._context.bindVAO(a)}};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/LineRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec2 dojo/text!./shaders/lineShader.vs.glsl dojo/text!./shaders/lineShader.fs.glsl dojo/text!./shaders/patternLineShader.vs.glsl dojo/text!./shaders/patternLineShader.fs.glsl dojo/text!./shaders/lineJoinShader.vs.glsl dojo/text!./shaders/lineJoinShader.fs.glsl ../../webgl/Program ../../webgl/VertexArrayObject ../GeometryUtils".split(" "),
function(a,d,b,c,e,f,g,h,k,m,l,n,p,r,s){return function(){function a(){this._joinAttributeLocations={a_pos:0,a_vertexOffset:1};this._triangleAttributeLocations={a_pos:0,a_offset:1,a_accumulatedDistance:2};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=e.create();this._screenSize=f.create();this._color=c.create();this._dashArray=f.create()}a.prototype.render=function(a,c,e,f,g,d,h,k,l,m){if(0!==c.triangleElementCount){this._initialized||this._initialize(a);var n=g.tileTransform.transform,
p=g.coordRange/512,r=d.getPaintValue("line-translate",e);if(0!==r[0]||0!==r[1]){b.copy(this._viewProjMat,g.tileTransform.transform);var n=r[0],r=r[1],q=0,L=0,L=(1<<g.key.level)/Math.pow(2,e)*p,q=f.rotation;if(1===d.getPaintValue("line-translate-anchor",e))var K=Math.sin(s.C_DEG_TO_RAD*-q),G=Math.cos(s.C_DEG_TO_RAD*-q),q=L*(n*G-r*K),L=L*(n*K+r*G);else q=L*n,L*=r;this._offsetVector[0]=q;this._offsetVector[1]=L;this._offsetVector[2]=0;b.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);
n=this._viewProjMat}K=d.getPaintValue("line-pattern",e);G=void 0!==K;q=1/l;r=d.getPaintValue("line-blur",e)+q;L=d.getPaintValue("line-width",e);q=0.5*(L+q);m*=d.getPaintValue("line-opacity",e);var D=d.getPaintValue("line-color",e),C=D[3]*m;this._color[0]=C*D[0];this._color[1]=C*D[1];this._color[2]=C*D[2];this._color[3]=C;if(1<q&&0<c.joinCount&&!G&&(this._screenSize[0]=0.5*f.width,this._screenSize[1]=0.5*f.height,f=Math.ceil(2*q),D=q-0.25,C=this._getJoinsVAO(a,g)))a.bindVAO(C),a.bindProgram(this._joinProgram),
C=1/(0<l?l:1),this._joinProgram.setUniformMatrix4fv("u_transformMatrix",n),this._joinProgram.setUniform2fv("u_normalized_origin",g.tileTransform.displayCoord),this._joinProgram.setUniform1f("u_depth",d.z),this._joinProgram.setUniform2fv("u_screen",this._screenSize),this._joinProgram.setUniform1f("u_size",f),this._joinProgram.setUniform4fv("u_color",this._color),this._joinProgram.setUniform1f("u_lineHalfWidth",D),this._joinProgram.setUniform1f("u_pixelRatio",l),this._joinProgram.setUniform1f("u_oneOverPixelRatio",
C),a.drawArrays(0,c.joinStart,c.joinCount),a.bindVAO();if(l=this._getTrianglesVAO(a,g)){a.bindVAO(l);if(G){if(e=h.getMosaicItemPosition(K,!0))h.bind(a,9729,0),a.bindProgram(this._patternLineProgram),this._patternLineProgram.setUniformMatrix4fv("u_transformMatrix",n),this._patternLineProgram.setUniformMatrix4fv("u_extrudeMatrix",k),this._patternLineProgram.setUniform2fv("u_normalized_origin",g.tileTransform.displayCoord),this._patternLineProgram.setUniform1f("u_depth",d.z),this._patternLineProgram.setUniform1f("u_lineHalfWidth",
q),this._patternLineProgram.setUniform1f("u_blur",r),this._patternLineProgram.setUniform1f("u_opacity",m),this._patternLineProgram.setUniform2f("u_pattern_tl",e.tl[0],e.tl[1]),this._patternLineProgram.setUniform2f("u_pattern_br",e.br[0],e.br[1]),this._patternLineProgram.setUniform2f("u_spriteSize",p*e.size[0],e.size[1]),this._patternLineProgram.setUniform1i("u_texture",0)}else h=d.getPaintValue("line-dasharray",e),2>h.length&&(h=[1,-1]),p*=L,this._dashArray[0]=p*h[0],this._dashArray[1]=p*h[1],a.bindProgram(this._triangleslProgram),
this._triangleslProgram.setUniformMatrix4fv("u_transformMatrix",n),this._triangleslProgram.setUniformMatrix4fv("u_extrudeMatrix",k),this._triangleslProgram.setUniform2fv("u_normalized_origin",g.tileTransform.displayCoord),this._triangleslProgram.setUniform1f("u_depth",d.z),this._triangleslProgram.setUniform4fv("u_color",this._color),this._triangleslProgram.setUniform1f("u_lineHalfWidth",q),this._triangleslProgram.setUniform2fv("u_dasharray",this._dashArray),this._triangleslProgram.setUniform1f("u_blur",
r);a.drawElements(4,c.triangleElementCount,5125,12*c.triangleElementStart);a.bindVAO()}}};a.prototype._initialize=function(b){if(this._initialized)return!0;var a=new p(b,g,h,this._triangleAttributeLocations),c=new p(b,k,m,this._triangleAttributeLocations);b=new p(b,l,n,this._joinAttributeLocations);this._triangleslProgram=a;this._patternLineProgram=c;this._trianglesVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5122,
offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5122,offset:8,stride:12,normalized:!1,divisor:0}]};this._joinProgram=b;this._joinVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]};return this._initialized=!0};a.prototype._getTrianglesVAO=function(b,a){if(a.lineTrianglesVertexArrayObject)return a.lineTrianglesVertexArrayObject;var c=a.lineVertexBuffer,e=a.lineTrianglesIndexBuffer;if(!c||!e)return null;a.lineTrianglesVertexArrayObject=
new r(b,this._triangleAttributeLocations,this._trianglesVertexAttributes,{geometry:c},e);return a.lineTrianglesVertexArrayObject};a.prototype._getJoinsVAO=function(b,a){if(a.lineJoinsVertexArrayObject)return a.lineJoinsVertexArrayObject;var c=a.lineJoinVertexBuffer;if(!c)return null;a.lineJoinsVertexArrayObject=new r(b,this._joinAttributeLocations,this._joinVertexAttributes,{geometry:c});return a.lineJoinsVertexArrayObject};return a}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],
function(a){var d={create:function(){var b=new a.ARRAY_TYPE(2);b[0]=0;b[1]=0;return b},clone:function(b){var c=new a.ARRAY_TYPE(2);c[0]=b[0];c[1]=b[1];return c},fromValues:function(b,c){var e=new a.ARRAY_TYPE(2);e[0]=b;e[1]=c;return e},copy:function(b,a){b[0]=a[0];b[1]=a[1];return b},set:function(b,a,e){b[0]=a;b[1]=e;return b},add:function(b,a,e){b[0]=a[0]+e[0];b[1]=a[1]+e[1];return b},subtract:function(b,a,e){b[0]=a[0]-e[0];b[1]=a[1]-e[1];return b}};d.sub=d.subtract;d.multiply=function(b,a,e){b[0]=
a[0]*e[0];b[1]=a[1]*e[1];return b};d.mul=d.multiply;d.divide=function(b,a,e){b[0]=a[0]/e[0];b[1]=a[1]/e[1];return b};d.div=d.divide;d.ceil=function(b,a){b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);return b};d.floor=function(b,a){b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);return b};d.min=function(b,a,e){b[0]=Math.min(a[0],e[0]);b[1]=Math.min(a[1],e[1]);return b};d.max=function(b,a,e){b[0]=Math.max(a[0],e[0]);b[1]=Math.max(a[1],e[1]);return b};d.round=function(b,a){b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);
return b};d.scale=function(b,a,e){b[0]=a[0]*e;b[1]=a[1]*e;return b};d.scaleAndAdd=function(b,a,e,f){b[0]=a[0]+e[0]*f;b[1]=a[1]+e[1]*f;return b};d.distance=function(b,a){var e=a[0]-b[0],f=a[1]-b[1];return Math.sqrt(e*e+f*f)};d.dist=d.distance;d.squaredDistance=function(b,a){var e=a[0]-b[0],f=a[1]-b[1];return e*e+f*f};d.sqrDist=d.squaredDistance;d.length=function(b){var a=b[0];b=b[1];return Math.sqrt(a*a+b*b)};d.len=d.length;d.squaredLength=function(b){var a=b[0];b=b[1];return a*a+b*b};d.sqrLen=d.squaredLength;
d.negate=function(b,a){b[0]=-a[0];b[1]=-a[1];return b};d.inverse=function(b,a){b[0]=1/a[0];b[1]=1/a[1];return b};d.normalize=function(b,a){var e=a[0],f=a[1],e=e*e+f*f;0<e&&(e=1/Math.sqrt(e),b[0]=a[0]*e,b[1]=a[1]*e);return b};d.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]};d.cross=function(b,a,e){a=a[0]*e[1]-a[1]*e[0];b[0]=b[1]=0;b[2]=a;return b};d.lerp=function(b,a,e,f){var g=a[0];a=a[1];b[0]=g+f*(e[0]-g);b[1]=a+f*(e[1]-a);return b};d.random=function(b,c){c=c||1;var e=2*a.RANDOM()*Math.PI;b[0]=Math.cos(e)*
c;b[1]=Math.sin(e)*c;return b};d.transformMat2=function(b,a,e){var f=a[0];a=a[1];b[0]=e[0]*f+e[2]*a;b[1]=e[1]*f+e[3]*a;return b};d.transformMat2d=function(a,c,e){var f=c[0];c=c[1];a[0]=e[0]*f+e[2]*c+e[4];a[1]=e[1]*f+e[3]*c+e[5];return a};d.transformMat3=function(a,c,e){var f=c[0];c=c[1];a[0]=e[0]*f+e[3]*c+e[6];a[1]=e[1]*f+e[4]*c+e[7];return a};d.transformMat4=function(a,c,e){var f=c[0];c=c[1];a[0]=e[0]*f+e[4]*c+e[12];a[1]=e[1]*f+e[5]*c+e[13];return a};d.forEach=function(){var a=d.create();return function(c,
e,f,g,d,k){e||(e=2);f||(f=0);for(g=g?Math.min(g*e+f,c.length):c.length;f<g;f+=e)a[0]=c[f],a[1]=c[f+1],d(a,a,k),c[f]=a[0],c[f+1]=a[1];return c}}();d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};d.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]};d.equals=function(b,c){var e=b[0],f=b[1],g=c[0],d=c[1];return Math.abs(e-g)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(f-d)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(d))};return d})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FillRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../../../core/libs/gl-matrix/vec3 dojo/text!./shaders/solidFillShader.vs.glsl dojo/text!./shaders/solidFillShader.fs.glsl dojo/text!./shaders/patternFillShader.vs.glsl dojo/text!./shaders/patternFillShader.fs.glsl dojo/text!./shaders/fillOutlineShader.vs.glsl dojo/text!./shaders/fillOutlineShader.fs.glsl ../../webgl/Program ../../webgl/VertexArrayObject ../GeometryUtils".split(" "),
function(a,d,b,c,e,f,g,h,k,m,l,n,p,r,s){var q=1/65536;return function(){function a(){this._outlineAttributeLocations={a_pos:0,a_offset:1,a_xnormal:2};this._fillAttributeLocations={a_pos:0};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=f.create();this._patternMatrix=c.create();this._color=e.create();this._outlineColor=e.create()}a.prototype.render=function(a,e,f,g,d,h,k,l,m,n,p){this._initialized||this._initialize(a);var r=k.getPaintValue("fill-pattern",f),t=void 0!==r;if(!(t&&
0===d)){var L=k.getPaintValue("fill-antialias",f)&&!t;p*=k.getPaintValue("fill-opacity",f);var K=k.getPaintValue("fill-color",f),G=!1;if(!t){var D=K[3]*p;1===D&&0===d&&(G=!0);1>D&&1===d&&(G=!0)}if(G||0!==d){var C=h.tileTransform.transform,D=h.coordRange/512,M=k.getPaintValue("fill-translate",f);if(0!==M[0]||0!==M[1]){b.copy(this._viewProjMat,h.tileTransform.transform);var C=M[0],M=M[1],P=0,N=0,D=(1<<h.key.level)/Math.pow(2,f)*D;1===k.getPaintValue("fill-translate-anchor",f)?(N=Math.sin(s.C_DEG_TO_RAD*
-g),g=Math.cos(s.C_DEG_TO_RAD*-g),P=D*(C*g-M*N),N=D*(C*N+M*g)):(P=D*C,N=D*M);this._offsetVector[0]=P;this._offsetVector[1]=N;this._offsetVector[2]=0;b.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);C=this._viewProjMat}if(g=this._getTrianglesVAO(a,h)){if(t){if(1===d&&(r=l.getMosaicItemPosition(r,!0)))D=h.coordRange/512/Math.pow(2,Math.round(f)-h.key.level)/n,c.identity(this._patternMatrix),t=1/(r.size[1]*D),this._patternMatrix[0]=1/(r.size[0]*D),this._patternMatrix[4]=t,a.bindVAO(g),
l.bind(a,9729,0),a.bindProgram(this._patternFillProgram),this._patternFillProgram.setUniformMatrix4fv("u_transformMatrix",C),this._patternFillProgram.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord),this._patternFillProgram.setUniform1f("u_depth",k.z),this._patternFillProgram.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),this._patternFillProgram.setUniform1f("u_opacity",p),this._patternFillProgram.setUniform2f("u_pattern_tl",r.tl[0],r.tl[1]),this._patternFillProgram.setUniform2f("u_pattern_br",
r.br[0],r.br[1]),this._patternFillProgram.setUniform1i("u_texture",0),a.drawElements(4,e.triangleElementCount,5125,12*e.triangleElementStart),a.bindVAO()}else G&&(D=K[3]*p,this._color[0]=D*K[0],this._color[1]=D*K[1],this._color[2]=D*K[2],this._color[3]=D,a.bindVAO(g),a.bindProgram(this._solidFillProgram),this._solidFillProgram.setUniformMatrix4fv("u_transformMatrix",C),this._solidFillProgram.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord),this._solidFillProgram.setUniform1f("u_depth",
k.z+q),this._solidFillProgram.setUniform4fv("u_color",this._color),a.drawElements(4,e.triangleElementCount,5125,12*e.triangleElementStart),a.bindVAO());if(L&&0<e.outlineElementCount&&1===d){f=k.getPaintValue("fill-outline-color",f);if(0===f[3]){if(1!==this._color[3])return;f=K}n=0.75/n;p*=f[3];this._outlineColor[0]=p*f[0];this._outlineColor[1]=p*f[1];this._outlineColor[2]=p*f[2];this._outlineColor[3]=p;if(p=this._getOutlineVAO(a,h))a.bindVAO(p),a.bindProgram(this._outlineProgram),this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",
C),this._outlineProgram.setUniformMatrix4fv("u_extrudeMatrix",m),this._outlineProgram.setUniform2fv("u_normalized_origin",h.tileTransform.displayCoord),this._outlineProgram.setUniform1f("u_depth",k.z),this._outlineProgram.setUniform1f("u_outline_width",n),this._outlineProgram.setUniform4fv("u_color",this._outlineColor),a.drawElements(4,e.outlineElementCount,5125,12*e.outlineElementStart),a.bindVAO()}}}}};a.prototype._initialize=function(a){if(this._initialized)return!0;var b=new p(a,g,h,{a_pos:0});
if(!b)return!1;var c=new p(a,k,m,this._fillAttributeLocations);if(!c)return!1;a=new p(a,l,n,this._outlineAttributeLocations);this._solidFillProgram=b;this._patternFillProgram=c;this._trianglesVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]};this._outlineProgram=a;this._outlineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,
divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:8,normalized:!1,divisor:0}]};return this._initialized=!0};a.prototype._getTrianglesVAO=function(a,b){if(b.polygonTrianglesVertexArrayObject)return b.polygonTrianglesVertexArrayObject;var c=b.polygonTrianglesVertexBuffer,e=b.polygonTrianglesIndexBuffer;if(!c||!e)return null;b.polygonTrianglesVertexArrayObject=new r(a,this._fillAttributeLocations,this._trianglesVertexAttributes,{geometry:c},e);return b.polygonTrianglesVertexArrayObject};
a.prototype._getOutlineVAO=function(a,b){if(b.polygonOutlineVertexArrayObject)return b.polygonOutlineVertexArrayObject;var c=b.polygonOutlinesVertexBuffer,e=b.polygonOutlinesIndexBuffer;if(!c||!e)return null;b.polygonOutlineVertexArrayObject=new r(a,this._outlineAttributeLocations,this._outlineVertexAttributes,{geometry:c},e);return b.polygonOutlineVertexArrayObject};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SymbolRenderer":function(){define(["require","exports","./IconRenderer",
"./SDFRenderer"],function(a,d,b,c){return function(){function a(){this._iconRenderer=new b;this._sdfRenderer=new c}a.prototype.render=function(a,b,c,e,d,l,n,p,r,s,q,t,u){b.hasData()&&(0<b.marketElementCount&&!b.isSDF&&this._iconRenderer.render(a,b,c,e,d,l,n,p,s,q,u),0<b.textElementCount&&this._sdfRenderer.render(a,b,c,e,d,l,n,r,s,q,t,u))};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/IconRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 dojo/text!./shaders/iconShader.vs.glsl dojo/text!./shaders/iconShader.fs.glsl ../../webgl/Program ../../webgl/VertexArrayObject ../GeometryUtils".split(" "),
function(a,d,b,c,e,f,g,h,k){return function(){function a(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._spritesTextureSize=new Float32Array(2);this._initialized=!1;this._extrudeMat=b.create();this._scaleVec=c.create()}a.prototype.render=function(a,c,e,f,g,d,h,m,v,x,w){this._initialized||this._initialize(a);w*=h.getPaintValue("icon-opacity",e);var z=h.getLayoutValue("icon-rotation-alignment",e);1===z&&1===h.getLayoutValue("symbol-placement",e)&&!h.hasLayoutProperty("icon-rotation-alignment")&&
(z=0);var A=0===z,z=h.getLayoutValue("icon-keep-upright",e)&&A,y=h.getLayoutValue("icon-size",e);f=k.degToByte(f);this._spritesTextureSize[0]=m.width/4;this._spritesTextureSize[1]=m.height/4;A?b.copy(this._extrudeMat,v):b.copy(this._extrudeMat,x);1!==y&&(this._scaleVec[0]=y,this._scaleVec[1]=y,this._scaleVec[2]=1,b.scale(this._extrudeMat,this._extrudeMat,this._scaleVec));m.bind(a,9729,0);a.bindProgram(this._iconProgram);if(m=this._getIconVAO(a,d))a.bindVAO(m),this._iconProgram.setUniformMatrix4fv("u_transformMatrix",
d.tileTransform.transform),this._iconProgram.setUniformMatrix4fv("u_extrudeMatrix",this._extrudeMat),this._iconProgram.setUniform2fv("u_normalized_origin",d.tileTransform.displayCoord),this._iconProgram.setUniform1f("u_depth",h.z),this._iconProgram.setUniform2fv("u_mosaicSize",this._spritesTextureSize),this._iconProgram.setUniform1f("u_mapRotation",f),this._iconProgram.setUniform1f("u_keepUpright",z?1:0),this._iconProgram.setUniform1f("u_level",10*e),this._iconProgram.setUniform1f("u_fadeSpeed",10*
g.fadeSpeed),this._iconProgram.setUniform1f("u_minfadeLevel",10*g.minfadeLevel),this._iconProgram.setUniform1f("u_maxfadeLevel",10*g.maxfadeLevel),this._iconProgram.setUniform1f("u_fadeChange",10*(e+g.fadeChange)),this._iconProgram.setUniform1f("u_opacity",w),this._iconProgram.setUniform1i("u_texture",0),a.drawElements(4,c.marketElementCount,5125,12*c.markerElementStart),a.bindVAO()};a.prototype._initialize=function(a){if(this._initialized)return!0;this._iconProgram=new g(a,e,f,this._attributeLocations);
this._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};return this._initialized=!0};a.prototype._getIconVAO=function(a,b){if(b.iconVertexArrayObject)return b.iconVertexArrayObject;var c=b.iconVertexBuffer,
e=b.iconIndexBuffer;if(!c||!e)return null;b.iconVertexArrayObject=new h(a,this._attributeLocations,this._iconVertexAttributes,{geometry:c},e);return b.iconVertexArrayObject};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SDFRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec4 ../../../core/libs/gl-matrix/vec3 dojo/text!./shaders/sdfShader.vs.glsl dojo/text!./shaders/sdfShader.fs.glsl ../../webgl/Program ../../webgl/VertexArrayObject ../GeometryUtils".split(" "),
function(a,d,b,c,e,f,g,h,k,m){return function(){function a(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._initialized=!1;this._extrudeMat=b.create();this._haloColor=c.create();this._sdfColor=c.create();this._scaleVec=e.create()}a.prototype.render=function(a,c,e,f,g,d,h,k,l,w,z,A){this._initialized||this._initialize(a);var y=h.getLayoutValue("text-size",e),B=y/24;f=m.degToByte(f);var E=h.getLayoutValue("text-rotation-alignment",e);1===E&&1===h.getLayoutValue("symbol-placement",
e)&&!h.hasLayoutProperty("text-rotation-alignment")&&(E=0);var H=0===E,E=h.getLayoutValue("text-keep-upright",e)&&H;z=0.1*24/y/z;A*=h.getPaintValue("text-opacity",e);this._glyphTextureSize||(this._glyphTextureSize=new Float32Array([k.width/4,k.height/4]));H?b.copy(this._extrudeMat,l):b.copy(this._extrudeMat,w);this._scaleVec[0]=B;this._scaleVec[1]=B;this._scaleVec[2]=1;b.scale(this._extrudeMat,this._extrudeMat,this._scaleVec);k.bind(a,9729,0);a.bindProgram(this._sdfProgram);if(k=this._getSDFVAO(a,
d))a.bindVAO(k),this._sdfProgram.setUniformMatrix4fv("u_transformMatrix",d.tileTransform.transform),this._sdfProgram.setUniformMatrix4fv("u_extrudeMatrix",this._extrudeMat),this._sdfProgram.setUniform2fv("u_normalized_origin",d.tileTransform.displayCoord),this._sdfProgram.setUniform1f("u_depth",h.z),this._sdfProgram.setUniform2fv("u_mosaicSize",this._glyphTextureSize),this._sdfProgram.setUniform1f("u_mapRotation",f),this._sdfProgram.setUniform1f("u_keepUpright",E?1:0),this._sdfProgram.setUniform1f("u_level",
10*e),this._sdfProgram.setUniform1f("u_fadeSpeed",10*g.fadeSpeed),this._sdfProgram.setUniform1f("u_minfadeLevel",10*g.minfadeLevel),this._sdfProgram.setUniform1f("u_maxfadeLevel",10*g.maxfadeLevel),this._sdfProgram.setUniform1f("u_fadeChange",10*(e+g.fadeChange)),this._sdfProgram.setUniform1f("u_opacity",A),this._sdfProgram.setUniform1i("u_texture",0),g=h.getPaintValue("text-halo-color",e),0<g[3]&&(d=g[3]*A,this._haloColor[0]=d*g[0],this._haloColor[1]=d*g[1],this._haloColor[2]=d*g[2],this._haloColor[3]=
d,g=z+h.getPaintValue("text-halo-blur",e)/B/8,B=0.75-h.getPaintValue("text-halo-width",e)/B/8,this._sdfProgram.setUniform4fv("u_color",this._haloColor),this._sdfProgram.setUniform1f("u_edgeDistance",B),this._sdfProgram.setUniform1f("u_edgeWidth",g),a.drawElements(4,c.textElementCount,5125,12*c.textElementStart)),e=h.getPaintValue("text-color",e),0<e[3]&&(h=e[3]*A,this._sdfColor[0]=h*e[0],this._sdfColor[1]=h*e[1],this._sdfColor[2]=h*e[2],this._sdfColor[3]=h,this._sdfProgram.setUniform4fv("u_color",
this._sdfColor),this._sdfProgram.setUniform1f("u_edgeDistance",0.75),this._sdfProgram.setUniform1f("u_edgeWidth",z),a.drawElements(4,c.textElementCount,5125,12*c.textElementStart),a.bindVAO())};a.prototype._initialize=function(a){if(this._initialized)return!0;this._sdfProgram=new h(a,f,g,this._attributeLocations);this._sdfVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,
divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};return this._initialized=!0};a.prototype._getSDFVAO=function(a,b){if(b.textVertexArrayObject)return b.textVertexArrayObject;var c=b.textVertexBuffer,e=b.textIndexBuffer;if(!c||!e)return null;b.textVertexArrayObject=new k(a,this._attributeLocations,this._sdfVertexAttributes,{geometry:c},e);return b.textVertexArrayObject};return a}()})},
"esri/layers/vectorTiles/views/vectorTiles/renderers/TileInfoRenderer":function(){define("require exports dojo/text!./shaders/background.vs.glsl dojo/text!./shaders/background.fs.glsl dojo/text!./shaders/tileInfo.vs.glsl dojo/text!./shaders/tileInfo.fs.glsl ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject ../../webgl/Texture ../GeometryUtils".split(" "),function(a,d,b,c,e,f,g,h,k,m,l){return function(){function a(){this._initialized=!1;this._maxWidth=0;this._color=new Float32Array([1,
0,0,1])}a.prototype.render=function(a,b){this._initialized||this._initialize(a);a.bindVAO(this._outlineVertexArrayObject);a.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",b.coordRange);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);
a.setLineWidth(2);a.drawArrays(3,0,4);a.bindVAO();var c=this._getTexture(a,b);c&&(a.bindVAO(this._tileInfoVertexArrayObject),a.bindProgram(this._tileInfoProgram),a.bindTexture(c,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",b.coordRange/512),this._tileInfoProgram.setUniform2f("u_delta",
8,8),this._tileInfoProgram.setUniform2f("u_dimensions",c.descriptor.width,c.descriptor.height),a.drawArrays(5,0,4),a.bindVAO())};a.prototype._initialize=function(a){if(this._initialized)return!0;var d={a_pos:0},l=new g(a,b,c,d),m=new g(a,e,f,d),n={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},u=new Int8Array([0,0,1,0,1,1,0,1]),u=k.createVertex(a,35044,u),u=new h(a,d,n,{geometry:u}),v=new Int8Array([0,0,1,0,0,1,1,1]),v=k.createVertex(a,35044,v);a=new h(a,d,
n,{geometry:v});this._outlineProgram=l;this._tileInfoProgram=m;this._vertexAttributes=n;this._outlineVertexArrayObject=u;this._tileInfoVertexArrayObject=a;return this._initialized=!0};a.prototype._getTexture=function(a,b){if(b.texture)return b.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var c=b.key.id,
e=this._canvas.getContext("2d");e.font="24px sans-serif";e.textAlign="left";e.textBaseline="middle";var f=e.measureText(c),f=Math.pow(2,Math.ceil(l.log2(f.width+2)));f>this._maxWidth&&(this._maxWidth=f);e.clearRect(0,0,this._maxWidth,32);e.fillStyle=b.key.level>b.refKey.level?"red":"blue";e.fillText(c,0,16);b.texture=new m(a,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return b.texture};return a}()})},"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require",
"exports"],function(a,d){return function(){function a(c,e,f){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._context=c;this._desc={pixelFormat:e.pixelFormat,dataType:e.dataType,target:e.target?e.target:3553,samplingMode:e.samplingMode?e.samplingMode:9729,wrapMode:e.wrapMode?e.wrapMode:10497,maxAnisotropy:e.maxAnisotropy,flipped:void 0!==e.flipped?e.flipped:!1,hasMipmap:void 0!==e.hasMipmap?e.hasMipmap:!1,level:void 0!==e.level?e.level:
0,unpackAlignment:e.unpackAlignment?e.unpackAlignment:4,width:e.width,height:e.height};this._id=++a._nextId;this.setData(f)}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._context&&this._glName&&
(this._context.gl.deleteTexture(this._glName),this._glName=null)};a.prototype.resize=function(a,b){var f=this._desc;f.width===a&&f.height===b||(f.width=a,f.height=b,this.setData(null))};a.prototype.setData=function(c){var e=this._context.gl;this._glName||(this._glName=e.createTexture());void 0===c&&(c=null);null===c&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var f=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var g=this._desc;a._validateTexture(g);
e.pixelStorei(e.UNPACK_ALIGNMENT,g.unpackAlignment);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,g.flipped?1:0);c instanceof ImageData||c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement?(e.texImage2D(e.TEXTURE_2D,g.level,g.pixelFormat,g.pixelFormat,g.dataType,c),void 0===this._desc.width&&(this._desc.width=c.width),void 0===this._desc.height&&(this._desc.height=c.height)):((null==g.width||null==g.height)&&console.error("Width and height must be specified!"),e.texImage2D(e.TEXTURE_2D,
g.level,g.pixelFormat,g.width,g.height,0,g.pixelFormat,g.dataType,c));g.hasMipmap&&this.generateMipmap();a._applySamplingMode(e,this._desc);a._applyWrapMode(e,this._desc);a._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(f,0)};a.prototype.updateData=function(a,b,f,g,d,k){k||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var m=this._context.gl,l=this._desc,n=this._context.getBoundTexture(0);
this._context.bindTexture(this,0);(0>b||0>f||g>l.width||d>l.height||b+g>l.width||f+d>l.height)&&console.error("An attempt to update out of bounds of the texture!");k instanceof ImageData||k instanceof HTMLImageElement||k instanceof HTMLCanvasElement||k instanceof HTMLVideoElement?m.texSubImage2D(m.TEXTURE_2D,a,b,f,l.pixelFormat,l.dataType,k):m.texSubImage2D(m.TEXTURE_2D,a,b,f,g,d,l.pixelFormat,l.dataType,k);this._context.bindTexture(n,0)};a.prototype.generateMipmap=function(){var c=this._desc;c.hasMipmap||
(c.hasMipmap=!0,a._validateTexture(c));9729===c.samplingMode?(this._samplingModeDirty=!0,c.samplingMode=9985):9728===c.samplingMode&&(this._samplingModeDirty=!0,c.samplingMode=9984);c=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var e=this._context.gl;e.generateMipmap(e.TEXTURE_2D);this._context.bindTexture(c,0)};a.prototype.setSamplingMode=function(c){c!==this._desc.samplingMode&&(this._desc.samplingMode=c,a._validateTexture(this._desc),this._samplingModeDirty=!0)};a.prototype.setWrapMode=
function(c){c!==this._desc.wrapMode&&(this._desc.wrapMode=c,a._validateTexture(this._desc),this._wrapModeDirty=!0)};a.prototype.applyChanges=function(){var c=this._context.gl,e=this._desc;this._samplingModeDirty&&(a._applySamplingMode(c,e),this._samplingModeDirty=!1);this._wrapModeDirty&&(a._applyWrapMode(c,e),this._wrapModeDirty=!1)};a._isPowerOfTwo=function(a){return 0===(a&a-1)};a._validateTexture=function(c){(0>c.width||0>c.height)&&console.error("Negative dimension parameters are not allowed!");
if(!a._isPowerOfTwo(c.width)||!a._isPowerOfTwo(c.height))33071!==c.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),c.hasMipmap&&console.error("Mipmapping requires power-of-two textures!")};a._applySamplingMode=function(a,b){var f=b.samplingMode;if(9985===f||9987===f)f=9729;else if(9984===f||9986===f)f=9728;a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,f);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,b.samplingMode)};a._applyWrapMode=function(a,
b){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,b.wrapMode);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,b.wrapMode)};a._applyAnisotropicFilteringParameters=function(a,b){if(null!=b.maxAnisotropy){var f=a.extensions.textureFilterAnisotropic;if(f){var g=a.gl;g.texParameterf(g.TEXTURE_2D,f.TEXTURE_MAX_ANISOTROPY_EXT,b.maxAnisotropy)}}};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FadeRecorder":function(){define(["require","exports","../../../core/now"],function(a,
d,b){(function(){return function(a,b){this.level=a;this.now=b}})();a=function(){return function(a,b,f,g){this.fadeSpeed=a;this.minfadeLevel=b;this.maxfadeLevel=f;this.fadeChange=g}}();d.FadeProperties=a;a=function(){function a(b){void 0===b&&(b=300);this._levelSnapshots=[];this._duration=b}a.prototype.recordLevel=function(a){var c=b(),g=this._levelSnapshots;0===g.length&&(g.push({level:a,now:0}),g.push({level:a,now:0}));(2===g.length||g[0].level!==a)&&g.push({level:a,now:c})};a.prototype.needsRedraw=
function(){if(0===this._levelSnapshots.length)return!1;for(var a=this._duration,b=this._levelSnapshots,c=b.length,d=b[c-1],k=-1;c>k+1&&b[k+1].now+a<d.now;)k++;for(0>k&&(k=0);k<c;k++)if(b[k].level!==d.level)return!0;return!1};a.prototype.getFadeValues=function(a){void 0===a&&(a=!1);for(var c=this._duration,g=b(),d=this._levelSnapshots;3<d.length&&d[1].now+c<g;)d.shift();d[1].now+c<g&&(d[0].level=d[1].level);var k=d[0].level,m=d[d.length-1],l=m.level,n=Math.min(k,l),k=Math.max(k,l),d=(m.level-d[1].level)/
((m.now-d[1].now)/c);return a?{fadeSpeed:0,minfadeLevel:n,maxfadeLevel:k,fadeChange:0}:{fadeSpeed:d,minfadeLevel:n,maxfadeLevel:k,fadeChange:(g-m.now)/c*d}};return a}();d.FadeRecorder=a})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(a,d,b){return function(){var a=b.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};
if(a.oNow)return function(){return a.oNow()};var e;e=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now();return function(){return Date.now()-e}}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(a,d){return"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{}})},"esri/layers/vectorTiles/views/vectorTiles/StencilClipGenerator":function(){define(["require","exports","./GeometryUtils"],function(a,
d,b){var c=function(){function a(b){this.children=[];this.stageTile=b}a.prototype.tryAdd=function(b){if(a.isChildOf(b,this.stageTile.key)){for(var c=0,d=this.children;c<d.length;c++)if(a.isChildOf(b,d[c]))return;this.children.push(b)}};a.prototype.equals=function(a){if(this.stageTile.key.id!==a.stageTile.key.id||this.children.length!==a.children.length)return!1;for(var b=0;b<this.children.length;b++)if(this.children[b].id!==a.children[b].id)return!1;return!0};a.isChildOf=function(a,b){if(a.level<=
b.level)return!1;var c=a.level-b.level,e=a.col>>c;return a.row>>c===b.row&&e===b.col};return a}();return function(){function a(){this._tileGroups=[];this._bitOffset=0}a.prototype.update=function(a){this._tileGroups=[];this._bitOffset=0;if(0!==a.length){for(var e=[],d=a.length,k=0;k<d;k++)if(a[k].attached&&a[k].visible){for(var m=new c(a[k]),l=k+1;l<d;l++)m.tryAdd(a[l].key);m.children.sort(function(a,b){return a.level<b.level?-1:1});this._reuseExisting(m)||e.push(m)}if(0<e.length){a=Math.ceil(b.log2(e.length+
1));d=(1<<a)-1<<this._bitOffset;k=1;m=void 0;for(l=0;l<e.length;l++){var n=e[l],m=k++<<this._bitOffset;n.stageTile.stencilData.mask=d;n.stageTile.stencilData.reference=m}this._bitOffset+=a;this._tileGroups.push(e)}}};a.prototype._reuseExisting=function(a){for(var b=0,c=this._tileGroups;b<c.length;b++)for(var e=0,d=c[b];e<d.length;e++){var l=d[e];if(l.equals(a)&&l.stageTile.stencilData.mask===a.stageTile.stencilData.mask&&l.stageTile.stencilData.reference===a.stageTile.stencilData.reference)return!0}return!1};
return a}()})},"esri/layers/vectorTiles/views/vectorTiles/TileHandler":function(){define("require exports module dojo/Deferred dojo/promise/all ../../core/workers ../../core/promiseUtils ../../core/requireUtils ../../request ../2d/layers/support/TileKey ./TileIndex ./SpriteMosaic ./SpriteSource ./GlyphMosaic ./GlyphSource ./VectorTileDisplayObject ./GeometryUtils".split(" "),function(a,d,b,c,e,f,g,h,k,m,l,n,p,r,s,q,t){return function(){function d(a,b,c,e){void 0===e&&(e=!1);this.devicePixelRatio=
c;this.allowUpdates=e;this._tileIndex=this._connection=this._glyphMosaic=this._spriteMosaic=null;this._ongoingRequests={};this._vectorTileLayer=a;this._requestUpdate=b}d.prototype.destroy=function(){this.stop();this._vectorTileLayer=this._requestUpdate=null};Object.defineProperty(d.prototype,"spriteMosaic",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"glyphMosaic",{get:function(){return this._glyphMosaic},enumerable:!0,configurable:!0});
d.prototype.start=function(){var d=this;this.stop();var g=this._vectorTileLayer.styleRepository,k=new p(g.sprite,this.devicePixelRatio);k.devicePixelRatio=devicePixelRatio;var l=k.load().then(function(){d._spriteMosaic=new n(1024,1024);d._spriteMosaic.setSpriteSource(k)}),m=new s(g.glyphs);this._glyphMosaic=new r(1024,1024,m);var q=this._fetchTileMap(this._vectorTileLayer.tileIndexUrl),t=f.open(this,h.getAbsMid("./WorkerTileHandler",a,b)).then(function(a){d._connection=a}),u=new c(function(a){l.isFulfilled()||
l.cancel();q.isFulfilled()||q.cancel();t.isFulfilled()||t.cancel()});e([l,q,t]).then(function(a){e(d._connection.broadcast("setLayers",g.styleJSON)).then(function(){u.resolve()})});return this._broadcastPromise=u.promise};d.prototype.stop=function(){this._broadcastPromise&&!this._broadcastPromise.isFulfilled()&&this._broadcastPromise.cancel();this._connection&&(this._connection.close(),this._connection=null)};d.prototype.updateTile=function(a,b){if(this.allowUpdates){if(!this._broadcastPromise.isFulfilled()||
!this._connection)return g.reject(Error("no connection"));var c=Math.round(t.degToByte(b.state.rotation));if(a.rotation===c)return null;a.rotation=c;return this._connection.invoke("update",{key:a.id,rotation:c},[],{id:a.workerID}).then(function(b){a.updateSymbolData(b);return a})}};d.prototype.getVectorTileWithLRC=function(a,b,c,e){void 0===e&&(e=0);return this.getVectorTile(m.from(a,b,c,0),{state:{rotation:e}})};d.prototype.getVectorTile=function(a,b){var c=this;if(!this._broadcastPromise.isFulfilled()||
!this._connection)return g.reject(Error("no connection"));var e=this._vectorTileLayer.tileInfo,f=Math.round(b?b.state.rotation:0);if(e.lods.length<=a.level)return g.reject("Cannot create tile for the requested level");var d=this._tileIndex?this._tileIndex.dataKey(a):a;return!d?g.reject(Error("no data")):this._getTileData(this._connection,a,d,f).then(function(b){if(!b||!b.tileData)return g.reject("No data");var h=e.size[0]*e.lods[a.level].resolution,k=e.origin,l=k.x+a.col*h+a.world*c._vectorTileLayer.fullExtent.width,
m=l+h,k=k.y-a.row*h,h=k-h;c._requestUpdate();return new q(a,d,[l,k,m,h],c._vectorTileLayer.tileInfo.size[1],4096,f,b.tileData,c._vectorTileLayer.styleRepository,c._glyphMosaic,c.allowUpdates?b.workerId:-1,c._connection)})};d.prototype.fetchTileData=function(a){a=m.fromId(a);a=this._vectorTileLayer.getTileUrl(a.level,a.row,a.col);return k(a,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(a){return{data:{protobuff:a.data},buffers:[a.data]}})};d.prototype.getSprites=function(a){return g.resolve({data:{spriteItems:this._spriteMosaic.getSpriteItems(a.sprites)}})};
d.prototype.getGlyphs=function(a){return this._glyphMosaic.getGlyphItems(a.tileID,a.font,a.codePoints).then(function(a){return{data:{glyphItems:a}}})};d.prototype.getStyleRepository=function(){return this._vectorTileLayer.styleRepository};d.prototype.getTileIndex=function(){return this._tileIndex};d.prototype._getTileData=function(a,b,c,e){var f=this,d={id:null};if(a=this._ongoingRequests[b.id])return a;a=this._connection.invoke("getTile",{key:b.id,refKey:c.id,rotation:e,cacheTile:this.allowUpdates},
[],d).then(function(a){delete f._ongoingRequests[b.id];return{tileData:a,workerId:d.id}}).otherwise(function(a){delete f._ongoingRequests[b.id];f.allowUpdates&&f._connection.invoke("destructTileData",{key:b.id},[],d);return g.reject(a)});return this._ongoingRequests[b.id]=a};d.prototype._fetchTileMap=function(a){var b=this;return!a?null:k(a,{callbackParamName:"callback",responseType:"json"}).then(function(a){b._tileIndex=new l(a.data)})};return d}()})},"esri/layers/vectorTiles/core/workers":function(){define(["require",
"exports","./workers/workers"],function(a,d,b){for(var c in b)d.hasOwnProperty(c)||(d[c]=b[c])})},"esri/layers/vectorTiles/core/workers/workers":function(){define("require exports dojo/Deferred dojo/promise/all ../promiseUtils ./Connection ./JobProxy".split(" "),function(a,d,b,c,e,f,g){function h(a,b){for(var e=[],f=0,d=p.length;f<d;f++)e.push(p[f].openConnection(a,b));return c(e).then(function(a){})}function k(a){r[a]=!0;if(!n&&r.every(function(a){return a})){for(var b in u)(a=t[b])&&u[b].resolve(a);
u={};n=!0}}function m(a){var c=q++;a=new f(a,c);var e=new b;t[c]=a;n?e.resolve(a):u[c]=e;return e.promise}var l=Math.max((navigator.hardwareConcurrency||2)-1,2),n=!1,p=[],r=[],s=0,q=0,t={},u={},v=!1;d.open=function(a,b){if(!1===v){for(var c=0;c<l;++c){var f=new g(t,c,k);p.push(f);r.push(!1)}v=!0}return m(a).then(function(a){return h(b,a.id).then(function(){return a}).otherwise(function(a){return e.reject(a)})})};d.terminate=function(){for(var a=0,b=p.length;a<b;a++)p[a].terminate();p=[];r=[];n=!1};
d.closeConnection=function(a){if(a)if(t[a.id]&&delete t[a.id],n)for(var b=0,c=p.length;b<c;b++)p[b].closeConnection(a.id);else if(b=u[a.id])b.promise.cancel(),delete u[a.id]};d.invoke=function(a,b,c,f,d){var g=null;f&&(g=f.id);if(null===g&&(g=s=(s+1)%p.length,!r[g]&&!p.some(function(a,b,c){g=(g+1)%c.length;return r[g]})))return e.reject(Error("No worker available"));a=p[g].invoke(a,b,c,d);f&&(f.id=g);return a};d.broadcast=function(a,b,c,e){for(var f=[],d=0,g=p.length;d<g;d++)r[d]&&f.push(p[d].invoke(a,
b,c,e));return f}})},"esri/layers/vectorTiles/core/workers/Connection":function(){define(["require","exports","./workers"],function(a,d,b){return function(){function a(b,c){this.client=b;this.id=c}a.prototype.invoke=function(a,c,d,h){return b.invoke(a,c,d,h,this.id)};a.prototype.broadcast=function(a,c,d){return b.broadcast(a,c,d,this.id)};a.prototype.close=function(){b.closeConnection(this)};return a}()})},"esri/layers/vectorTiles/core/workers/JobProxy":function(){define("require exports dojo/_base/kernel dojo/_base/lang dojo/_base/url dojo/Deferred ../../kernel ../../config ../../request ../Logger ../urlUtils ./WorkerFallbackImpl".split(" "),
function(a,d,b,c,e,f,g,h,k,m,l,n){function p(){if(!v){var a=void 0;try{a=new Worker(q)}catch(b){s.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new n}return r(a)}if(!x){var a=new e(q),c=h.defaults?h.defaults.io.corsEnabledServers:h.request.corsEnabledServers;-1===c.indexOf(a.host)&&c.push(a.host);x=k(q,{responseType:"text"})}return x.then(function(a){var b;try{b=new Worker(URL.createObjectURL(new Blob([a.data],{type:"text/javascript"})))}catch(c){s.warn("Failed to create Worker. Fallback to execute module in main thread",
c),b=new n}return r(b)})}function r(a){function e(f){if(f&&f.data&&f.data.type)if(f=f.data.type,"\x3cworker-loaded\x3e"===f){f=a;var k;null!=h["default"]?(k=c.mixin({},h),delete k["default"],k=JSON.parse(JSON.stringify(k))):k=JSON.parse(JSON.stringify(h));f.postMessage({type:"\x3cconfigure\x3e",configure:{esriConfig:k,dojoConfig:{async:!0,baseUrl:u,locale:b.locale,has:{"esri-cors":1,"dojo-test-sniff":0,"config-deferredInstrumentation":0},paths:{esri:"esri",dojo:"dojo",dojox:"dojox",dstore:"dstore",
moment:"moment"}},loaderUrl:t}})}else"\x3cworker-configured\x3e"===f&&(a.removeEventListener("message",e),a.removeEventListener("error",d),g.resolve(a))}function d(b){b.preventDefault();a.removeEventListener("message",e);a.removeEventListener("error",d);s.warn("Failed to create Worker. Fallback to execute module in main thread",b);a=new n;a.addEventListener("message",e);a.addEventListener("error",d)}var g=new f;a.addEventListener("message",e);a.addEventListener("error",d);return g.promise}var s=m.getLogger("esri.core.workers"),
q=l.makeAbsolute(a.toUrl("./worker.js")),t=l.makeAbsolute(a.toUrl("./worker-init.js")),u=l.makeAbsolute("../../../../../../",t)+"/",v=!l.hasSameOrigin(q,location.href),x=null;return function(){function a(b,c,e){var f=this;this.connections=b;this.index=c;this.workerInitCallback=e;this.msgCount=0;this.outgoingJobs={};this.incomingJobs={};this.incomingStaticJobs={};p().then(function(a){f.worker=a;f.worker.addEventListener("message",f.message.bind(f));f.worker.addEventListener("error",function(a){a.preventDefault();
s.error(a)});f.workerInitCallback(f.index)})}a.prototype.terminate=function(){this.worker.terminate()};a.prototype.openConnection=function(a,b){return this.invoke("\x3copen-connection\x3e",{path:a},void 0,b)};a.prototype.closeConnection=function(a){this.invoke("\x3cclose-connection\x3e",void 0,void 0,a)};a.prototype.invoke=function(a,b,c,e){var d=this,g=++this.msgCount,h=new f(function(a){d.worker.postMessage({type:"\x3ccancel\x3e",id:g,connection:e,data:{reason:a}});d.outgoingJobs[g]&&delete d.outgoingJobs[g]});
this.outgoingJobs[g]=h;this.worker.postMessage({type:a,id:g,connection:e,data:b},c);return h.promise};a.prototype.message=function(a){var b=this;if(a&&a.data){var c=a.data.type;if(c){var e=a.data,f=a.data.id;if("\x3cresponse\x3e"===c&&f){if(a=this.outgoingJobs[f])delete this.outgoingJobs[f],e.error?a.reject(e.error):a.resolve(e.data)}else if("\x3ccancel\x3e"===c&&f)(a=this.incomingJobs[f])&&a.cancel(e.data.reason),e.staticMsg&&(a=this.incomingStaticJobs[f])&&a.cancel(e.data.reason);else if("\x3cstatic-message\x3e"===
c){var d=e.staticMsg;a=g.workerMessages[d];!a||"function"!==typeof a?this.worker.postMessage({type:"\x3cstatic-message\x3e",staticMsg:d,id:f,error:a+" message type is not available on the kernel!"}):(e=a.call(this,e.data),this.incomingStaticJobs[f]=e,e.then(function(a){b.worker.postMessage({type:"\x3cstatic-message\x3e",staticMsg:d,id:f,data:a.data},a.buffers)}).otherwise(function(a){a||(a="Error encountered at method"+d);(!a.dojoType||"cancel"!==a.dojoType)&&b.worker.postMessage({type:"\x3cstatic-message\x3e",
staticMsg:d,id:f,error:a})}).always(function(){delete b.incomingStaticJobs[f]}))}else{var h=e.connection;if(a=this.connections[h])if(a=a.client){var k=a[c];"function"===typeof k&&(e=k.call(a,e.data),this.incomingJobs[f]=e,e.then(function(a){b.worker.postMessage({type:"\x3cresponse\x3e",id:f,connection:h,error:a.error,data:a.data},a.buffers)}).otherwise(function(a){a||(a="Error encountered at method"+c);(!a.dojoType||"cancel"!==a.dojoType)&&b.worker.postMessage({type:"\x3cresponse\x3e",id:f,connection:h,
error:a})}).always(function(){delete b.incomingJobs[f]}))}}}}};return a}()})},"esri/layers/vectorTiles/kernel":function(){define(["require","exports","esri/kernel","./identity/IdentityManager"],function(a,d,b,c){return function(){function a(){}Object.defineProperty(a,"id",{get:function(){return b.id?c:null},enumerable:!0,configurable:!0});a.workerMessages={};return a}()})},"esri/layers/vectorTiles/identity/IdentityManager":function(){define(["require","exports","esri/IdentityManager"],function(a,
d,b){d.findCredential=function(a){return b.findCredential(a)}})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(a,d,b,c){a=new a;d.id=c.safeMixin(a,b);return d.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(a,d,b,c,e,f,g,h,k,m,l,n,p,r,s,q){d=d([s],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(a){e.mixin(this,a);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(a,e,f){this._nls||(this._nls=q.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var d=this._loginDialog,h=f&&f.error,k=f&&f.token,l=new c(function(){d.onCancel()});if(d.open)return a=Error("BUSY"),a.code="IdentityManager.1",a.log=b.isDebug,l.errback(a),l;p.hide(d.errMsg_);h&&(403==h.code&&k)&&(g.set(d.errMsg_,"innerHTML",this._nls.forbidden),p.show(d.errMsg_));d.dfd_=
l;d.serverInfo_=e;d.resUrl_=a;d.admin_=f&&f.isAdmin;g.set(d.resLink_,{title:a,innerHTML:"("+(this.getResourceName(a)||this._nls.lblItem)+")"});g.set(d.serverLink_,{title:e.server,innerHTML:(-1!==e.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":e.server)+" "});d.txtPwd_.set("value","");d.show();return l},_createLoginDialog:function(){var c=this._nls,e=n.substitute(c,this._dialogContent),e=n.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},e),f=new m({title:c.title,content:e,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(a){a.charOrCode===h.ENTER&&this.execute_()},execute_:function(){var a=this.txtUser_.get("value"),b=this.txtPwd_.get("value"),e=this.dfd_,f=this;if(this.form_.validate()&&a&&b){this.btnSubmit_.set("label",c.lblSigning);var d=l.id.findCredential(f.resUrl_,a),h=function(b){f.btnSubmit_.set("label",
c.lblOk);f.btnSubmit_.set("disabled",!1);p.hide(f.errMsg_);f.hide();m._DialogLevelManager.hide(f);var g=f.serverInfo_;f.dfd_=f.serverInfo_=f.generateDfd_=f.resUrl_=null;var h,k,l=d,q;b&&(h=b.token,k=n.isDefined(b.expires)?Number(b.expires):null,q=!!b.ssl,l?(l.userId=a,l.token=h,l.expires=k,l.validity=b.validity,l.ssl=q,l.creationTime=(new Date).getTime()):l=new r({userId:a,server:g.server,token:h,expires:k,ssl:q,isAdmin:f.admin_,validity:b.validity}));e.callback(l)};d&&!d._enqueued?h():(f.btnSubmit_.set("disabled",
!0),f.generateDfd_=l.id.generateToken(this.serverInfo_,{username:a,password:b},{isAdmin:this.admin_}).addCallback(h).addErrback(function(a){f.btnSubmit_.set("disabled",!1);f.generateDfd_=null;f.btnSubmit_.set("label",c.lblOk);g.set(f.errMsg_,"innerHTML",a&&a.code?c.invalidUser:c.noAuthService);p.show(f.errMsg_)}))}},cancel_:function(){f.generateDfd_&&f.generateDfd_.cancel();var a=f.dfd_,c=f.resUrl_,e=f.serverInfo_;f.btnSubmit_.set("disabled",!1);f.dfd_=f.serverInfo_=f.generateDfd_=f.resUrl_=null;
p.hide(f.errMsg_);m._DialogLevelManager.hide(f);f.esriIdMgr_.onDialogCancel({resourceUrl:c,serverInfo:e});c=Error("ABORTED");c.code="IdentityManager.2";c.log=b.isDebug;a.errback(c)}}),e=f.domNode;f.form_=k.byNode(a.query(".esriIdForm",e)[0]);f.txtUser_=k.byNode(a.query(".esriIdUser",e)[0]);f.txtPwd_=k.byNode(a.query(".esriIdPwd",e)[0]);f.btnSubmit_=k.byNode(a.query(".esriIdSubmit",e)[0]);f.btnCancel_=k.byNode(a.query(".esriIdCancel",e)[0]);f.resLink_=a.query(".resLink",e)[0];f.serverLink_=a.query(".serverLink",
e)[0];f.errMsg_=a.query(".esriErrorMsg",e)[0];f.connect(f.txtUser_,"onKeyPress",f.keypressed_);f.connect(f.txtPwd_,"onKeyPress",f.keypressed_);f.connect(f.btnSubmit_,"onClick",f.execute_);f.connect(f.btnCancel_,"onClick",f.onCancel);f.connect(f,"onCancel",f.cancel_);return f}});f("extend-esri")&&(l.IdentityManagerDialog=l.IdentityManager=d);return d})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(a,d,b,c,e,f,g,h,k,m,l,n,p,r,s,q,t,u,v,x,w,z,A,y,B,E,H,J,F,I){function L(){}var K=new e;K.resolve(!0);w=c("dijit._DialogBase"+(q("dojo-bidi")?"_NoBidi":""),[A,B,E,y],{templateString:I,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:w.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:0.9,
closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=l.getLocalization("dijit","common");p.mixin(this,a);this.inherited(arguments)},postCreate:function(){k.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);b.after(this,"onExecute",p.hitch(this,"hide"),!0);b.after(this,"onCancel",p.hitch(this,"hide"),!0);this._modalconnects=
[]},onLoad:function(){this.resize();this._position();this.autofocus&&D.isTop(this)&&(this._getFocusItems(),x.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();x.focus(this._firstFocusItem)},_endDrag:function(){var a=h.position(this.domNode),b=t.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?
(this._moveable=new (6==q("ie")?v:u)(a,{handle:this.titleBar}),b.after(this._moveable,"onMoveStop",p.hitch(this,"_endDrag"),!0)):g.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":d.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:p.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!g.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,b=t.getBox(this.ownerDocument),
c=this._relativePosition,e=h.position(a),f=Math.floor(b.l+(c?Math.min(c.x,b.w-e.w):(b.w-e.w)/2)),b=Math.floor(b.t+(c?Math.min(c.y,b.h-e.h):(b.h-e.h)/2));k.set(a,{left:f+"px",top:b+"px"})}},_onKey:function(a){if(a.keyCode==n.TAB){this._getFocusItems();var b=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(x.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b==this._lastFocusItem&&!a.shiftKey&&(x.focus(this._firstFocusItem),
a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==n.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return K.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),D.hide(this));var a=t.get(this.ownerDocument);this._modalconnects.push(r(a,"scroll",p.hitch(this,"resize",null)));this._modalconnects.push(r(this.domNode,"keydown",
p.hitch(this,"_onKey")));k.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();var b;this._fadeInDeferred=new e(p.hitch(this,function(){b.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,L);a=this._fadeInDeferred.promise;b=m.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:p.hitch(this,function(){D.show(this,this.underlayAttrs)}),onEnd:p.hitch(this,function(){this.autofocus&&D.isTop(this)&&(this._getFocusItems(),
x.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return a},hide:function(){if(!this._alreadyInitialized||!this.open)return K.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new e(p.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,L);this._fadeOutDeferred.then(p.hitch(this,"onHide"));var b=this._fadeOutDeferred.promise;a=m.fadeOut({node:this.domNode,duration:this.duration,
onEnd:p.hitch(this,function(){this.domNode.style.display="none";D.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var c;c=this._modalconnects.pop();)c.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return b},resize:function(a){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!a){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),d.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(a){a&&k.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var b=t.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;var c=h.position(this.domNode);c.w>=b.w||c.h>=b.h?(a={w:Math.min(c.w,b.w),h:Math.min(c.h,b.h)},this._shrunk=!0):this._shrunk=!1}if(a){h.setMarginBox(this.domNode,
a);b=[];this.titleBar&&b.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&b.push({domNode:this.actionBarNode,region:"bottom"});c={domNode:this.containerNode,region:"center"};b.push(c);var e=F.marginBox2contentBox(this.domNode,a);F.layoutChildren(this.domNode,e,b);this._singleChild?(b=F.marginBox2contentBox(this.containerNode,c),this._singleChild.resize({w:b.w,h:b.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();!q("touch")&&!a&&this._position()}},
_layoutChildren:function(){d.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();D.hide(this);this.inherited(arguments)}});q("dojo-bidi")&&(w=c("dijit._DialogBase",w,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},
_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var G=c("dijit.Dialog",[J,w],{});G._DialogBase=w;var D=G._DialogLevelManager={_beginZIndex:950,show:function(a,b){C[C.length-1].focus=x.curNode;var c=C[C.length-1].dialog?C[C.length-1].zIndex+2:G._DialogLevelManager._beginZIndex;k.set(a.domNode,"zIndex",c);H.show(b,c-1);C.push({dialog:a,underlayAttrs:b,zIndex:c})},hide:function(a){if(C[C.length-1].dialog==a){C.pop();var b=C[C.length-
1];1==C.length?H.hide():H.show(b.underlayAttrs,b.zIndex-1);if(a.refocus){a=b.focus;if(b.dialog&&(!a||!f.isDescendant(a,b.dialog.domNode)))b.dialog._getFocusItems(),a=b.dialog._firstFocusItem;if(a)try{a.focus()}catch(c){}}}else b=d.indexOf(d.map(C,function(a){return a.dialog}),a),-1!=b&&C.splice(b,1)},isTop:function(a){return C[C.length-1].dialog==a}},C=G._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];x.watch("curNode",function(a,b,c){a=C[C.length-1].dialog;if(c&&a&&!a._fadeOutDeferred&&
c.ownerDocument==a.ownerDocument){do if(c==a.domNode||g.contains(c,"dijitPopup"))return;while(c=c.parentNode);a.focus()}});q("dijit-legacy-requires")&&s(0,function(){a(["dijit/TooltipDialog"])});return G})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(a,d,b,c,e,f,g,h,k,m,l,n){return d("dojo.dnd.Moveable",[f],{handle:"",delay:0,skip:!1,constructor:function(a,
e){this.node=c.byId(a);e||(e={});this.handle=e.handle?c.byId(e.handle):null;this.handle||(this.handle=this.node);this.delay=0<e.delay?e.delay:0;this.skip=e.skip;this.mover=e.mover?e.mover:l;this.events=[g(this.handle,k.press,b.hitch(this,"onMouseDown")),g(this.handle,"dragstart",b.hitch(this,"onSelectStart")),g(this.handle,"selectstart",b.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,c){return new c(b,a)},destroy:function(){a.forEach(this.events,function(a){a.remove()});this.events=this.node=
this.handle=null},onMouseDown:function(a){if(!this.skip||!m.isFormElement(a)){if(this.delay)this.events.push(g(this.handle,k.move,b.hitch(this,"onMouseMove")),g(this.handle.ownerDocument,k.release,b.hitch(this,"onMouseUp"))),this._lastX=a.pageX,this._lastY=a.pageY;else this.onDragDetected(a);a.stopPropagation();a.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();
a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){if(!this.skip||!m.isFormElement(a))a.stopPropagation(),a.preventDefault()},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){h.publish("/dnd/move/start",a);e.add(n.body(),"dojoMove");e.add(this.node,"dojoMoveItem")},onMoveStop:function(a){h.publish("/dnd/move/stop",a);e.remove(n.body(),"dojoMove");e.remove(this.node,
"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(a,d,b,c){var e=b.getObject("dojo.dnd",!0);e.getCopyKeyState=function(b){return b[a("mac")?"metaKey":"ctrlKey"]};e._uniqueId=0;e.getUniqueId=function(){var a;do a=d._scopeName+"Unique"+ ++e._uniqueId;while(c.byId(a));
return a};e._empty={};e.isFormElement=function(a){a=a.target;3==a.nodeType&&(a=a.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+" ")};return e})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(a,d,b,c,e,f,g,h,k,m,l,n,p){return d("dojo.dnd.Mover",[k],{constructor:function(a,c,e){function d(a){a.preventDefault();
a.stopPropagation()}this.node=f.byId(a);this.marginBox={l:c.pageX,t:c.pageY};this.mouseButton=c.button;c=this.host=e;a=a.ownerDocument;this.events=[m(a,l.move,b.hitch(this,"onFirstMove")),m(a,l.move,b.hitch(this,"onMouseMove")),m(a,l.release,b.hitch(this,"onMouseUp")),m(a,"dragstart",d),m(a.body,"selectstart",d)];p.autoScrollStart(a);if(c&&c.onMoveStart)c.onMoveStart(this)},onMouseMove:function(a){p.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();
a.stopPropagation()},onMouseUp:function(a){(c("webkit")&&c("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,c,f=this.host;switch(b.position){case "relative":case "absolute":c=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=g.getMarginBox(this.node);c=e.doc.body;var d=h.getComputedStyle(c),k=g.getMarginBox(c,d),d=g.getContentBox(c,
d);c=b.l-(d.l-k.l);b=b.t-(d.t-k.t)}this.marginBox.l=c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(f&&f.onFirstMove)f.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){a.forEach(this.events,function(a){a.remove()});var b=this.host;if(b&&b.onMoveStop)b.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(a,d,b,c,e,f){var g=
{};a.setObject("dojo.dnd.autoscroll",g);g.getViewport=f.getBox;g.V_TRIGGER_AUTOSCROLL=32;g.H_TRIGGER_AUTOSCROLL=32;g.V_AUTOSCROLL_VALUE=16;g.H_AUTOSCROLL_VALUE=16;var h,k=b.doc,m=Infinity,l=Infinity;g.autoScrollStart=function(a){k=a;h=f.getBox(k);a=b.body(k).parentNode;m=Math.max(a.scrollHeight-h.h,0);l=Math.max(a.scrollWidth-h.w,0)};g.autoScroll=function(a){var c=h||f.getBox(k),e=b.body(k).parentNode,d=0,q=0;a.clientX<g.H_TRIGGER_AUTOSCROLL?d=-g.H_AUTOSCROLL_VALUE:a.clientX>c.w-g.H_TRIGGER_AUTOSCROLL&&
(d=Math.min(g.H_AUTOSCROLL_VALUE,l-e.scrollLeft));a.clientY<g.V_TRIGGER_AUTOSCROLL?q=-g.V_AUTOSCROLL_VALUE:a.clientY>c.h-g.V_TRIGGER_AUTOSCROLL&&(q=Math.min(g.V_AUTOSCROLL_VALUE,m-e.scrollTop));window.scrollBy(d,q)};g._validNodes={div:1,p:1,td:1};g._validOverflow={auto:1,scroll:1};g.autoScrollNodes=function(a){for(var f,h,k,l,m,u,v=0,x=0,w=a.target;w;){if(1==w.nodeType&&w.tagName.toLowerCase()in g._validNodes){k=e.getComputedStyle(w);l=k.overflow.toLowerCase()in g._validOverflow;m=k.overflowX.toLowerCase()in
g._validOverflow;u=k.overflowY.toLowerCase()in g._validOverflow;if(l||m||u)f=c.getContentBox(w,k),h=c.position(w,!0);if(l||m){k=Math.min(g.H_TRIGGER_AUTOSCROLL,f.w/2);m=a.pageX-h.x;if(d("webkit")||d("opera"))m+=b.body().scrollLeft;v=0;0<m&&m<f.w&&(m<k?v=-k:m>f.w-k&&(v=k),w.scrollLeft+=v)}if(l||u){l=Math.min(g.V_TRIGGER_AUTOSCROLL,f.h/2);u=a.pageY-h.y;if(d("webkit")||d("opera"))u+=b.body().scrollTop;x=0;0<u&&u<f.h&&(u<l?x=-l:u>f.h-l&&(x=l),w.scrollTop+=x)}if(v||x)return}try{w=w.parentNode}catch(z){w=
null}}g.autoScroll(a)};return g})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(a,d){var b=d.prototype.onMove;return a("dojo.dnd.TimedMoveable",d,{timeout:40,constructor:function(a,b){b||(b={});b.timeout&&("number"==typeof b.timeout&&0<=b.timeout)&&(this.timeout=b.timeout)},onMoveStop:function(a){a._timer&&(clearTimeout(a._timer),b.call(this,a,a._leftTop));d.prototype.onMoveStop.apply(this,arguments)},onMove:function(a,e){a._leftTop=e;if(!a._timer){var f=this;
a._timer=setTimeout(function(){a._timer=null;b.call(f,a,a._leftTop)},this.timeout)}}})})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(a,d,b,c,e){var f={};a.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(a){f[a]=c[a]});b.mixin(f,{defaultDuration:d.defaultDuration||200});b.mixin(e,f);return e})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(a,d,b,c,e,f,g,h,k,m,l,n,p){function r(){}function s(a){return function(c,e,f,d){return c&&"string"==typeof e&&c[e]==r?c.on(e.substring(2).toLowerCase(),g.hitch(f,d)):a.apply(b,arguments)}}a.around(b,"connect",s);f.connect&&a.around(f,"connect",s);a=c("dijit._Widget",[l,n,p],{onClick:r,onDblClick:r,onKeyDown:r,onKeyPress:r,onKeyUp:r,onMouseDown:r,onMouseMove:r,onMouseOut:r,onMouseOver:r,onMouseLeave:r,onMouseEnter:r,onMouseUp:r,constructor:function(a){this._toConnect={};for(var b in a)this[b]===
r&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,c){return this[this._onMap(a)]===r?b.connect(this.domNode,a.toLowerCase(),this,c):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){f.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){f.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?h("[widgetId]",this.containerNode).map(m.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});e("dijit-legacy-requires")&&k(0,function(){require(["dijit/_base"])});
return a})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(a,d,b,c,e,f){a=c("dijit._OnDijitClickMixin",null,{connect:function(a,b,c){return this.inherited(arguments,[a,"ondijitclick"==b?f:b,c])}});a.a11yclick=f;return a})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(a,d,b,c){b(function(){d("highcontrast")&&a.add(c.body(),"dijit_a11y")});return d})},
"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(a,d,b,c,e,f,g){e.add("highcontrast",function(){var b=g.doc.createElement("div");try{b.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(d.blankGif||a.toUrl("./resources/blank.gif"))+'");';g.body().appendChild(b);var f=c.getComputedStyle(b),m=f.backgroundImage;return f.borderTopColor==f.borderRightColor||
m&&("none"==m||"url(invalid-url:)"==m)}catch(l){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+l.toString()),!1}finally{8>=e("ie")?b.outerHTML="":g.body().removeChild(b)}});f(function(){e("highcontrast")&&b.add(g.body(),"dj_a11y")});return e})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),
function(a,d,b,c,e,f,g,h,k,m,l,n){d=d("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);a.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,f.hitch(this,"_setStateClass"))},this);for(var b in this.cssStateNodes||{})this._trackMouseState(this[b],this.cssStateNodes[b]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function b(e){c=c.concat(a.map(c,function(a){return a+e}),"dijit"+e)}var c=this.baseClass.split(" ");
this.isLeftToRight()||b("Rtl");var e="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(e);this.state&&b(this.state);this.selected&&b("Selected");this._opened&&b("Opened");this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover");this.focused&&b("Focused");var e=this.stateNode||this.domNode,f={};a.forEach(e.className.split(" "),function(a){f[a]=!0});"_stateClasses"in this&&a.forEach(this._stateClasses,function(a){delete f[a]});a.forEach(c,
function(a){f[a]=!0});var d=[],g;for(g in f)d.push(g);e.className=d.join(" ");this._stateClasses=c},_subnodeCssMouseEvent:function(a,b,e){function f(e){c.toggle(a,b+"Active",e)}if(!this.disabled&&!this.readOnly)switch(e.type){case "mouseover":case "MSPointerOver":case "pointerover":c.toggle(a,b+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":c.toggle(a,b+"Hover",!1);f(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":f(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":f(!1);break;case "focus":case "focusin":c.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":c.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});h(function(){function a(c,e,f){if(!f||!b.isDescendant(f,e))for(;e&&e!=f;e=e.parentNode)if(e._cssState){var d=n.getEnclosingWidget(e);d&&(e==d.domNode?d._cssMouseEvent(c):d._subnodeCssMouseEvent(e,e._cssState,c))}}var c=m.body(),e;g(c,
k.over,function(b){a(b,b.target,b.relatedTarget)});g(c,k.out,function(b){a(b,b.target,b.relatedTarget)});g(c,l.press,function(b){e=b.target;a(b,e)});g(c,l.release,function(b){a(b,e);e=null});g(c,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=n.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return d})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(a,d,b,c,e,f){return d("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(b){var c=[];a.forEach(b||this.getChildren(),function(a){"value"in a?c.push(a):c=c.concat(this._getDescendantFormWidgets(a.getChildren()))},this);return c},reset:function(){a.forEach(this._getDescendantFormWidgets(),function(a){a.reset&&a.reset()})},validate:function(){var b=!1;return a.every(a.map(this._getDescendantFormWidgets(),function(a){a._hasBeenBlurred=!0;var c=a.disabled||!a.validate||
a.validate();!c&&!b&&(f.scrollIntoView(a.containerNode||a.domNode),a.focus(),b=!0);return c}),function(a){return a})},setValues:function(a){b.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(b){var e={};a.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(e[a.name]||(e[a.name]=[])).push(a)});for(var f in e)if(e.hasOwnProperty(f)){var d=e[f],l=c.getObject(f,!1,b);void 0!==l&&(l=[].concat(l),
"boolean"==typeof d[0].checked?a.forEach(d,function(b){b.set("value",-1!=a.indexOf(l,b._get("value")))}):d[0].multiple?d[0].set("value",l):a.forEach(d,function(a,b){a.set("value",l[b])}))}},getValues:function(){b.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var b={};a.forEach(this._getDescendantFormWidgets(),function(a){var e=a.name;if(e&&!a.disabled){var f=a.get("value");"boolean"==typeof a.checked?
/Radio/.test(a.declaredClass)?!1!==f?c.setObject(e,f,b):(f=c.getObject(e,!1,b),void 0===f&&c.setObject(e,null,b)):(a=c.getObject(e,!1,b),a||(a=[],c.setObject(e,a,b)),!1!==f&&a.push(f)):(a=c.getObject(e,!1,b),"undefined"!=typeof a?c.isArray(a)?a.push(f):c.setObject(e,[a,f],b):c.setObject(e,f,b))}});return b},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var b=a.map(this._descendants,function(a){return a.get("state")||""});return 0<=a.indexOf(b,"Error")?
"Error":0<=a.indexOf(b,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(b){this._descendants=this._getDescendantFormWidgets();a.forEach(this._descendants,function(a){a._started||a.startup()});b||this._onChildChange()},_onChildChange:function(a){(!a||"state"==a||"disabled"==a)&&this._set("state",this._getState());if(!a||"value"==a||"disabled"==a||"checked"==a)this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10)},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var a=this;this.own(e(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(b){b.target!=a.domNode&&a._onChildChange(b.type.replace("attrmodified-",""))}));this.watch("state",function(a,b,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(a,d){return a("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=d._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(a,d,b,c,e,f,g,h,k,m,l,n){var p=a("dijit.DialogUnderlay",[h,k],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){c.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(f(this.domNode,"keydown",d.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=g.getBox(this.ownerDocument);b.top=c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new m(this.domNode);var a=g.get(this.ownerDocument);this._modalConnects=[l.on("resize",d.hitch(this,"layout")),f(a,"scroll",
d.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});p.show=function(a,b){var c=p._singleton;!c||c._destroyed?c=n._underlay=p._singleton=new p(a):a&&c.set(a);e.set(c.domNode,"zIndex",b);c.open||c.show()};p.hide=function(){var a=
p._singleton;a&&!a._destroyed&&a.hide()};return p})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(a,d,b,c,e,f,g,h){h.add("config-bgIframe",h("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||h("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var k=new function(){var f=[];this.pop=function(){var d;f.length?(d=f.pop(),d.style.display=""):(9>h("ie")?(d="\x3ciframe src\x3d'"+
(b.dojoBlankHtmlUrl||a.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e",d=document.createElement(d)):(d=c.create("iframe"),d.src='javascript:""',d.className="dijitBackgroundIframe",d.setAttribute("role","presentation"),e.set(d,"opacity",0.1)),d.tabIndex=-1);return d};this.push=function(a){a.style.display="none";f.push(a)}};d.BackgroundIframe=function(a){if(!a.id)throw Error("no id");
if(h("config-bgIframe")){var b=this.iframe=k.pop();a.appendChild(b);7>h("ie")||h("quirks")?(this.resize(a),this._conn=g(a,"resize",f.hitch(this,"resize",a))):e.set(b,{width:"100%",height:"100%"})}};f.extend(d.BackgroundIframe,{resize:function(a){this.iframe&&e.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),k.push(this.iframe),delete this.iframe)}});
return d.BackgroundIframe})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(a,d,b,c,e){var f=new a,g;b(function(){var a=e.getBox();f._rlh=d(window,"resize",function(){var b=e.getBox();a.h==b.h&&a.w==b.w||(a=b,f.emit("resize"))});if(8==c("ie")){var b=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=b&&(b=screen.deviceXDPI,f.emit("resize"))},500)}c("ios")&&(d(document,"focusin",function(a){g=a.target}),d(document,"focusout",
function(a){g=null}))});f.getEffectiveBox=function(a){a=e.getBox(a);var b=g&&g.tagName&&g.tagName.toLowerCase();if(c("ios")&&g&&!g.readOnly&&("textarea"==b||"input"==b&&/^(color|email|number|password|search|tel|text|url)$/.test(g.type)))a.h*=0==orientation||180==orientation?0.66:0.4,b=g.getBoundingClientRect(),a.h=Math.max(a.h,b.top+b.height);return a};return f})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(a,d,b,c,e,f,g,h,k,m,l,n,p,r,s,q){return k("dijit.layout.ContentPane",[b,c,e],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:a._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var e=new c(a,b);return!e.href&&e._contentSetter&&e._contentSetter.parseDeferred&&!e._contentSetter.parseDeferred.isFulfilled()?e._contentSetter.parseDeferred.then(function(){return e}):e},create:function(a,b){if((!a||!a.template)&&b&&!("href"in a)&&!("content"in a)){b=l.byId(b);for(var c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);
a=d.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=s.getLocalization("dijit","loading",this.lang);this.loadingMessage=f.substitute(this.loadingMessage,a);this.errorMessage=f.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&h.forEach(this._contentSetter.parseResults,
function(a){!a._started&&(!a._destroyed&&d.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},_startChildren:function(){h.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&d.isFunction(a.startup))&&(a.startup(),a._started=!0)});this._contentSetter&&h.forEach(this._contentSetter.parseResults,function(a){!a._started&&(!a._destroyed&&d.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},setHref:function(b){a.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",b)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new m(d.hitch(this,"cancel"));this.onLoadDeferred.then(d.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(b){a.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",b)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new m(d.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(d.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new m(d.hitch(this,"cancel"));this.onLoadDeferred.then(d.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
d.isObject(this.ioArgs)&&d.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||r.get)(b),e;c.then(function(b){e=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return e});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+
" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;h.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(h.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?
b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||p.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){a=this.preprocessContent(a);this.destroyDescendants();var c=this._contentSetter;c&&c instanceof g._ContentSetter||(c=this._contentSetter=new g._ContentSetter({node:this.containerNode,_onError:d.hitch(this,this._onError),onContentError:d.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+
this.id+" could not change content due to "+b.message,b)}})}));var e=d.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),e=c.set(d.isObject(a)&&a.domNode?a.domNode:a,e),f=this;return q(e&&e.then?e:c.parseDeferred,function(){delete f._contentSetterParams;b||(f._started&&(f._startChildren(),f._scheduleLayout()),f._onLoadHandler(a))})},
preprocessContent:function(a){return a},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],
function(a,d,b,c){return d("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(a,c){var d=this.containerNode;if(0<c){for(d=d.firstChild;0<c;)1==d.nodeType&&c--,d=d.nextSibling;d?c="before":(d=this.containerNode,c="last")}b.place(a.domNode,d,c);this._started&&!a._started&&a.startup()},removeChild:function(a){"number"==typeof a&&(a=this.getChildren()[a]);a&&(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},
hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(b,c){var d=this.getChildren(),h=a.indexOf(d,b);return d[h+c]},getIndexOfChild:function(b){return a.indexOf(this.getChildren(),b)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(a,d,b,c,e,f,g,h,k,m){return d("dijit.layout._ContentPaneResizeMixin",
null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(k.on("resize",f.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],c=!1;g("\x3e *",this.containerNode).some(function(b){var e=h.byNode(b);e&&e.resize?a.push(e):!/script|link|style/i.test(b.nodeName)&&
b.offsetHeight&&(c=!0)});this._singleChild=1==a.length&&!c?a[0]:null;b.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,b){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();a&&c.setMarginBox(this.domNode,a);var e=this.containerNode;if(e===
this.domNode){var d=b||{};f.mixin(d,a||{});if(!("h"in d)||!("w"in d))d=f.mixin(c.getMarginBox(e),d);this._contentBox=m.marginBox2contentBox(e,d)}else this._contentBox=c.getContentBox(e);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||c.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),b,e=0;b=a[e++];)b.resize&&b.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&
"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,c=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!b.contains(a,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],
function(a,d,b,c,e){function f(a,c){var f=a.resize?a.resize(c):b.setMarginBox(a.domNode,c);f?e.mixin(a,f):(e.mixin(a,b.getMarginBox(a.domNode)),e.mixin(a,c))}var g={marginBox2contentBox:function(a,e){var f=c.getComputedStyle(a),d=b.getMarginExtents(a,f),g=b.getPadBorderExtents(a,f);return{l:c.toPixelValue(a,f.paddingLeft),t:c.toPixelValue(a,f.paddingTop),w:e.w-(d.w+g.w),h:e.h-(d.h+g.h)}},layoutChildren:function(b,c,g,l,n){c=e.mixin({},c);d.add(b,"dijitLayoutContainer");g=a.filter(g,function(a){return"center"!=
a.region&&"client"!=a.layoutAlign}).concat(a.filter(g,function(a){return"center"==a.region||"client"==a.layoutAlign}));a.forEach(g,function(a){var b=a.domNode,e=a.region||a.layoutAlign;if(!e)throw Error("No region setting for "+a.id);var g=b.style;g.left=c.l+"px";g.top=c.t+"px";g.position="absolute";d.add(b,"dijitAlign"+(e.substring(0,1).toUpperCase()+e.substring(1)));b={};l&&l==a.id&&(b["top"==a.region||"bottom"==a.region?"h":"w"]=n);"leading"==e&&(e=a.isLeftToRight()?"left":"right");"trailing"==
e&&(e=a.isLeftToRight()?"right":"left");"top"==e||"bottom"==e?(b.w=c.w,f(a,b),c.h-=a.h,"top"==e?c.t+=a.h:g.top=c.t+c.h+"px"):"left"==e||"right"==e?(b.h=c.h,f(a,b),c.w-=a.w,"left"==e?c.l+=a.w:g.left=c.l+c.w+"px"):("client"==e||"center"==e)&&f(a,c)})}};e.setObject("dijit.layout.utils",g);return g})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(a,d,b,c,e,f,g){var h=0,k={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,
"")},_emptyNode:f.empty,_setNodeContent:function(a,b){f.empty(a);if(b)if("number"==typeof b&&(b=b.toString()),"string"==typeof b&&(b=f.toDom(b,a.ownerDocument)),!b.nodeType&&d.isArrayLike(b))for(var c=b.length,e=0;e<b.length;e=c==b.length?e+1:0)f.place(b[e],a,"last");else f.place(b,a,"last");return a},_ContentSetter:c("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:a._scopeName,startup:!0,constructor:function(a,b){d.mixin(this,
a||{});b=this.node=e.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",h++].join("_"))},set:function(a,b){void 0!==a&&(this.content=a);b&&this._mixin(b);this.onBegin();this.setContent();var c=this.onEnd();return c&&c.then?c:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=k._setNodeContent(a,this.content)}catch(b){var c=this.onContentError(b);try{a.innerHTML=c}catch(e){console.error("Fatal "+this.declaredClass+
".setContent could not change content due to "+e.message,e)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(b.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);f.empty(this.node)},onBegin:function(){var a=this.content;if(d.isString(a)&&(this.cleanContent&&(a=k._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=this.node;try{var c={};b.forEach(["dir",
"lang","textDir"],function(a){this[a]&&(c[a]=this[a])},this);var e=this;this.parseDeferred=g.parse({rootNode:a,noStart:!this.startup,inherited:c,scope:this.parserScope}).then(function(a){return e.parseResults=a},function(a){e._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(f){this._onError("Content",f,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,c){a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&k._setNodeContent(this.node,a,!0)}}),set:function(a,
b,c){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),b="");"number"==typeof b&&(b=b.toString());return c?(new k._ContentSetter(d.mixin(c,{content:b,node:a}))).set():k._setNodeContent(a,b,!0)}};d.setObject("dojo.html",k);return k})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(a,
d,b,c,e,f,g,h,k,m,l,n,p,r,s,q){function t(a){return eval("("+a+")")}function u(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<x){var b=a._nameCaseMap={},e;for(e in c)"_"!==e.charAt(0)&&(b[e.toLowerCase()]=e);b._extendCnt=x}return b}function v(c,e){e||(e=a);var f=e._dojoParserCtorMap||(e._dojoParserCtorMap={}),d=c.join();if(!f[d]){for(var g=[],h=0,k=c.length;h<k;h++){var l=c[h];g[g.length]=f[l]=f[l]||b.getObject(l)||~l.indexOf("/")&&e(l)}h=g.shift();f[d]=g.length?h.createSubclass?h.createSubclass(g):
h.extend.apply(h,g):h}return f[d]}new Date("X");var x=0;k.after(b,"extend",function(){x++},!0);var w={_clearCache:function(){x++;_ctorMap={}},_functionFromScript:function(a,b){var e="",f="",d=a.getAttribute(b+"args")||a.getAttribute("args"),g=a.getAttribute("with"),d=(d||"").split(/\s*,\s*/);g&&g.length&&c.forEach(g.split(/\s*,\s*/),function(a){e+="with("+a+"){";f+="}"});return new Function(d,e+a.innerHTML+f)},instantiate:function(a,b,e){b=b||{};e=e||{};var f=(e.scope||d._scopeName)+"Type",g="data-"+
(e.scope||d._scopeName)+"-",h=g+"type",k=g+"mixins",l=[];c.forEach(a,function(a){var c=f in b?b[f]:a.getAttribute(h)||a.getAttribute(f);if(c){var e=a.getAttribute(k),c=e?[c].concat(e.split(/\s*,\s*/)):[c];l.push({node:a,types:c})}});return this._instantiate(l,b,e)},_instantiate:function(a,b,e,f){function d(a){!b._started&&!e.noStart&&c.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}a=c.map(a,function(a){var c=a.ctor||v(a.types,e.contextRequire);if(!c)throw Error("Unable to resolve constructor for: '"+
a.types.join()+"'");return this.construct(c,a.node,b,e,a.scripts,a.inherited)},this);return f?m(a).then(d):d(a)},construct:function(a,e,f,g,m,n){function q(a){M&&b.setObject(M,a);for(D=0;D<Q.length;D++)k[Q[D].advice||"after"](a,Q[D].method,b.hitch(a,Q[D].func),!0);for(D=0;D<T.length;D++)T[D].call(a);for(D=0;D<R.length;D++)a.watch(R[D].prop,R[D].func);for(D=0;D<S.length;D++)s(a,S[D].event,S[D].func);return a}var F=a&&a.prototype;g=g||{};var I={};g.defaults&&b.mixin(I,g.defaults);n&&b.mixin(I,n);var v;
p("dom-attributes-explicit")?v=e.attributes:p("dom-attributes-specified-flag")?v=c.filter(e.attributes,function(a){return a.specified}):(n=(/^input$|^img$/i.test(e.nodeName)?e:e.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),v=c.map(n.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==e.nodeName&&"value"==a||"enctype"==b?e.getAttribute(b):e.getAttributeNode(b).value}}));var w=g.scope||d._scopeName;
n="data-"+w+"-";var x={};"dojo"!==w&&(x[n+"props"]="data-dojo-props",x[n+"type"]="data-dojo-type",x[n+"mixins"]="data-dojo-mixins",x[w+"type"]="dojotype",x[n+"id"]="data-dojo-id");for(var D=0,C,w=[],M,P;C=v[D++];){var N=C.name,O=N.toLowerCase();C=C.value;switch(x[O]||O){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":P=C;break;case "data-dojo-id":case "jsid":M=C;break;case "data-dojo-attach-point":case "dojoattachpoint":I.dojoAttachPoint=C;break;case "data-dojo-attach-event":case "dojoattachevent":I.dojoAttachEvent=
C;break;case "class":I["class"]=e.className;break;case "style":I.style=e.style&&e.style.cssText;break;default:if(N in F||(N=u(a)[O]||N),N in F)switch(typeof F[N]){case "string":I[N]=C;break;case "number":I[N]=C.length?Number(C):NaN;break;case "boolean":I[N]="false"!=C.toLowerCase();break;case "function":""===C||-1!=C.search(/[^\w\.]+/i)?I[N]=new Function(C):I[N]=b.getObject(C,!1)||new Function(C);w.push(N);break;default:O=F[N],I[N]=O&&"length"in O?C?C.split(/\s*,\s*/):[]:O instanceof Date?""==C?new Date(""):
"now"==C?new Date:l.fromISOString(C):O instanceof h?d.baseUrl+C:t(C)}else I[N]=C}}for(v=0;v<w.length;v++)x=w[v].toLowerCase(),e.removeAttribute(x),e[x]=null;if(P)try{P=t.call(g.propsThis,"{"+P+"}"),b.mixin(I,P)}catch(U){throw Error(U.toString()+" in data-dojo-props\x3d'"+P+"'");}b.mixin(I,f);m||(m=a&&(a._noScript||F._noScript)?[]:r("\x3e script[type^\x3d'dojo/']",e));var Q=[],T=[],R=[],S=[];if(m)for(D=0;D<m.length;D++)x=m[D],e.removeChild(x),f=x.getAttribute(n+"event")||x.getAttribute("event"),g=
x.getAttribute(n+"prop"),P=x.getAttribute(n+"method"),w=x.getAttribute(n+"advice"),v=x.getAttribute("type"),x=this._functionFromScript(x,n),f?"dojo/connect"==v?Q.push({method:f,func:x}):"dojo/on"==v?S.push({event:f,func:x}):I[f]=x:"dojo/aspect"==v?Q.push({method:P,advice:w,func:x}):"dojo/watch"==v?R.push({prop:g,func:x}):T.push(x);a=(m=a.markupFactory||F.markupFactory)?m(I,e,a):new a(I,e);return a.then?a.then(q):q(a)},scan:function(b,e){function f(a){if(!a.inherited){a.inherited={};var b=a.node,c=
f(a.parent),b={dir:b.getAttribute("dir")||c.dir,lang:b.getAttribute("lang")||c.lang,textDir:b.getAttribute(r)||c.textDir},e;for(e in b)b[e]&&(a.inherited[e]=b[e])}return a.inherited}var g=[],h=[],k={},l=(e.scope||d._scopeName)+"Type",m="data-"+(e.scope||d._scopeName)+"-",p=m+"type",r=m+"textdir",m=m+"mixins",q=b.firstChild,s=e.inherited;if(!s){var t=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&t(a.parentNode,b)},s={dir:t(b,"dir"),lang:t(b,"lang"),textDir:t(b,r)},u;for(u in s)s[u]||
delete s[u]}for(var s={inherited:s},M,x;;)if(q)if(1!=q.nodeType)q=q.nextSibling;else if(M&&"script"==q.nodeName.toLowerCase())(w=q.getAttribute("type"))&&/^dojo\/\w/i.test(w)&&M.push(q),q=q.nextSibling;else if(x)q=q.nextSibling;else{var w=q.getAttribute(p)||q.getAttribute(l);u=q.firstChild;if(!w&&(!u||3==u.nodeType&&!u.nextSibling))q=q.nextSibling;else{x=null;if(w){var O=q.getAttribute(m);M=O?[w].concat(O.split(/\s*,\s*/)):[w];try{x=v(M,e.contextRequire)}catch(U){}x||c.forEach(M,function(a){~a.indexOf("/")&&
!k[a]&&(k[a]=!0,h[h.length]=a)});O=x&&!x.prototype._noScript?[]:null;s={types:M,ctor:x,parent:s,node:q,scripts:O};s.inherited=f(s);g.push(s)}else s={node:q,scripts:M,parent:s};M=O;x=q.stopParser||x&&x.prototype.stopParser&&!e.template;q=u}}else{if(!s||!s.node)break;q=s.node.nextSibling;x=!1;s=s.parent;M=s.scripts}var Q=new n;h.length?(e.contextRequire||a)(h,function(){Q.resolve(c.filter(g,function(a){if(!a.ctor)try{a.ctor=v(a.types,e.contextRequire)}catch(b){}for(var c=a.parent;c&&!c.types;)c=c.parent;
var f=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(f&&f.stopParser&&!e.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))}):Q.resolve(g);return Q.promise},_require:function(c,e){var f=t("{"+c.innerHTML+"}"),d=[],g=[],h=new n,k=e&&e.contextRequire||a,l;for(l in f)d.push(l),g.push(f[l]);k(g,function(){for(var a=0;a<d.length;a++)b.setObject(d[a],arguments[a]);h.resolve(arguments)});return h.promise},_scanAmd:function(a,b){var c=new n,e=c.promise;c.resolve(!0);
var f=this;r("script[type\x3d'dojo/require']",a).forEach(function(a){e=e.then(function(){return f._require(a,b)});a.parentNode.removeChild(a)});return e},parse:function(a,c){a&&("string"!=typeof a&&!("nodeType"in a))&&(c=a,a=c.rootNode);var e=a?f.byId(a):g.body();c=c||{};var d=c.template?{template:!0}:{},h=[],k=this,l=this._scanAmd(e,c).then(function(){return k.scan(e,c)}).then(function(a){return k._instantiate(a,d,c,!0)}).then(function(a){return h=h.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});b.mixin(h,l);return h}};d.parser=w;e.parseOnLoad&&q(100,w,"parse");return w})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(a,d){var b={};a.setObject("dojo.date.stamp",b);b.fromISOString=function(a,e){b._isoRegExp||(b._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var f=b._isoRegExp.exec(a),g=null;if(f){f.shift();f[1]&&f[1]--;f[6]&&(f[6]*=1E3);e&&(e=new Date(e),d.forEach(d.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(a){return e["get"+a]()}),function(a,b){f[b]=f[b]||a}));g=new Date(f[0]||1970,f[1]||0,f[2]||1,f[3]||0,f[4]||0,f[5]||0,f[6]||0);100>f[0]&&g.setFullYear(f[0]||1970);var h=0,k=f[7]&&f[7].charAt(0);"Z"!=k&&(h=60*(f[8]||0)+(Number(f[9])||0),"-"!=k&&(h*=-1));k&&(h-=g.getTimezoneOffset());h&&g.setTime(g.getTime()+6E4*h)}return g};b.toISOString=function(a,b){var f=function(a){return 10>a?"0"+a:a};b=b||{};var d=[],h=b.zulu?"getUTC":"get",k="";"time"!=b.selector&&(k=a[h+"FullYear"](),k=["0000".substr((k+
"").length)+k,f(a[h+"Month"]()+1),f(a[h+"Date"]())].join("-"));d.push(k);if("date"!=b.selector){k=[f(a[h+"Hours"]()),f(a[h+"Minutes"]()),f(a[h+"Seconds"]())].join(":");h=a[h+"Milliseconds"]();b.milliseconds&&(k+="."+(100>h?"0":"")+f(h));if(b.zulu)k+="Z";else if("time"!=b.selector)var h=a.getTimezoneOffset(),m=Math.abs(h),k=k+((0<h?"-":"+")+f(Math.floor(m/60))+":"+f(m%60));d.push(k)}return d.join("T")};return b})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],
function(a,d,b,c){a=a(c.Credential,{});d("extend-esri")&&(b.Credential=a);return a})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/regexp ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),function(a,d,b,c,e,f,g,h,k,m,l,n,p,r,s,q,t,u,v,x,w){var z={},A=function(a){var b=
(new g(a.owningSystemUrl)).host;a=(new g(a.server)).host;var c=/.+\.arcgis\.com$/i;return c.test(b)&&c.test(a)},y=function(a,b){return!(!A(a)||!b||!c.some(b,function(b){return b.test(a.server)}))},B,E=a(v,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=b.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthHash()},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,
signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_adminSvcs:/\/admin\/services(\/|$)/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},
{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(a){var b=this.serverInfos;b?(a=c.filter(a,function(a){return!this.findServerInfo(a.server)},this),this.serverInfos=b.concat(a)):
this.serverInfos=a;c.forEach(a,function(a){a.owningSystemUrl&&this._portals.push(a.owningSystemUrl);if(a.hasPortal){this._portals.push(a.server);var b=p.defaults.io.corsEnabledServers,c=this._getOrigin(a.tokenServiceUrl);q.canUseXhr(a.server)||b.push(a.server.replace(/^https?:\/\//i,""));q.canUseXhr(c)||b.push(c.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(a){var b=this.oAuthInfos;b?(a=c.filter(a,function(a){return!this.findOAuthInfo(a.portalUrl)},this),this.oAuthInfos=b.concat(a)):
this.oAuthInfos=a},registerToken:function(a){var c=this._sanitizeUrl(a.server),e=this.findServerInfo(c),f=!0,d;e||(e=new s,e.server=this._getServerInstanceRoot(c),e.tokenServiceUrl=this._getTokenSvcUrl(c),e.hasPortal=!0,this.registerServers([e]));(d=this.findCredential(c,a.userId))?(b.mixin(d,a),f=!1):(d=new B({userId:a.userId,server:e.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:this._isServerRsrc(c)?"server":"portal"}),d.resources=[c],this.credentials.push(d));d.onTokenChange(!1);f||d.refreshServerTokens()},
toJson:function(){return r.fixJson({serverInfos:c.map(this.serverInfos,function(a){return a.toJson()}),oAuthInfos:c.map(this.oAuthInfos,function(a){return a.toJson()}),credentials:c.map(this.credentials,function(a){return a.toJson()})})},initialize:function(a){if(a){b.isString(a)&&(a=f.fromJson(a));var e=a.serverInfos,d=a.oAuthInfos;a=a.credentials;if(e){var g=[];c.forEach(e,function(a){a.server&&a.tokenServiceUrl&&g.push(a.declaredClass?a:new s(a))});g.length&&this.registerServers(g)}if(d){var h=
[];c.forEach(d,function(a){a.appId&&h.push(a.declaredClass?a:new w(a))});h.length&&this.registerOAuthInfos(h)}a&&c.forEach(a,function(a){a.userId&&(a.server&&a.token&&a.expires&&a.expires>(new Date).getTime())&&(a=a.declaredClass?a:new B(a),a.onTokenChange(),this.credentials.push(a))},this)}},findServerInfo:function(a){var b;a=this._sanitizeUrl(a);c.some(this.serverInfos,function(c){this._hasSameServerInstance(c.server,a)&&(b=c);return!!b},this);return b},findOAuthInfo:function(a){var b;a=this._sanitizeUrl(a);
c.some(this.oAuthInfos,function(c){this._hasSameServerInstance(c.portalUrl,a)&&(b=c);return!!b},this);return b},findCredential:function(a,b){var e,f;a=this._sanitizeUrl(a);f=this._isServerRsrc(a)?"server":"portal";b?c.some(this.credentials,function(c){this._hasSameServerInstance(c.server,a)&&(b===c.userId&&c.scope===f)&&(e=c);return!!e},this):c.some(this.credentials,function(b){this._hasSameServerInstance(b.server,a)&&(-1!==this._getIdenticalSvcIdx(a,b)&&b.scope===f)&&(e=b);return!!e},this);return e},
getCredential:function(a,c){var f,g,h=!0;r.isDefined(c)&&(b.isObject(c)?(f=!!c.token,g=c.error,h=!1!==c.prompt):f=c);a=this._sanitizeUrl(a);var k=new e(t._dfdCanceller),l=this._isAdminResource(a),m=f&&this._doPortalSignIn(a)?this._getEsriAuthCookie():null;f=f?this.findCredential(a):null;if(m||f)return h=Error("You are currently signed in as: '"+(m&&m.email||f&&f.userId)+"'. You do not have access to this resource: "+a),h.code="IdentityManagerBase.1",h.httpCode=g&&g.httpCode,h.messageCode=g?g.messageCode:
null,h.subcode=g?g.subcode:null,h.details=g?g.details:null,h.log=d.isDebug,k.errback(h),k;if(g=this._findCredential(a,c))return k.callback(g),k;if(g=this.findServerInfo(a))!g.hasServer&&this._isServerRsrc(a)&&(g._restInfoDfd=this._getTokenSvcUrl(a,!0),g.hasServer=!0);else{m=this._getTokenSvcUrl(a);if(!m)return h=Error("Unknown resource - could not find token service endpoint."),h.code="IdentityManagerBase.2",h.log=d.isDebug,k.errback(h),k;g=new s;g.server=this._getServerInstanceRoot(a);b.isString(m)?
(g.tokenServiceUrl=m,g.hasPortal=!0):(g._restInfoDfd=m,g.hasServer=!0);this.registerServers([g])}h&&(g.hasPortal&&void 0===g._selfReq&&!this._findOAuthInfo(a))&&(g._selfReq={owningTenant:c&&c.owningTenant,selfDfd:this._getPortalSelf(g.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),a)});return this._enqueue(a,g,c,k,l)},getResourceName:function(a){return this._isRESTService(a)?a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&
a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""},generateToken:function(a,c,e){var f,h,k,l,m,p,r=this._rePortalTokenSvc.test(a.tokenServiceUrl),s=new g(window.location.href.toLowerCase()),t=this._getEsriAuthCookie(),v,x=!c;l=a.shortLivedTokenValidity;var w;c&&(w=n.id.tokenValidity||l||n.id.defaultTokenValidity,w>l&&(w=l));e&&(f=e.isAdmin,h=e.serverUrl,k=e.token,p=e.ssl,a.customParameters=e.customParameters);
if(f)l=a.adminTokenServiceUrl;else{l=a.tokenServiceUrl;m=new g(l.toLowerCase());t&&(v=(v=t.auth_tier)&&v.toLowerCase());if(("web"===v||a.webTierAuth)&&e&&e.serverUrl&&!p&&"http"===s.scheme&&(q.hasSameOrigin(s.uri,l,!0)||"https"===m.scheme&&s.host===m.host&&"7080"===s.port&&"7443"===m.port))l=l.replace(/^https:/i,"http:").replace(/:7443/i,":7080");x&&r&&(l=l.replace(/\/rest/i,""))}f=b.mixin({url:l,content:b.mixin({request:"getToken",username:c&&c.username,password:c&&c.password,serverUrl:h,token:k,
expiration:w,referer:f||r?window.location.host:null,client:f?"referer":null,f:"json"},a.customParameters),handleAs:"json",callbackParamName:x?"callback":void 0},e&&e.ioArgs);e={usePost:!x,disableIdentityLookup:!0,useProxy:this._useProxy(a,e)};r||(f.withCredentials=!1);r=u(f,e);r.addCallback(function(b){if(!b||!b.token)return b=Error("Unable to generate token"),b.code="IdentityManagerBase.3",b.log=d.isDebug,b;var e=a.server;z[e]||(z[e]={});c&&(z[e][c.username]=c.password);b.validity=w;return b});r.addErrback(function(a){});
return r},isBusy:function(){return!!this._busy},checkSignInStatus:function(a){return this.getCredential(a,{prompt:!1})},setRedirectionHandler:function(a){this._redirectFunc=a},setProtocolErrorHandler:function(a){this._protocolFunc=a},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var a=this.credentials.slice();c.forEach(a,function(a){a.destroy()})}this.onCredentialsDestroy()},_getOAuthHash:function(){var a=
window.location.hash;if(a){"#"===a.charAt(0)&&(a=a.substring(1));var a=m.queryToObject(a),b=!1;a.access_token&&a.expires_in&&a.state&&a.hasOwnProperty("username")?(a.state=f.fromJson(a.state),this._oAuthHash=a,b=!0):a.error&&a.error_description&&"access_denied"===a.error&&(b=!0);if(b&&(!h("ie")||8<h("ie")))window.location.hash=""}},_findCredential:function(a,b){var e=-1,f,d,g,h,k=b&&b.token;f=b&&b.resource;var l=this._isServerRsrc(a)?"server":"portal",m=c.filter(this.credentials,function(b){return this._hasSameServerInstance(b.server,
a)&&b.scope===l},this);a=f||a;if(m.length)if(1===m.length)if(f=m[0],g=(d=(h=this.findServerInfo(f.server))&&h.owningSystemUrl)&&this.findCredential(d,f.userId),e=this._getIdenticalSvcIdx(a,f),k)-1!==e&&(f.resources.splice(e,1),this._removeResource(a,g));else return-1===e&&f.resources.push(a),this._addResource(a,g),f;else{var n,p;c.some(m,function(b){p=this._getIdenticalSvcIdx(a,b);return-1!==p?(n=b,g=(d=(h=this.findServerInfo(n.server))&&h.owningSystemUrl)&&this.findCredential(d,n.userId),e=p,!0):
!1},this);if(k)n&&(n.resources.splice(e,1),this._removeResource(a,g));else if(n)return this._addResource(a,g),n}},_findOAuthInfo:function(a){var b=this.findOAuthInfo(a);b||c.some(this.oAuthInfos,function(c){this._isIdProvider(c.portalUrl,a)&&(b=c);return!!b},this);return b},_addResource:function(a,b){b&&-1===this._getIdenticalSvcIdx(a,b)&&b.resources.push(a)},_removeResource:function(a,b){var c=-1;b&&(c=this._getIdenticalSvcIdx(a,b),-1<c&&b.resources.splice(c,1))},_useProxy:function(a,b){return b&&
b.isAdmin&&!q.hasSameOrigin(a.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&10.1==a.currentVersion&&!q.hasSameOrigin(a.tokenServiceUrl,window.location.href)},_getOrigin:function(a){a=new g(a);return a.scheme+"://"+a.host+(r.isDefined(a.port)?":"+a.port:"")},_getServerInstanceRoot:function(a){var b=a.toLowerCase(),c=b.indexOf(this._agsRest);-1===c&&this._isAdminResource(a)&&(c=b.indexOf("/admin"));-1===c&&(c=b.indexOf("/sharing"));-1===c&&"/"===b.substr(-1)&&
(c=b.length-1);return-1<c?a.substring(0,c):a},_hasSameServerInstance:function(a,b){a=a.toLowerCase();b=this._getServerInstanceRoot(b).toLowerCase();a=a.substr(a.indexOf(":"));b=b.substr(b.indexOf(":"));return a===b},_sanitizeUrl:function(a){a=q.fixUrl(b.trim(a));var c=(p.defaults.io.proxyUrl||"").toLowerCase(),e=c?a.toLowerCase().indexOf(c+"?"):-1;-1!==e&&(a=a.substring(e+c.length+1));return q.urlToObject(a).path},_isRESTService:function(a){return-1<a.indexOf(this._agsRest)},_isAdminResource:function(a){return this._agsAdmin.test(a)||
this._adminSvcs.test(a)},_isServerRsrc:function(a){return this._isRESTService(a)||this._isAdminResource(a)},_isIdenticalService:function(a,b){var c;if(this._isRESTService(a)&&this._isRESTService(b)){var e=this._getSuffix(a).toLowerCase(),f=this._getSuffix(b).toLowerCase();c=e===f;c||(c=/(.*)\/(MapServer|FeatureServer).*/ig,c=e.replace(c,"$1")===f.replace(c,"$1"))}else this._isAdminResource(a)&&this._isAdminResource(b)?c=!0:!this._isServerRsrc(a)&&(!this._isServerRsrc(b)&&this._isPortalDomain(a))&&
(c=!0);return c},_isPortalDomain:function(a){a=a.toLowerCase();var e=(new g(a)).authority,f=this._portalConfig,d=-1!==e.indexOf(this._agolSuffix);!d&&f&&(d=this._hasSameServerInstance(this._getServerInstanceRoot(f.restBaseUrl),a));if(!d){if(!this._arcgisUrl&&(f=b.getObject("esri.arcgis.utils.arcgisUrl")))this._arcgisUrl=(new g(f)).authority;this._arcgisUrl&&(d=this._arcgisUrl.toLowerCase()===e)}d||(d=c.some(this._portals,function(b){return this._hasSameServerInstance(b,a)},this));return d=d||this._agsPortal.test(a)},
_isIdProvider:function(a,b){var e=-1,f=-1;c.forEach(this._gwDomains,function(c,d){-1===e&&c.regex.test(a)&&(e=d);-1===f&&c.regex.test(b)&&(f=d)});var d=!1;if(-1<e&&-1<f)if(0===e||4===e){if(0===f||4===f)d=!0}else if(1===e){if(1===f||2===f)d=!0}else 2===e?2===f&&(d=!0):3===e&&3===f&&(d=!0);if(!d){var g=this.findServerInfo(b),h=g&&g.owningSystemUrl;h&&(A(g)&&this._isPortalDomain(h)&&this._isIdProvider(a,h))&&(d=!0)}return d},_isPublic:function(a){a=this._sanitizeUrl(a);return c.some(this._publicUrls,
function(b){return b.test(a)})},_getIdenticalSvcIdx:function(a,b){var e=-1;c.some(b.resources,function(b,c){return this._isIdenticalService(a,b)?(e=c,!0):!1},this);return e},_getSuffix:function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(a){var b,e;if((b=this._isRESTService(a))||this._isAdminResource(a))return e=a.toLowerCase().indexOf(b?this._agsRest:"/admin/"),b=a.substring(0,e)+"/admin/generateToken",a=a.substring(0,e)+"/rest/info",e=
u({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),e.adminUrl_=b,e;if(this._isPortalDomain(a)){var f="";c.some(this._gwDomains,function(b){b.regex.test(a)&&(f=b.tokenServiceUrl);return!!f});f||c.some(this._portals,function(b){this._hasSameServerInstance(b,a)&&(f=b+this._gwTokenUrl);return!!f},this);f||(e=a.toLowerCase().indexOf("/sharing"),-1!==e&&(f=a.substring(0,e)+this._gwTokenUrl));f||(f=this._getOrigin(a)+this._gwTokenUrl);f&&(b=(new g(a)).port,/^http:\/\//i.test(a)&&
"7080"===b&&(f=f.replace(/:7080/i,":7443")),f=f.replace(/http:/i,"https:"));return f}if(-1!==a.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_getPortalSelf:function(a,b){"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(b)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return u({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},
_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var a;if(k.isSupported()){var b=this._getAllCookies("esri_auth"),c;for(c=0;c<b.length;c++){var e=f.fromJson(b[c]);if(e.portalApp){a=e;break}}}return a},_getAllCookies:function(a){var b=[],c=document.cookie.match(RegExp("(?:^|; )"+l.escapeString(a)+"\x3d([^;]*)","g"));if(c)for(a=0;a<c.length;a++){var e=c[a],f=e.indexOf("\x3d");-1<f&&(e=e.substring(f+1),b.push(decodeURIComponent(e)))}return b},_doPortalSignIn:function(a){if(k.isSupported()){var b=
this._getEsriAuthCookie(),c=this._portalConfig,e=window.location.href,f=this.findServerInfo(a);if(this.useSignInPage&&(c||this._isPortalDomain(e)||b)&&(f?f.hasPortal||f.owningSystemUrl&&this._isPortalDomain(f.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(e,a)||c&&(this._hasSameServerInstance(this._getServerInstanceRoot(c.restBaseUrl),a)||this._isIdProvider(c.restBaseUrl,a))||q.hasSameOrigin(e,a,!0)))return!0}return!1},_checkProtocol:function(a,c,e,f){var g=!0;f=f?c.adminTokenServiceUrl:
c.tokenServiceUrl;if(0===b.trim(f).toLowerCase().indexOf("https:")&&0!==window.location.href.toLowerCase().indexOf("https:")&&(!p.defaults.io.useCors||!q.canUseXhr(f)&&!q.canUseXhr(q.getProxyUrl(!0).path)))g=this._protocolFunc?!!this._protocolFunc({resourceUrl:a,serverInfo:c}):!1,g||(a=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),a.code="IdentityManagerBase.4",a.log=d.isDebug,e(a));return g},_enqueue:function(a,b,c,f,d,g){f||(f=new e(t._dfdCanceller));f.resUrl_=
a;f.sinfo_=b;f.options_=c;f.admin_=d;f.refresh_=g;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(f)):this._xoReqs.push(f):this._doSignIn(f);return f},_doSignIn:function(a){this._busy=a;var e=this,f=function(b){var f=a.options_&&a.options_.resource,d=a.resUrl_,g=a.refresh_,h=!1;-1===c.indexOf(e.credentials,b)&&(g&&-1!==c.indexOf(e.credentials,g)?(g.userId=b.userId,
g.token=b.token,g.expires=b.expires,g.validity=b.validity,g.ssl=b.ssl,g.creationTime=b.creationTime,h=!0,b=g):e.credentials.push(b));b.resources||(b.resources=[]);b.resources.push(f||d);b.scope=e._isServerRsrc(d)?"server":"portal";b.onTokenChange();var f=e._soReqs,k={};e._soReqs=[];c.forEach(f,function(a){if(!this._isIdenticalService(d,a.resUrl_)){var c=this._getSuffix(a.resUrl_);k[c]||(k[c]=!0,b.resources.push(a.resUrl_))}},e);a.callback(b);c.forEach(f,function(a){a.callback(b)});e._busy=a.resUrl_=
a.sinfo_=a.refresh_=null;if(!h)e.onCredentialCreate({credential:b});e._soReqs.length&&e._doSignIn(e._soReqs.shift());e._xoReqs.length&&e._doSignIn(e._xoReqs.shift())},g=function(b){a.errback(b);e._busy=a.resUrl_=a.sinfo_=a.refresh_=null;e._soReqs.length&&e._doSignIn(e._soReqs.shift());e._xoReqs.length&&e._doSignIn(e._xoReqs.shift())},h=function(b,c,h,k){var l=a.sinfo_,m=!a.options_||!1!==a.options_.prompt,n=l.hasPortal&&e._findOAuthInfo(a.resUrl_);e._doPortalSignIn(a.resUrl_)?(b=e._getEsriAuthCookie(),
n=e._portalConfig,b?f(new B({userId:b.email,server:l.server,token:b.token,expires:null})):m?(m="",b=window.location.href,m=e.signInPage?e.signInPage:n?n.baseUrl+n.signin:e._isIdProvider(b,a.resUrl_)?e._getOrigin(b)+"/home/signin.html":l.tokenServiceUrl.replace(e._rePortalTokenSvc,"")+"/home/signin.html",m=m.replace(/http:/i,"https:"),n&&!1===n.useSSL&&(m=m.replace(/https:/i,"http:")),0===b.toLowerCase().replace("https","http").indexOf(m.toLowerCase().replace("https","http"))?(l=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+
a.resUrl_),l.code="IdentityManagerBase.5",l.log=d.isDebug,g(l)):e._redirectFunc?e._redirectFunc({signInPage:m,returnUrlParamName:"returnUrl",returnUrl:b,resourceUrl:a.resUrl_,serverInfo:l}):window.location=m+"?returnUrl\x3d"+window.escape(b)):(l=Error("User is not signed in."),l.code="IdentityManagerBase.6",l.log=d.isDebug,g(l))):b?f(new B({userId:b,server:l.server,token:h,expires:r.isDefined(k)?Number(k):null,ssl:!!c})):n?(b=n._oAuthCred,b||(c=new x(n,window.localStorage),h=new x(n,window.sessionStorage),
c.isValid()&&h.isValid()?c.expires>h.expires?(b=c,h.destroy()):(b=h,c.destroy()):b=c.isValid()?c:h,n._oAuthCred=b),b.isValid()?f(new B({userId:b.userId,server:l.server,token:b.token,expires:b.expires,ssl:b.ssl,_oAuthCred:b})):e._oAuthHash&&e._oAuthHash.state.portalUrl===n.portalUrl?(m=e._oAuthHash,l=new B({userId:m.username,server:l.server,token:m.access_token,expires:(new Date).getTime()+1E3*Number(m.expires_in),ssl:"true"===m.ssl,oAuthState:m.state,_oAuthCred:b}),b.storage=m.persist?window.localStorage:
window.sessionStorage,b.token=l.token,b.expires=l.expires,b.userId=l.userId,b.ssl=l.ssl,b.save(),e._oAuthHash=null,f(l)):m?a._pendingDfd=e.oAuthSignIn(a.resUrl_,l,n,a.options_).addCallbacks(f,g):(l=Error("User is not signed in."),l.code="IdentityManagerBase.6",l.log=d.isDebug,g(l))):m?e._checkProtocol(a.resUrl_,l,g,a.admin_)&&(m=a.options_,a.admin_&&(m=m||{},m.isAdmin=!0),a._pendingDfd=e.signIn(a.resUrl_,l,m).addCallbacks(f,g)):(l=Error("User is not signed in."),l.code="IdentityManagerBase.6",l.log=
d.isDebug,g(l))},k=function(){var b=a.sinfo_,d=b.owningSystemUrl,h=a.options_,k,l,m,n;h&&(k=h.token,l=h.error,m=h.prompt);n=e._findCredential(d,{token:k,resource:a.resUrl_});!n&&A(b)&&c.some(e.credentials,function(a){this._isIdProvider(d,a.server)&&(n=a);return!!n},e);n?(h=e.findCredential(a.resUrl_,n.userId))?f(h):y(b,e._legacyFed)?(h=n.toJson(),h.server=b.server,h.resources=null,f(new B(h))):(a._pendingDfd=e.generateToken(e.findServerInfo(n.server),null,{serverUrl:a.resUrl_,token:n.token,ssl:n.ssl})).addCallbacks(function(c){f(new B({userId:n.userId,
server:b.server,token:c.token,expires:r.isDefined(c.expires)?Number(c.expires):null,ssl:!!c.ssl,isAdmin:a.admin_,validity:c.validity}))},g):(e._busy=null,k&&(a.options_.token=null),(a._pendingDfd=e.getCredential(d.replace(/\/?$/,"/sharing"),{resource:a.resUrl_,owningTenant:b.owningTenant,token:k,error:l,prompt:m})).addCallbacks(function(b){e._enqueue(a.resUrl_,a.sinfo_,a.options_,a,a.admin_)},function(a){g(a)}))},l=a.sinfo_.owningSystemUrl,m=this._isServerRsrc(a.resUrl_),n=a.sinfo_._restInfoDfd;n?
n.addCallbacks(function(c){var f=a.sinfo_;f.adminTokenServiceUrl=f._restInfoDfd.adminUrl_;f._restInfoDfd=null;f.tokenServiceUrl=b.getObject("authInfo.tokenServicesUrl",!1,c)||b.getObject("authInfo.tokenServiceUrl",!1,c)||b.getObject("tokenServiceUrl",!1,c);f.shortLivedTokenValidity=b.getObject("authInfo.shortLivedTokenValidity",!1,c);f.currentVersion=c.currentVersion;f.owningTenant=c.owningTenant;(c=f.owningSystemUrl=c.owningSystemUrl)&&e._portals.push(c);m&&c?k():h()},function(){a.sinfo_._restInfoDfd=
null;var b=Error("Unknown resource - could not find token service endpoint.");b.code="IdentityManagerBase.2";b.log=d.isDebug;g(b)}):m&&l?k():a.sinfo_._selfReq?a.sinfo_._selfReq.selfDfd.then(function(b){var c={},f,d,g,h;b&&(f=b.user&&b.user.username,c.username=f,c.allSSL=b.allSSL,d=b.supportsOAuth,g=b.currentVersion,"multitenant"===b.portalMode&&(h=b.customBaseUrl));a.sinfo_.webTierAuth=!!f;return f&&e.normalizeWebTierAuth?e.generateToken(a.sinfo_,null,{ssl:c.allSSL}).always(function(a){c.portalToken=
a&&a.token;c.tokenExpiration=a&&a.expires;return c}):!f&&d&&4.4<=parseFloat(g)&&!e._doPortalSignIn(a.resUrl_)?e._generateOAuthInfo({portalUrl:a.sinfo_.server,customBaseUrl:h,owningTenant:a.sinfo_._selfReq.owningTenant}).always(function(){return c}):c}).always(function(b){a.sinfo_._selfReq=null;b?h(b.username,b.allSSL,b.portalToken,b.tokenExpiration):h()}):h()},_generateOAuthInfo:function(a){var b=this,c,f=a.portalUrl,d=a.customBaseUrl,g=a.owningTenant;if(a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&
!this._hasTestedIfAppIsOnPortal){c=window.location.href;var h=c.indexOf("?");-1<h&&(c=c.slice(0,h));h=c.search(/\/(apps|home)\//);c=-1<h?c.slice(0,h):null}a&&c?(this._hasTestedIfAppIsOnPortal=!0,a=u({url:c+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){b.defaultOAuthInfo=new w({appId:"arcgisonline",popup:!0,popupCallbackUrl:c+"/home/oauth-callback.html"})})):(a=new e,a.resolve(),a=a.promise);return a.then(function(){if(b.defaultOAuthInfo)return f=f.replace(/^http:/i,"https:"),
u({url:f+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:g,client_id:b.defaultOAuthInfo.appId,redirect_uri:q.getAbsoluteUrl(b.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(a){if(a.valid){var c=b.defaultOAuthInfo.clone();c.portalUrl=a.urlKey&&d?"https://"+a.urlKey+"."+d:f;b.oAuthInfos.push(c)}})})}});B=a(v,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(a){b.mixin(this,a);this.resources=this.resources||
[];r.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var a=this,b=this.resources&&this.resources[0],e=n.id.findServerInfo(this.server),f=e&&e.owningSystemUrl,d=!!f&&"server"===this.scope,g=d&&y(e,n.id._legacyFed),h=d&&n.id.findServerInfo(f),k,l=(k=e.webTierAuth)&&n.id.normalizeWebTierAuth,m=z[this.server],m=m&&m[this.userId],p={username:this.userId,password:m},q;if(!k||l)if(d&&!h&&c.some(n.id.serverInfos,function(a){n.id._isIdProvider(f,
a.server)&&(h=a);return!!h}),k=h&&n.id.findCredential(h.server,this.userId),!d||k)if(g)k.refreshToken();else{if(d)q={serverUrl:b,token:k&&k.token,ssl:k&&k.ssl};else if(l)p=null,q={ssl:this.ssl};else if(m)this.isAdmin&&(q={isAdmin:!0});else{var s;b&&(b=n.id._sanitizeUrl(b),this._enqueued=1,s=n.id._enqueue(b,e,null,null,this.isAdmin,this),s.addCallback(function(){a._enqueued=0;a.refreshServerTokens()}).addErrback(function(){a._enqueued=0}));return s}return n.id.generateToken(d?h:e,d?null:p,q).addCallback(function(b){a.token=
b.token;a.expires=r.isDefined(b.expires)?Number(b.expires):null;a.creationTime=(new Date).getTime();a.validity=b.validity;a.onTokenChange();a.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&c.forEach(n.id.credentials,function(a){var b=n.id.findServerInfo(a.server),c=b&&b.owningSystemUrl;if(a!==this&&a.userId===this.userId&&c&&"server"===a.scope&&(n.id._hasSameServerInstance(this.server,c)||n.id._isIdProvider(c,this.server)))y(b,n.id._legacyFed)?
(a.token=this.token,a.expires=this.expires,a.creationTime=this.creationTime,a.validity=this.validity,a.onTokenChange()):a.refreshToken()},this)},onTokenChange:function(a){clearTimeout(this._refreshTimer);var b=this.server&&n.id.findServerInfo(this.server),c=(b=b&&b.owningSystemUrl)&&n.id.findServerInfo(b);!1!==a&&((!b||"portal"===this.scope||c&&c.webTierAuth&&!n.id.normalizeWebTierAuth)&&(r.isDefined(this.expires)||r.isDefined(this.validity)))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=
this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var a=c.indexOf(n.id.credentials,this);-1<a&&n.id.credentials.splice(a,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var a=r.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,
scope:this.scope}),b=this.resources;b&&0<b.length&&(a.resources=b);return a},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var a=6E4*this.tokenRefreshBuffer,c=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>c&&(c=0);this._refreshTimer=setTimeout(b.hitch(this,this.refreshToken),c>a?c-a:c)}});E.Credential=B;h("extend-esri")&&(n.IdentityManagerBase=E);return E})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(a,d){a.cookie=
function(a,c,e){var f=document.cookie,g;if(1==arguments.length)g=(g=f.match(RegExp("(?:^|; )"+d.escapeString(a)+"\x3d([^;]*)")))?decodeURIComponent(g[1]):void 0;else{e=e||{};f=e.expires;if("number"==typeof f){var h=new Date;h.setTime(h.getTime()+864E5*f);f=e.expires=h}f&&f.toUTCString&&(e.expires=f.toUTCString());c=encodeURIComponent(c);var f=a+"\x3d"+c,k;for(k in e)f+="; "+k,h=e[k],!0!==h&&(f+="\x3d"+h);document.cookie=f}return g};a.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__",
"CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return a.cookie})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(a,d,b,c,e){a=a(null,{declaredClass:"esri.ServerInfo",constructor:function(a){d.mixin(this,a)},toJson:function(){return e.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,
adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});b("extend-esri")&&(c.ServerInfo=a);return a})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has","dojo/json"],function(a,d,b,c){d=d(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,
storage:null,expires:null,ssl:null,token:null,userId:null,constructor:function(a,b){this.oAuthInfo=a;this.storage=b;this._init()},isValid:function(){var a=!1;if(this.oAuthInfo&&this.token&&this.userId){var b=(new Date).getTime();this.expires>b&&(this.expires-b)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(a=!0)}return a},save:function(){if(this.storage){var a=this._load(),b=this.oAuthInfo;if(b&&b.authNamespace&&b.portalUrl){var d=a[b.authNamespace];d||(d=a[b.authNamespace]={});d[b.portalUrl]={expires:this.expires,
ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",c.stringify(a))}catch(h){}}}},destroy:function(){var a=this._load(),b=this.oAuthInfo;if(b&&b.authNamespace&&b.portalUrl&&this.storage){var d=a[b.authNamespace];if(d){delete d[b.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",c.stringify(a))}catch(h){}}}b&&(this.oAuthInfo=b._oAuthCred=null)},_init:function(){var a=this._load(),b=this.oAuthInfo;if(b&&(b.authNamespace&&b.portalUrl)&&(a=a[b.authNamespace]))if(a=
a[b.portalUrl])this.expires=a.expires,this.ssl=a.ssl,this.token=a.token,this.userId=a.userId},_load:function(){var a={};if(this.storage){var b=this.storage.getItem("esriJSAPIOAuth");if(b)try{a=c.parse(b)}catch(d){}}return a}});b("extend-esri")&&(a.OAuthCredential=d);return d})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(a,d,b,c,e){var f=b(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(a){c.mixin(this,
{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,showSocialLogins:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d480,width\x3d800,location,resizable,scrollbars,status"},a)},_oAuthCred:null,toJson:function(){return d.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,
showSocialLogins:this.showSocialLogins,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures})},clone:function(){return new f(this.toJson())}});e("extend-esri")&&c.setObject("arcgis.OAuthInfo",f,a);return f})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),function(a,d,b,c,e,f,
g,h,k,m){c("dijit-legacy-requires")&&g(0,function(){a(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});g=d("dijit.form.Button"+(c("dojo-bidi")?"_NoBidi":""),[h,k],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:m,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer()},
_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=f.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&b.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){e.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);!this.showLabel&&!("title"in this.params)&&(this.titleNode.title=
f.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});c("dojo-bidi")&&(g=d("dijit.form.Button",g,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return g})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(a,d,b,c,e,f,g,h){d("dijit-legacy-requires")&&c(0,function(){require(["dijit/form/_FormValueWidget"])});return a("dijit.form._FormWidget",[e,g,f,h],{setDisabled:function(a){b.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",a)},setValue:function(a){b.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0");this.set("value",a)},getValue:function(){b.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!d("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(a,d,b,c,e,f,g,h,k,m){return d("dijit.form._FormWidgetMixin",
null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(c){this._set("disabled",c);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?b.set(this.focusNode,"disabled",c):this.focusNode.setAttribute("aria-disabled",c?"true":"false");this.valueNode&&b.set(this.valueNode,"disabled",c);c?(this._set("hovering",!1),
this._set("active",!1),c="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",a.forEach(e.isArray(c)?c:[c],function(a){a=this[a];h("webkit")||m.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.own(g(this.focusNode,"focus",function(){f.remove();b.remove()}))[0],c=h("pointer-events")?
"pointerup":h("MSPointer")?"MSPointerUp":h("touch-events")?"touchend, mouseup":"mouseup",f=this.own(g(this.ownerDocumentBody,c,e.hitch(this,function(a){f.remove();b.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){k.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=c.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},
compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){if(void 0==this._lastValueReported&&(null===b||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);if((this.intermediateChanges||b||void 0===b)&&this._pendingOnChange)this._lastValueReported=
a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)}))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],
function(a,d,b,c){var e=a("dijit.form._ButtonMixin"+(b("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(a){a.stopPropagation();a.preventDefault();this.disabled||this.valueNode.click(a);return!1},_onClick:function(a){if(this.disabled)return a.stopPropagation(),a.preventDefault(),!1;!1===this.onClick(a)&&a.preventDefault();var b=a.defaultPrevented;if(!b&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var e=this.domNode;e.parentNode;e=e.parentNode){var d=c.byNode(e);
if(d&&"function"==typeof d._onSubmit){d._onSubmit(a);a.preventDefault();b=!0;break}}return!b},postCreate:function(){this.inherited(arguments);d.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(a){this._set("label",a);(this.containerNode||this.focusNode).innerHTML=a;this.onLabelSet()},onLabelSet:function(){}});b("dojo-bidi")&&(e=a("dijit.form._ButtonMixin",e,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));
return e})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(a,d,b,c,e,f,g,h){return a("dijit.form.Form",[e,f,g,h],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(a){d.set(this.domNode,"encType",a);c("ie")&&(this.domNode.encoding=a);this._set("encType",a)},reset:function(a){var b={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:a?a.target:this.domNode,target:a?a.target:this.domNode};!1!==this.onReset(b)&&b.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(a){this.reset(a);a.stopPropagation();a.preventDefault();return!1},_onSubmit:function(a){var c=this.constructor.prototype;if(this.execute!=c.execute||this.onExecute!=c.onExecute)b.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(a)&&(a.stopPropagation(),a.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),function(a,d,b,c,e,f,g){var h=a("dijit.form.ValidationTextBox",e,{templateString:g,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",
regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(a,b){b!=h.prototype[a]&&(d.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+a+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",b))},_setRegExpGenAttr:function(a){this._deprecateRegExp("regExpGen",a);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(a){this._deprecateRegExp("regExp",a)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},
validator:function(a,b){return RegExp("^(?:"+this._computeRegexp(b)+")"+(this.required?"":"?")+"$").test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||void 0!==this.parse(a,b))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){var a="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:
!this.invalidMessage?this.promptMessage:this.invalidMessage,b="$_unset_$"==this.missingMessage?this.messages.missingMessage:!this.missingMessage?a:this.missingMessage;return this.required&&this._isEmpty(this.textbox.value)?b:a},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var b="",c=this.disabled||this.isValid(a);c&&(this._maskValidSubsetError=!0);var e=this._isEmpty(this.textbox.value),f=!c&&a&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||
a)&&e||f)&&(this._maskValidSubsetError||f&&!this._hasBeenBlurred&&a)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=a&&f,b=this.getErrorMessage(a)):"Incomplete"==this.state?(b=this.getPromptMessage(a),this._maskValidSubsetError=!this._hasBeenBlurred||a):e&&(b=this.getPromptMessage(a));this.set("message",b);return c},displayMessage:function(a){a&&this.focused?f.show(a,this.domNode,this.tooltipPosition,
!this.isLeftToRight()):f.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(a){this.constraints=b.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(a){!a.locale&&this.lang&&(a.locale=this.lang);this._set("constraints",a);this._refreshState()},_setPatternAttr:function(a){this._set("pattern",a);this._refreshState()},
_computeRegexp:function(a){var b=this.pattern;"function"==typeof b&&(b=b.call(this,a));if(b!=this._lastRegExp){var c="";this._lastRegExp=b;".*"!=b&&b.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=a;break;case ")":c+="|$)";break;default:c+="(?:"+a+"|$)"}});try{"".search(c)}catch(e){c=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+
c+")$"}return b},postMixInProperties:function(){this.inherited(arguments);this.messages=c.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setMessageAttr:function(a){this._set("message",a);this.displayMessage(a)},reset:function(){this._maskValidSubsetError=
!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){f.hide(this.domNode);this.inherited(arguments)}});return h})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),function(a,d,b,c,e,f,g,h,k,m,l){h=a("dijit.form.TextBox"+(g("dojo-bidi")?"_NoBidi":""),
[h,k],{templateString:m,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:g("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=
this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>g("ie")&&this.defer(function(){try{var a=b.getComputedStyle(this.domNode);if(a){var c=a.fontFamily;if(c){var e=this.domNode.getElementsByTagName("INPUT");if(e)for(a=0;a<e.length;a++)e[a].style.fontFamily=c}}}catch(f){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=d.create("span",{className:"dijitPlaceHolder dijitInputField"},
this.textbox,"after"),this.own(f(this._phspan,"mousedown",function(a){a.preventDefault()}),f(this._phspan,"touchend, pointerup, MSPointerUp",e.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},
_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){c.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){c.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),
this._updatePlaceHolder(),g("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.inherited(arguments),this._updatePlaceHolder())}});9>g("ie")&&(h.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},l._setSelectionRange=k._setSelectionRange=function(a,b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),
a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});g("dojo-bidi")&&(h=a("dijit.form.TextBox",h,{_setPlaceHolderAttr:function(a){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return h})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(a,d,b,c){return a("dijit.form._FormValueWidget",[b,c],{_layoutHackIE7:function(){if(7==d("ie"))for(var a=this.domNode,b=a.parentNode,
c=a.firstChild||a,h=c.style.filter,k=this;b&&0==b.clientHeight;)(function(){var a=k.connect(b,"onscroll",function(){k.disconnect(a);c.style.filter=(new Date).getMilliseconds();k.defer(function(){c.style.filter=h})})})(),b=b.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(a,d,b,c,e,f){return a("dijit.form._FormValueMixin",f,{readOnly:!1,_setReadOnlyAttr:function(a){d.set(this.focusNode,
"readOnly",a);this._set("readOnly",a)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(a,b){this._handleOnChange(a,b)},_handleOnChange:function(a,b){this._set("value",a);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),
function(a,d,b,c,e,f,g,h){var k=d("dijit.form._TextBoxMixin"+(c("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var e;void 0!==a&&(e=this.filter(a),"string"!=typeof c&&(c=null!==e&&("number"!=typeof e||!isNaN(e))?this.filter(this.format(e,this.constraints)):"",0!=this.compare(e,this.filter(this.parse(c,
this.constraints)))&&(c=null)));if(null!=c&&("number"!=typeof c||!isNaN(c))&&this.textbox.value!=c)this.textbox.value=c,this._set("displayedValue",this.get("displayedValue"));this.inherited(arguments,[e,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},
format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",
this.textbox.value);this.inherited(arguments);this.own(g(this.textbox,"keydown, keypress, paste, cut, compositionend",f.hitch(this,function(a){var b;if("keydown"==a.type&&229!=a.keyCode){b=a.keyCode;switch(b){case e.SHIFT:case e.ALT:case e.CTRL:case e.META:case e.CAPS_LOCK:case e.NUM_LOCK:case e.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&!a.altKey){switch(b){case e.NUMPAD_0:case e.NUMPAD_1:case e.NUMPAD_2:case e.NUMPAD_3:case e.NUMPAD_4:case e.NUMPAD_5:case e.NUMPAD_6:case e.NUMPAD_7:case e.NUMPAD_8:case e.NUMPAD_9:case e.NUMPAD_MULTIPLY:case e.NUMPAD_PLUS:case e.NUMPAD_ENTER:case e.NUMPAD_MINUS:case e.NUMPAD_PERIOD:case e.NUMPAD_DIVIDE:return}if(65<=
b&&90>=b||48<=b&&57>=b||b==e.SPACE)return;b=!1;for(var d in e)if(e[d]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(b=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==e.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}var h={faux:!0},k;for(k in a)/^(layer[XY]|returnValue|keyLocation)$/.test(k)||
(d=a[k],"function"!=typeof d&&"undefined"!=typeof d&&(h[k]=d));f.mixin(h,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){h._wasConsumed=!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});this._lastInputProducingEvent=h;!1===this.onInput(h)&&(h.preventDefault(),h.stopPropagation());if(!h._wasConsumed&&9>=c("ie"))switch(a.keyCode){case e.TAB:case e.ESCAPE:case e.DOWN_ARROW:case e.UP_ARROW:case e.LEFT_ARROW:case e.RIGHT_ARROW:break;default:if(a.keyCode==e.ENTER&&"textarea"!=
this.textbox.tagName.toLowerCase())break;this.defer(function(){this.textbox.value!==this._lastInputEventValue&&g.emit(this.textbox,"input",{bubbles:!0})})}})),g(this.textbox,"input",f.hitch(this,"_onInput")),g(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=f.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,
function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=g.once(this.domNode,"mouseup, touchend",f.hitch(this,function(a){this._isTextSelected()||
k.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});c("dojo-bidi")&&(k=d("dijit.form._TextBoxMixin",k,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);
this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));k._setSelectionRange=h._setSelectionRange=function(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)};k.selectInputText=h.selectInputText=function(a,c,e){a=b.byId(a);isNaN(c)&&(c=0);isNaN(e)&&(e=a.value?a.value.length:0);try{a.focus(),k._setSelectionRange(a,c,e)}catch(f){}};return k})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(a,d,b,c,e,f,g,h,k,m,l,n,p,r,s,q,t,u){function v(){}var x=d("dijit._MasterTooltip",[r,s],{duration:n.defaultDuration,templateString:t,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new q(this.domNode);this.fadeIn=b.fadeIn({node:this.domNode,duration:this.duration,onEnd:h.hitch(this,"_onShow")});this.fadeOut=b.fadeOut({node:this.domNode,duration:this.duration,onEnd:h.hitch(this,"_onHide")})},show:function(a,b,c,e,f,d,k){if(!this.aroundNode||!(this.aroundNode===
b&&this.containerNode.innerHTML==a))if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;f&&this.set("textDir",f);this.containerNode.align=e?"right":"left";var l=p.around(this.domNode,b,c&&c.length?c:w.defaultPosition,!e,h.hitch(this,"orient")),m=l.aroundNodePos;"M"==l.corner.charAt(0)&&"M"==l.aroundCorner.charAt(0)?(this.connectorNode.style.top=m.y+(m.h-this.connectorNode.offsetHeight>>1)-l.y+"px",this.connectorNode.style.left=""):"M"==l.corner.charAt(1)&&
"M"==l.aroundCorner.charAt(1)?this.connectorNode.style.left=m.x+(m.w-this.connectorNode.offsetWidth>>1)-l.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");g.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=d||v;this.onMouseLeave=k||v}},orient:function(a,b,c,e,d){this.connectorNode.style.top="";var g=e.h;e=e.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+c];this.domNode.style.width="auto";var h=f.position(this.domNode);if(l("ie")||l("trident"))h.w+=2;var k=Math.min(Math.max(e,1),h.w);f.setMarginBox(this.domNode,{w:k});"B"==c.charAt(0)&&"B"==b.charAt(0)?(a=f.position(a),b=
this.connectorNode.offsetHeight,a.h>g?(this.connectorNode.style.top=g-(d.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(d.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,h.w-e)},_onShow:function(){l("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=
!1,this.aroundNode=null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=v},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});l("dojo-bidi")&&x.extend({_setAutoTextDir:function(b){this.applyTextDir(b);a.forEach(b.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=
this.textDir}});u.showTooltip=function(b,c,e,f,d,g,h){e&&(e=a.map(e,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));w._masterTT||(u._masterTT=w._masterTT=new x);return w._masterTT.show(b,c,e,f,d,g,h)};u.hideTooltip=function(a){return w._masterTT&&w._masterTT.hide(a)};var w=d("dijit.Tooltip",r,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(b){a.forEach(this._connections||[],function(b){a.forEach(b,function(a){a.remove()})},
this);this._connectIds=a.filter(h.isArrayLike(b)?b:b?[b]:[],function(a){return c.byId(a,this.ownerDocument)},this);this._connections=a.map(this._connectIds,function(a){a=c.byId(a,this.ownerDocument);var b=this.selector,e=b?function(a){return m.selector(b,a)}:function(a){return a},f=this;return[m(a,e(k.enter),function(){f._onHover(this)}),m(a,e("focusin"),function(){f._onHover(this)}),m(a,e(k.leave),h.hitch(f,"_onUnHover")),m(a,e("focusout"),h.hitch(f,"set","state","DORMANT"))]},this);this._set("connectId",
b)},addTarget:function(b){b=b.id||b;-1==a.indexOf(this._connectIds,b)&&this.set("connectId",this._connectIds.concat(b))},removeTarget:function(b){b=a.indexOf(this._connectIds,b.id||b);0<=b&&(this._connectIds.splice(b,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);e.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var b=this.connectId;a.forEach(h.isArrayLike(b)?b:[b],this.addTarget,this)},getContent:function(a){return this.label||
this.domNode.innerHTML},state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(w.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state",
"SHOWING")},this.showDelay));break;case "SHOWING":var b=this.getContent(this._connectNode);if(!b){this.set("state","DORMANT");return}w.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,h.hitch(this,"set","state","SHOWING"),h.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&
a!=this._connectNode&&this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");a.forEach(this._connections||[],function(b){a.forEach(b,function(a){a.remove()})},this);this.inherited(arguments)}});
w._MasterTooltip=x;w.show=u.showTooltip;w.hide=u.hideTooltip;w.defaultPosition=["after-centered","before-centered"];return w})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(a,d,b,c,e,f,g){function h(c,g,h,k){var r=f.getEffectiveBox(c.ownerDocument);(!c.parentNode||"body"!=String(c.parentNode.tagName).toLowerCase())&&e.body(c.ownerDocument).appendChild(c);var s=null;a.some(g,function(a){var b=
a.corner,e=a.pos,f=0,g={w:{L:r.l+r.w-e.x,R:e.x-r.l,M:r.w}[b.charAt(1)],h:{T:r.t+r.h-e.y,B:e.y-r.t,M:r.h}[b.charAt(0)]},l=c.style;l.left=l.right="auto";h&&(f=h(c,a.aroundCorner,b,g,k),f="undefined"==typeof f?0:f);var q=c.style,t=q.display,E=q.visibility;"none"==q.display&&(q.visibility="hidden",q.display="");l=d.position(c);q.display=t;q.visibility=E;t={L:e.x,R:e.x-l.w,M:Math.max(r.l,Math.min(r.l+r.w,e.x+(l.w>>1))-l.w)}[b.charAt(1)];E={T:e.y,B:e.y-l.h,M:Math.max(r.t,Math.min(r.t+r.h,e.y+(l.h>>1))-
l.h)}[b.charAt(0)];e=Math.max(r.l,t);q=Math.max(r.t,E);t=Math.min(r.l+r.w,t+l.w);E=Math.min(r.t+r.h,E+l.h);t-=e;E-=q;f+=l.w-t+(l.h-E);if(null==s||f<s.overflow)s={corner:b,aroundCorner:a.aroundCorner,x:e,y:q,w:t,h:E,overflow:f,spaceAvailable:g};return!f});s.overflow&&h&&h(c,s.aroundCorner,s.corner,s.spaceAvailable,k);g=s.y;var q=s.x,t=e.body(c.ownerDocument);/relative|absolute/.test(b.get(t,"position"))&&(g-=b.get(t,"marginTop"),q-=b.get(t,"marginLeft"));t=c.style;t.top=g+"px";t.left=q+"px";t.right=
"auto";return s}var k={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return g.place={at:function(b,c,e,f,d){e=a.map(e,function(a){var b={corner:a,aroundCorner:k[a],pos:{x:c.x,y:c.y}};f&&(b.pos.x+="L"==a.charAt(1)?f.x:-f.x,b.pos.y+="T"==a.charAt(0)?f.y:-f.y);return b});return h(b,e,d)},around:function(e,f,g,k,r){function s(a,b){E.push({aroundCorner:a,corner:b,pos:{x:{L:z,R:z+y,M:z+(y>>1)}[a.charAt(1)],y:{T:A,B:A+B,M:A+(B>>1)}[a.charAt(0)]}})}var q;if("string"==typeof f||"offsetWidth"in f||"ownerSVGElement"in f){if(q=
d.position(f,!0),/^(above|below)/.test(g[0])){var t=d.getBorderExtents(f),u=f.firstChild?d.getBorderExtents(f.firstChild):{t:0,l:0,b:0,r:0},v=d.getBorderExtents(e),x=e.firstChild?d.getBorderExtents(e.firstChild):{t:0,l:0,b:0,r:0};q.y+=Math.min(t.t+u.t,v.t+x.t);q.h-=Math.min(t.t+u.t,v.t+x.t)+Math.min(t.b+u.b,v.b+x.b)}}else q=f;if(f.parentNode){t="absolute"==b.getComputedStyle(f).position;for(f=f.parentNode;f&&1==f.nodeType&&"BODY"!=f.nodeName;){u=d.position(f,!0);v=b.getComputedStyle(f);/relative|absolute/.test(v.position)&&
(t=!1);if(!t&&/hidden|auto|scroll/.test(v.overflow)){var x=Math.min(q.y+q.h,u.y+u.h),w=Math.min(q.x+q.w,u.x+u.w);q.x=Math.max(q.x,u.x);q.y=Math.max(q.y,u.y);q.h=x-q.y;q.w=w-q.x}"absolute"==v.position&&(t=!0);f=f.parentNode}}var z=q.x,A=q.y,y="w"in q?q.w:q.w=q.width,B="h"in q?q.h:(c.deprecated("place.around: dijit/place.__Rectangle: { x:"+z+", y:"+A+", height:"+q.height+", width:"+y+" } has been deprecated.  Please use { x:"+z+", y:"+A+", h:"+q.height+", w:"+y+" }","","2.0"),q.h=q.height),E=[];a.forEach(g,
function(a){var b=k;switch(a){case "above-centered":s("TM","BM");break;case "below-centered":s("BM","TM");break;case "after-centered":b=!b;case "before-centered":s(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":s(b?"TL":"TR",b?"TR":"TL");s(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":s(b?"BL":"BR",b?"TL":"TR");s(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":s(b?"TL":"TR",b?"BL":"BR");s(b?"TR":"TL",b?"BR":"BL");break;default:s(a.aroundCorner,
a.corner)}});e=h(e,E,r,{w:y,h:B});e.aroundNodePos=q;return e}}})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "),function(a,d,b,c,e,f,g,h,k,m,l,n,p,r){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(a){this._oAuthRedirectFunc=a},oAuthSignIn:function(a,b,c,e){var f=this._oAuthDfd=new h;f.resUrl_=a;f.sinfo_=b;f.oinfo_=c;var g=!e||!1!==e.oAuthPopupConfirmation;if(!c.popup||!g)return this._doOAuthSignIn(a,b,c),f;this._nls||(this._nls=l.identity);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());a=this.oAuthDialog;b=e&&e.error;e=e&&e.token;d.hide(a.errMsg_);b&&(403==b.code&&e)&&(m.set(a.errMsg_,"innerHTML",this._nls.forbidden),d.show(a.errMsg_));a.show();
return f},setOAuthResponseHash:function(b){var c=this._oAuthDfd;this._oAuthDfd=null;if(c&&b)if(clearInterval(this._oAuthIntervalId),"#"===b.charAt(0)&&(b=b.substring(1)),b=n.queryToObject(b),b.error)b=Error("access_denied"===b.error?"ABORTED":"OAuth: "+b.error+" - "+b.error_description),b.code="IdentityManagerBase.2",b.log=g.isDebug,c.errback(b);else{var e=c.oinfo_._oAuthCred,f=new a({userId:b.username,server:c.sinfo_.server,token:b.access_token,expires:(new Date).getTime()+1E3*Number(b.expires_in),
ssl:"true"===b.ssl,_oAuthCred:e});e.storage=b.persist?window.localStorage:window.sessionStorage;e.token=f.token;e.expires=f.expires;e.userId=f.userId;e.ssl=f.ssl;e.save();c.callback(f)}},_createOAuthDialog:function(){var a=this._nls,c=b.substitute(a,this._oAuthDialogContent),h=new e({title:a.title,content:c,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var a=h.esriIdMgr_._oAuthDfd;h.hide_();h.esriIdMgr_._doOAuthSignIn(a.resUrl_,a.sinfo_,a.oinfo_)},cancel_:function(){var a=
h.esriIdMgr_._oAuthDfd;h.esriIdMgr_._oAuthDfd=null;h.hide_();var b=Error("ABORTED");b.code="IdentityManager.2";b.log=g.isDebug;a.errback(b)},hide_:function(){d.hide(h.errMsg_);h.hide();e._DialogLevelManager.hide(h)}}),a=h.domNode;h.btnSubmit_=f.byNode(k.query(".esriIdSubmit",a)[0]);h.btnCancel_=f.byNode(k.query(".esriIdCancel",a)[0]);h.errMsg_=k.query(".esriErrorMsg",a)[0];h.connect(h.btnSubmit_,"onClick",h.execute_);h.connect(h.btnCancel_,"onClick",h.onCancel);h.connect(h,"onCancel",h.cancel_);return h},
_doOAuthSignIn:function(a,b,e){var f=this,d={client_id:e.appId,response_type:"token",state:r.stringify({portalUrl:e.portalUrl}),expiration:e.expiration,locale:e.locale,redirect_uri:e.popup?c.getAbsoluteUrl(e.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};e.forceLogin&&(d.force_login=!0);e.showSocialLogins&&(d.showSocialLogins=!0);var h=e.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",k=h+"?"+n.objectToQuery(d);if(e.popup){var l;7===p("ie")?(l=window.open(e.popupCallbackUrl,
"esriJSAPIOAuth",e.popupWindowFeatures),l.location=k):l=window.open(k,"esriJSAPIOAuth",e.popupWindowFeatures);l?(l.focus(),this._oAuthDfd.oAuthWin_=l,this._oAuthIntervalId=setInterval(function(){if(l.closed){clearInterval(f._oAuthIntervalId);var a=f._oAuthDfd;if(a){var b=Error("ABORTED");b.code="IdentityManager.2";b.log=g.isDebug;a.errback(b)}}},500)):(a=Error("ABORTED"),a.code="IdentityManager.2",a.log=g.isDebug,this._oAuthDfd.errback(a))}else this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:d,
authorizeUrl:h,resourceUrl:a,serverInfo:b,oAuthInfo:e}):window.location=k}}})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(a,d,b){var c={info:0,warn:1,error:2};a=function(){function a(b){void 0===b&&(b={});this.module=b.module||"";this.writer=b.writer||null;this.level=b.level||null;null!=b.enabled&&(this.enabled=!!b.enabled);a._loggers[this.module]=this;b=this.module.lastIndexOf(".");-1!==b&&(this.parent=a.getLogger(this.module.slice(0,b)))}a.prototype.log=
function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this._isEnabled()&&this._matchLevel(a)&&(c=this._inheritedWriter())&&c.apply(void 0,[a,this.module].concat(b))};a.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.log.apply(this,["error"].concat(a))};a.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.log.apply(this,["warn"].concat(a))};a.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-
0]=arguments[b];this.log.apply(this,["info"].concat(a))};a.prototype.getLogger=function(b){return a.getLogger(this.module+"."+b)};a.getLogger=function(b){var c=a._loggers[b];c||(c=new a({module:b}));return c};a.prototype._parentWithMember=function(a,b){for(var c=this;c&&null==c[a];)c=c.parent;return c?c[a]:b};a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};a.prototype._consoleWriter=function(a,b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];
console[a].apply(console,["["+b+"]"].concat(c))};a.prototype._matchLevel=function(a){return c[this._parentWithMember("level","error")]<=c[a]};a.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};a._loggers={};return a}();a.getLogger("esri").level="warn";return a})},"esri/layers/vectorTiles/core/workers/WorkerFallbackImpl":function(){define(["require","exports"],function(a,d){var b=function(){return this}(),c=function(){return function(){var a=this,b=document.createDocumentFragment();
["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=function(){for(var a=[],e=0;e<arguments.length;e++)a[e-0]=arguments[e];return b[c].apply(b,a)}})}}(),e=b.MutationObserver||b.WebKitMutationObserver,f=function(){var a;if(b.process&&b.process.nextTick)a=function(a){b.process.nextTick(a)};else if(b.Promise)a=function(a){b.Promise.resolve().then(a)};else if(e){var c=[],f=document.createElement("div");(new e(function(){for(;0<c.length;)c.shift()()})).observe(f,{attributes:!0});
a=function(a){c.push(a);f.setAttribute("queueStatus","1")}}return a}();return function(){function b(){this._dispatcher=new c;this._connections={};this._outgoingStaticMessages={};this._isInitialized=!1;this._workerPostMessage({type:"\x3cworker-loaded\x3e"})}b.prototype.terminate=function(){this._connections={}};Object.defineProperty(b.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);
(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,configurable:!0});b.prototype.postMessage=function(a,b){var c=this;f(function(){c._workerMessageHandler(new MessageEvent("message",{data:a}))})};b.prototype.dispatchEvent=
function(a){return this._dispatcher.dispatchEvent(a)};b.prototype.addEventListener=function(a,b,c){this._dispatcher.addEventListener(a,b,c)};b.prototype.removeEventListener=function(a,b,c){this._dispatcher.removeEventListener(a,b,c)};b.prototype._workerPostMessage=function(a,b){var c=this;f(function(){c.dispatchEvent(new MessageEvent("message",{data:a}))})};b.prototype._workerMessageHandler=function(b){var c=this,e=b.data;if(e){var f=e.connection,d=e.type;if("\x3cconfigure\x3e"===d)this._isInitialized||
this._workerPostMessage({type:"\x3cworker-configured\x3e"});else if("\x3copen-connection\x3e"===d){b=e.data.path;var g=e.id;this._connections[f]?this._workerPostMessage({type:"\x3cresponse\x3e",id:g,connection:f}):a(["./WorkerConnection",b],function(a,b){c._connections[f]=new a(b,{postMessage:function(a,b){return c._workerPostMessage(a,b)}},f);c._workerPostMessage({type:"\x3cresponse\x3e",id:g,data:{connection:f},error:void 0})})}else"\x3cclose-connection\x3e"===d?this._connections[f]&&delete this._connections[f]:
"\x3cstatic-message\x3e"===d?(b=e.id,this._outgoingStaticMessages[b]&&(d=this._outgoingStaticMessages[b],delete this._outgoingStaticMessages[b],e.error?d.reject(e.error):d.resolve(e.data))):d&&(e=this._connections[f])&&e.proxy.message(b)}};return b}()})},"esri/layers/vectorTiles/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(a,d,b){function c(a,f){if(Array.isArray(f)){var d=new b;a(f,function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];d.resolve(a)});
return d.promise}return c(a,[f]).then(function(a){return a[0]})}d.when=c;d.getAbsMid=function(a,b,c){return b.toAbsMid?b.toAbsMid(a):c.id.replace(/\/[^\/]*$/ig,"/")+a}})},"esri/layers/vectorTiles/views/2d/layers/support/TileKey":function(){define(["require","exports"],function(a,d){return function(){function a(b,e,f,d){this.level=b;this.row=e;this.col=f;this.world=d}a.from=function(c,e,f,d){var h=typeof c;return"object"===h?c:"string"===h?a.fromId(c):new a(c,e,f,d)};a.fromId=function(c){c=c.split("/");
var e=c[1],f=c[2],d=c[3];return new a(parseFloat(c[0]),parseFloat(e),parseFloat(f),parseFloat(d))};a.getId=function(a,b,f,d){return"object"===typeof a?a.level+"/"+a.row+"/"+a.col+"/"+a.world:a+"/"+b+"/"+f+"/"+d};Object.defineProperty(a.prototype,"id",{get:function(){return a.getId(this)},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/vectorTiles/TileIndex":function(){define(["require","exports","../2d/layers/support/TileKey"],function(a,d,b){return function(){function a(b){if(!("index"in
b))throw Error("The tilemap is missing the 'index' property.");this._tilemap=b.index}a.prototype.dataKey=function(a){var c=[a];if(0>a.level||0>a.row||0>a.col||0<a.row>>a.level||0<a.col>>a.level)return null;for(;0!==a.level;)a=new b(a.level-1,a.row>>1,a.col>>1,a.world),c.push(a);a=this._tilemap;var d=c.pop(),h,k;if(1===a)return d;for(;c.length;){h=c.pop();k=d.level+1;var m=2*d.row,l=2*d.col;k=[b.getId(k,m,l,h.world),b.getId(k,m,l+1,h.world),b.getId(k,m+1,l,h.world),b.getId(k,m+1,l+1,h.world)].indexOf(h.id);
if(a)if(0===a[k]){d=null;break}else if(1===a[k]){d=h;break}else d=h,a=a[k]}return d};a.prototype.forEach=function(a,b,c,d,k){this._callback=k;this._maxLevel=b+a;this._forEach(this._tilemap,b,c,d)};a.prototype._forEach=function(a,b,c,d){0!==a&&(this._callback(b,c,d),b!==this._maxLevel&&"object"===typeof a&&(this._forEach(a[0],b+1,2*c,2*d),this._forEach(a[1],b+1,2*c,2*d+1),this._forEach(a[2],b+1,2*c+1,2*d),this._forEach(a[3],b+1,2*c+1,2*d+1)))};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteMosaic":function(){define(["require",
"exports","./Rect","./RectangleBinPack","../webgl/Texture"],function(a,d,b,c,e){return function(){function a(b,e){this._height=this._width=0;this._mosaicRects={};this._dirty=!1;this.pixelRatio=1;(0>=b||0>=e)&&console.error("Sprites mosaic width and height must be greater than zero!");this._width=b;this._height=e;this._binPack=new c(b,e)}Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._height},
enumerable:!0,configurable:!0});a.prototype.setSpriteSource=function(a){this._dispose();this.pixelRatio=a.devicePixelRatio;this._mosaicData||(this._binPack=new c(this._width,this._height),this._mosaicData=new Uint32Array(Math.floor(this._width)*Math.floor(this._height)));this._sprites=a};a.prototype.getSpriteItem=function(a,b){void 0===b&&(b=!1);var c=this._mosaicRects[a];if(c)return c;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;var e=this._sprites.getSpritePosition(a);if(!e||
!e.width||!e.height)return null;var f=this._allocateImage(e.width,e.height);if(0>=f.width)return null;c={rect:f,width:e.width,height:e.height,sdf:e.sdf,pixelRatio:e.pixelRatio};this._copy(f,e,b);return this._mosaicRects[a]=c};a.prototype.getSpriteItems=function(a){for(var b={},c=0;c<a.length;c++){var e=a[c];b[e]=this.getSpriteItem(e)}return b};a.prototype.getMosaicItemPosition=function(a,b){var c=this.getSpriteItem(a,b),e=c&&c.rect;if(!e)return null;e.width=c.width;e.height=c.height;return{size:[c.width,
c.height],tl:[(e.x+1)/this._width,(e.y+1)/this._height],br:[(e.x+1+c.width)/this._width,(e.y+1+c.height)/this._height]}};a.prototype.bind=function(a,b,c){void 0===c&&(c=0);this._texture||(this._texture=new e(a,{pixelFormat:6408,dataType:5121,width:this._width,height:this._height},new Uint8Array(this._mosaicData.buffer)));this._texture.setSamplingMode(b);a.bindTexture(this._texture,c);this._dirty&&this._texture.setData(new Uint8Array(this._mosaicData.buffer));this._dirty=!1};a._copyBits=function(a,
b,c,e,f,d,p,r,s,q,t){var u=e*b+c;p=r*d+p;if(t){p-=d;for(t=-1;t<=q;t++,u=((t+q)%q+e)*b+c,p+=d)for(r=-1;r<=s;r++)f[p+r]=a[u+(r+s)%s]}else for(t=0;t<q;t++){for(r=0;r<s;r++)f[p+r]=a[u+r];u+=b;p+=d}};a.prototype._copy=function(b,c,e){if(this._sprites&&"loaded"===this._sprites.loadStatus){var d=new Uint32Array(this._sprites.image.buffer),l=this._mosaicData;(!l||!d)&&console.error("Source or target images are uninitialized!");a._copyBits(d,this._sprites.width,c.x,c.y,l,this._width,b.x+1,b.y+1,c.width,c.height,
e);this._dirty=!0}};a.prototype._allocateImage=function(a,c){a+=2;c+=2;var e=this._binPack.allocate(a+(a%4?4-a%4:0),c+(c%4?4-c%4:0));0>=e.width&&(console.warn("Out of sprite mosaic space!"),e=new b(0,0,0,0));return e};a.prototype._dispose=function(){this._binPack=this._mosaicData=null;this._mosaicRects={};this._dirty=!0};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/Rect":function(){define(["require","exports"],function(a,d){return function(){function a(b,e,f,d){void 0===b&&(b=0);void 0===
e&&(e=0);void 0===f&&(f=0);void 0===d&&(d=0);this.x=b;this.y=e;this.width=f;this.height=d}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/vectorTiles/RectangleBinPack":function(){define(["require","exports","./Rect"],function(a,d,b){return function(){function a(c,f){this._height=this._width=0;this._free=[];this._width=c;this._height=f;this._free.push(new b(0,0,c,f))}a.prototype.allocate=
function(a,c){for(var d=null,h=-1,k=0;k<this._free.length;++k){var m=this._free[k];if(a<=m.width&&c<=m.height&&(null===d||m.y<=d.y&&m.x<=d.x))d=m,h=k}if(null===d)return new b;this._free.splice(h,1);d.width<d.height?(d.width>a&&this._free.push(new b(d.x+a,d.y,d.width-a,c)),d.height>c&&this._free.push(new b(d.x,d.y+c,d.width,d.height-c))):(d.width>a&&this._free.push(new b(d.x+a,d.y,d.width-a,d.height)),d.height>c&&this._free.push(new b(d.x,d.y+c,a,d.height-c)));return new b(d.x,d.y,a,c)};a.prototype.release=
function(a){for(var b=0;b<this._free.length;++b){var c=this._free[b];if(c.y===a.y&&c.height===a.height&&c.x+c.width===a.x)c.width+=a.width;else if(c.x===a.x&&c.width===a.width&&c.y+c.height===a.y)c.height+=a.height;else if(a.y===c.y&&a.height===c.height&&a.x+a.width===c.x)c.x=a.x,c.width+=a.width;else if(a.x===c.x&&a.width===c.width&&a.y+a.height===c.y)c.y=a.y,c.height+=a.height;else continue;this._free.splice(b,1);this.release(a)}this._free.push(a)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteSource":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojo/Deferred dojo/promise/all ../../request ../../kernel ../../core/promiseUtils".split(" "),
function(a,d,b,c,e,f,g,h,k){return function(){function a(b,c){this.baseURL=b;this.devicePixelRatio=c;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}a.prototype.getSpritePosition=function(a){return this._spritesData[a]};a.prototype.load=function(){var a=this;this.loadStatus="loading";return!this.baseURL?k.resolve(this):this._loadSprites().then(function(){a.loadStatus="loaded";return a}).otherwise(function(b){a.loadStatus="failed";return a})};
a.prototype._loadSprites=function(){var a=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var b=this.baseURL,c=this._isRetina?"@2x":"",d=g(b+c+".json",{callbackParamName:"callback",responseType:"json"}).then(function(b){a._spritesData=b.data}),k=new e,m=new Image;m.crossOrigin="anonymous";m.onload=function(){m.onload=null;a.width=m.width;a.height=m.height;var b=document.createElement("canvas");b.width=m.width;b.height=m.height;b=b.getContext("2d");b.drawImage(m,0,0,m.width,m.height);for(var b=
b.getImageData(0,0,m.width,m.height),b=new Uint8Array(b.data),c,e=0;e<b.length;e+=4)c=b[e+3]/255,b[e]*=c,b[e+1]*=c,b[e+2]*=c;a.image=b;k.resolve()};b=""+b+c+".png";h.id&&(c=h.id.findCredential(b))&&c.token&&(b+="?token\x3d"+c.token);m.src=b;return f([d,k.promise])};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphMosaic":function(){define("require exports dojo/promise/all dojo/Deferred ./Rect ../webgl/Texture ./RectangleBinPack".split(" "),function(a,d,b,c,e,f,g){return function(){function a(b,
c,e){this.height=this.width=0;this._dirty=!1;this._glyphIndex={};this._rangePromises={};(0>=b||0>=c)&&console.error("Glyph mosaic width and height must be greater than zero!");this.width=b;this.height=c;this._glyphSource=e;this._binPack=new g(b,c);this._glyphData=new Uint8Array(b*c)}a.prototype.getGlyphItems=function(a,f,d){for(var g=this,h=[],r=this._glyphSource,s=new Set,q=1/256,t=0;t<d.length;t++)s.add(Math.floor(d[t]*q));var u=[];s.forEach(function(a){if(256>=a){var b=new c;u.push(b.promise);
var e=f+a,d=g._rangePromises[e];d?d.push(b):(g._rangePromises[e]=[b],r.getRange(f,a).then(function(){var a=g._rangePromises[e];delete g._rangePromises[e];for(var b=0;b<a.length;b++)a[b].resolve()}))}});return b(u).then(function(b){b=g._glyphIndex[f];b||(b={},g._glyphIndex[f]=b);for(var c=0;c<d.length;c++){var q=d[c],s=b[q];if(s)s.tileIDs.add(a),h[q]={rect:s.rect,metrics:s.metrics};else{var t=r.getGlyph(f,q);if(t&&t.metrics){var s=t.metrics,u=void 0;if(0===s.width)u=new e(0,0,0,0);else{var B=s.width+
6,E=s.height+6,u=g._binPack.allocate(B+(B%4?4-B%4:0),E+(E%4?4-E%4:0));0>=u.width&&(u=new e(0,0,0,0));var t=t.bitmap,H=void 0,J=void 0;if(t)for(var F=0;F<E;F++)for(var H=B*F,J=g.width*(u.y+F)+u.x,I=0;I<B;I++)g._glyphData[J+I]=t[H+I]}B=new Set;B.add(a);b[q]={rect:u,metrics:s,tileIDs:B};h[q]={rect:u,metrics:s};g._dirty=!0}}}return h})};a.prototype.removeGlyphs=function(a){for(var b in this._glyphIndex){var c=this._glyphIndex[b];if(c){var e=void 0,f;for(f in c)if(e=c[f],e.tileIDs["delete"](a),0===e.tileIDs.size){for(var e=
e.rect,d=void 0,g=void 0,h=0;h<e.height;h++){d=this.width*(e.y+h)+e.x;for(g=0;g<e.width;g++)this._glyphData[d+g]=0}delete c[f];this._dirty=!0}}}};a.prototype.bind=function(a,b,c){void 0===c&&(c=0);this._texture||(this._texture=new f(a,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));this._texture.setSamplingMode(b);a.bindTexture(this._texture,c);this._dirty&&this._texture.setData(this._glyphData);this._dirty=!1};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphSource":function(){define(["require",
"exports","../../core/promiseUtils","../../request","../../core/pbf"],function(a,d,b,c,e){var f=function(){function a(b){this._metrics=[];for(this._bitmaps=[];b.next();)switch(b.tag()){case 1:for(var c=b.getMessage();c.next();)switch(c.tag()){case 3:for(var e=c.getMessage(),f=void 0,d=void 0,g=void 0,h=void 0,q=void 0,t=void 0,u=void 0;e.next();)switch(e.tag()){case 1:f=e.getUInt32();break;case 2:d=e.getBytes();break;case 3:g=e.getUInt32();break;case 4:h=e.getUInt32();break;case 5:q=e.getSInt32();
break;case 6:t=e.getSInt32();break;case 7:u=e.getUInt32();break;default:e.skip()}f&&(this._metrics[f]={width:g,height:h,left:q,top:t,advance:u},this._bitmaps[f]=d);break;default:c.skip()}break;default:b.skip()}}a.prototype.getMetrics=function(a){return this._metrics[a]};a.prototype.getBitmap=function(a){return this._bitmaps[a]};return a}(),g=function(){function a(){this._ranges=[]}a.prototype.getRange=function(a){return this._ranges[a]};a.prototype.addRange=function(a,b){this._ranges[a]=b};return a}();
return function(){function a(b){this._glyphInfo={};this._baseURL=b}a.prototype.getRange=function(a,d){var g=this._getFontStack(a);if(g.getRange(d))return b.resolve();var h=256*d,p=h+255,h=this._baseURL.replace("{fontstack}",a).replace("{range}",h+"-"+p);return c(h,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(a){g.addRange(d,new f(new e(new Uint8Array(a.data),new DataView(a.data))))})};a.prototype.getGlyph=function(a,b){var c=this._getFontStack(a);if(c){var e=Math.floor(b/
256);if(!(256<e))return c=c.getRange(e),!c?void 0:{metrics:c.getMetrics(b),bitmap:c.getBitmap(b)}}};a.prototype._getFontStack=function(a){var b=this._glyphInfo[a];b||(b=this._glyphInfo[a]=new g);return b};return a}()})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(a,d){return function(){function a(b,e,f,d){this._tag=0;this._dataType=99;this._data=b;this._dataView=e;this._pos=f||0;this._end=d||b.byteLength}a.prototype.clone=function(){return new a(this._data,
this._dataView,this._pos,this._end)};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var b=this._decodeVarint();this._tag=b>>3;this._dataType=b&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){return this._decodeVarint()};
a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){return this._decodeSVarint()};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getUint32(b+4,!0);this._skip(8);return a};a.prototype.getSFixed64=
function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getInt32(b+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,
!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),b=this._pos,b=this._toString(this._data,b,b+a);this._skip(a);return b};a.prototype.getBytes=function(){var a=this._getLength(),b=this._pos,b=this._toBytes(this._data,b,b+a);this._skip(a);return b};a.prototype.getMessage=function(){var c=this._getLength(),e=this._pos,e=new a(this._data,this._dataView,e,e+c);this._skip(c);return e};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;
case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,b=this._pos,f=0,d;if(10<=this._end-b){if(d=a[b++],f|=d&127,0!==(d&128)&&(d=a[b++],f|=(d&127)<<7,0!==(d&128)&&(d=a[b++],f|=(d&127)<<14,0!==(d&128)&&(d=a[b++],f|=(d&127)<<21,0!==(d&128)&&
(d=a[b++],f+=268435456*(d&127),0!==(d&128)&&(d=a[b++],f+=34359738368*(d&127),0!==(d&128)&&(d=a[b++],f+=4398046511104*(d&127),0!==(d&128)&&(d=a[b++],f+=562949953421312*(d&127),0!==(d&128)&&(d=a[b++],f+=72057594037927936*(d&127),0!==(d&128)&&(d=a[b++],f+=9223372036854775E3*(d&127),0!==(d&128)))))))))))throw Error("Varint too long!");}else{for(var h=1;b!==this._end;){d=a[b];if(0===(d&128))break;++b;f+=(d&127)*h;h*=128}if(b===this._end)throw Error("Varint overrun!");++b;f+=d*h}this._pos=b;return f};a.prototype._decodeSVarint=
function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,b,f){var d="",h="";for(f=Math.min(this._end,f);b<f;++b){var k=a[b];k&128?h+="%"+k.toString(16):(d+=decodeURIComponent(h)+String.fromCharCode(k),h="")}h.length&&(d+=decodeURIComponent(h));return d};a.prototype._toBytes=function(a,b,f){f=Math.min(this._end,f);return new Uint8Array(a.buffer,
b,f-b)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileDisplayObject":function(){define("require exports ../../core/tsSupport/extendsHelper ../webgl/BufferObject ../2d/engine/DisplayObject ../../core/libs/gl-matrix/vec2 ../../core/libs/gl-matrix/mat4 ./RenderBucket".split(" "),function(a,d,b,c,e,f,g,h){return function(a){function e(b,c,d,h,m,q,t,u,v,x,w){a.call(this);this._renderBuckets=[];this._symbolUpdateData=this._vectorTileData=null;this.topLeft=[0,0];this.bottomRight=[0,
0];this.tileTransform={transform:Float32Array[16],displayCoord:Float32Array[2]};this.stencilData={mask:0,reference:0};this.key=b;this.refKey=c;this.topLeft[0]=d[0];this.topLeft[1]=d[1];this.bottomRight[0]=d[2];this.bottomRight[1]=d[3];this.widthInPixels=h;this.coordRange=m;this.rotation=q;this._vectorTileData=t;this.styleLayers=u;this._glyphsMosaic=v;this.workerID=x;this._connection=w;this.id=b.id;this.status=3;this.tileTransform.transform=g.create();this.tileTransform.displayCoord=f.create()}b(e,
a);e.prototype.updateSymbolData=function(a){a&&(this._symbolUpdateData=a,this.requestRender())};e.prototype.dispose=function(){-1!==this.workerID&&(this._connection&&6!==this.status&&7!==this.status)&&this._connection.broadcast("destructTileData",{key:this.id,worker:this.workerID},[]);this.polygonTrianglesVertexArrayObject&&(this.polygonTrianglesVertexArrayObject.dispose(),this.polygonTrianglesVertexArrayObject=null);this.polygonOutlineVertexArrayObject&&(this.polygonOutlineVertexArrayObject.dispose(),
this.polygonOutlineVertexArrayObject=null);this.lineTrianglesVertexArrayObject&&(this.lineTrianglesVertexArrayObject.dispose(),this.lineTrianglesVertexArrayObject=null);this.lineJoinsVertexArrayObject&&(this.lineJoinsVertexArrayObject.dispose(),this.lineJoinsVertexArrayObject=null);this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.polygonTrianglesVertexBuffer&&
(this.polygonTrianglesVertexBuffer.dispose(),this.polygonTrianglesVertexBuffer=null);this.polygonTrianglesIndexBuffer&&(this.polygonTrianglesIndexBuffer.dispose(),this.polygonTrianglesIndexBuffer=null);this.polygonOutlinesVertexBuffer&&(this.polygonOutlinesVertexBuffer.dispose(),this.polygonOutlinesVertexBuffer=null);this.polygonOutlinesIndexBuffer&&(this.polygonOutlinesIndexBuffer.dispose(),this.polygonOutlinesIndexBuffer=null);this.lineVertexBuffer&&(this.lineVertexBuffer.dispose(),this.lineVertexBuffer=
null);this.lineTrianglesIndexBuffer&&(this.lineTrianglesIndexBuffer.dispose(),this.lineTrianglesIndexBuffer=null);this.lineJoinVertexBuffer&&(this.lineJoinVertexBuffer.dispose(),this.lineJoinVertexBuffer=null);this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textIndexBuffer&&(this.textIndexBuffer.dispose(),
this.textIndexBuffer=null);this._renderBuckets=[];this.status=7};e.prototype.attach=function(a){this.status=3;if(!this._vectorTileData)return!1;if(0===this._renderBuckets.length)for(var b=new Uint32Array(this._vectorTileData.bucketDataInfo),e=b.length,f=0;f<e;){var d=b[f],g=b[f+1];0===g?(g=new h.BackgroundRenderBucket,g.layerID=d,this._renderBuckets.push(g),f+=2):1===g?(g=new h.FillRenderBucket,g.layerID=d,g.triangleElementStart=b[f+2],g.triangleElementCount=b[f+3],g.outlineElementStart=b[f+4],g.outlineElementCount=
b[f+5],this._renderBuckets.push(g),f+=6):2===g?(g=new h.LineRenderBucket,g.layerID=d,g.triangleElementStart=b[f+2],g.triangleElementCount=b[f+3],g.joinStart=b[f+4],g.joinCount=b[f+5],this._renderBuckets.push(g),f+=6):3===g?(g=new h.SymbolRenderBucket,g.layerID=d,g.markerElementStart=b[f+2],g.marketElementCount=b[f+3],g.textElementStart=b[f+4],g.textElementCount=b[f+5],g.isSDF=0!==b[f+6],this._renderBuckets.push(g),f+=7):console.error("Bad bucket type!")}b=a.context;a=a.budget;e=new Uint32Array(this._vectorTileData.bufferDataInfo);
f=e.length;for(g=d=0;g<f;g+=2,d++){var k=e[g],m=e[g+1];if(!(0>=m||0===this._vectorTileData.bufferData[d].byteLength)){if(a&&a.done)return!1;switch(k){case 2:this.polygonTrianglesVertexBuffer||(this.polygonTrianglesVertexBuffer=c.createVertex(b,35044,this._vectorTileData.bufferData[d]));break;case 6:this.polygonTrianglesIndexBuffer||(this.polygonTrianglesIndexBuffer=c.createIndex(b,35044,new Uint32Array(this._vectorTileData.bufferData[d],0,m/4)));break;case 3:this.polygonOutlinesVertexBuffer||(this.polygonOutlinesVertexBuffer=
c.createVertex(b,35044,this._vectorTileData.bufferData[d]));break;case 7:this.polygonOutlinesIndexBuffer||(this.polygonOutlinesIndexBuffer=c.createIndex(b,35044,new Uint32Array(this._vectorTileData.bufferData[d],0,m/4)));break;case 0:this.lineVertexBuffer||(this.lineVertexBuffer=c.createVertex(b,35044,this._vectorTileData.bufferData[d]));break;case 8:this.lineTrianglesIndexBuffer||(this.lineTrianglesIndexBuffer=c.createIndex(b,35044,this._vectorTileData.bufferData[d]));break;case 1:this.lineJoinVertexBuffer||
(this.lineJoinVertexBuffer=c.createVertex(b,35044,this._vectorTileData.bufferData[d]));break;case 4:this.iconVertexBuffer||(this.iconVertexBuffer=c.createVertex(b,35044,this._vectorTileData.bufferData[d]));break;case 9:this.iconIndexBuffer||(this.iconIndexBuffer=c.createIndex(b,35044,new Uint32Array(this._vectorTileData.bufferData[d],0,m/4)));break;case 5:this.textVertexBuffer||(this.textVertexBuffer=c.createVertex(b,35044,this._vectorTileData.bufferData[d]));break;case 10:this.textIndexBuffer||(this.textIndexBuffer=
c.createIndex(b,35044,new Uint32Array(this._vectorTileData.bufferData[d],0,m/4)))}}}this.status=4;return!0};e.prototype.detach=function(a){};e.prototype.render=function(a){if(this.visible&&4===this.status){var b=a.context,c=a.renderer;if(b&&c){var e=a.drawphase;this._symbolUpdateData&&this._updateSymbolData(a);b.setStencilFunction(514,this.stencilData.reference,this.stencilData.mask);var f=this.styleLayers,d=void 0!==a.layerOpacity?a.layerOpacity:1;if(0!==d){var g,h=this._renderBuckets.length,k=0;
if(0===e)for(k=h-1;0<=k;k--)g=this._renderBuckets[k],3!==g.type&&g.hasData()&&c.renderBucket(b,g,a.displayLevel,a.requiredLevel,e,this,f.layers[g.layerID],d);else for(k=0;k<h;k++)g=this._renderBuckets[k],g.hasData()&&c.renderBucket(b,g,a.displayLevel,a.requiredLevel,e,this,f.layers[g.layerID],d)}}}};e.prototype._updateSymbolData=function(a){var b=new Uint32Array(this._symbolUpdateData.bucketDataInfo),e=b.length;if(0===e)return this._symbolUpdateData=null,!0;if(1>a.budget.remaining)return this.requestRender(),
!1;a=a.context;a.bindVAO(null);for(var f=new Uint32Array(this._symbolUpdateData.bufferDataInfo),d=f.length,g=0,k=0;k<d;k+=2,g++){var m=f[k],v=f[k+1];if(!(0>=v||0===this._symbolUpdateData.bufferData[g].byteLength))switch(m){case 4:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconVertexBuffer=c.createVertex(a,35044,this._symbolUpdateData.bufferData[g]);break;case 9:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.iconIndexBuffer=
c.createIndex(a,35044,new Uint32Array(this._symbolUpdateData.bufferData[g],0,v/4));break;case 5:this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textVertexBuffer=c.createVertex(a,35044,this._symbolUpdateData.bufferData[g]);break;case 10:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null),this.textIndexBuffer=c.createIndex(a,35044,new Uint32Array(this._symbolUpdateData.bufferData[g],0,v/4))}}a=0;for(f=this._renderBuckets.length;a<
f;a++)this._renderBuckets[a]instanceof h.SymbolRenderBucket&&(d=this._renderBuckets[a],d.markerElementStart=0,d.marketElementCount=0,d.textElementStart=0,d.textElementCount=0);for(d=0;d<e;){k=b[d];g=-1;a=0;for(f=this._renderBuckets.length;a<f;a++)if(this._renderBuckets[a].layerID===k){g=a;break}if(a=this._renderBuckets[g])a.markerElementStart=b[d+2],a.marketElementCount=b[d+3],a.textElementStart=b[d+4],a.textElementCount=b[d+5];d+=7}this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),
this.iconVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this._symbolUpdateData=null;return!0};return e}(e)})},"esri/layers/vectorTiles/views/vectorTiles/RenderBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper"],function(a,d,b,c){a=function(){return function(a){this.type=a}}();d.RenderBucket=a;c=function(a){function c(){a.call(this,2);this.joinCount=this.joinStart=
this.triangleElementCount=this.triangleElementStart=0}b(c,a);c.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.joinCount};return c}(a);d.LineRenderBucket=c;c=function(a){function c(){a.call(this,1);this.outlineElementCount=this.outlineElementStart=this.triangleElementCount=this.triangleElementStart=0}b(c,a);c.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.outlineElementCount};return c}(a);d.FillRenderBucket=c;c=function(a){function c(){a.call(this,
3);this.textElementCount=this.textElementStart=this.marketElementCount=this.markerElementStart=0;this.isSDF=!1}b(c,a);c.prototype.hasData=function(){return 0<this.marketElementCount||0<this.textElementCount};return c}(a);d.SymbolRenderBucket=c;a=function(a){function c(){a.call(this,0)}b(c,a);c.prototype.hasData=function(){return!0};return c}(a);d.BackgroundRenderBucket=a})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper ./../math/vec2 ./../math/mat2d dojo/text!./webgl/stencil.vs.glsl dojo/text!./webgl/stencil.fs.glsl ./webgl/BitBlitRenderer ../../support/screenshotUtils ../../../core/promiseUtils ../math/common ./Container ../../webgl/RenderingContext ../../webgl/FramebufferObject ../../webgl/webgl-utils ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject".split(" "),
function(a,d,b,c,e,f,g,h,k,m,l,n,p,r,s,q,t,u){function v(a){return{budget:a.budget,state:a.state,devicePixelRatio:a.devicePixelRatio,stationary:a.stationary}}var x={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(a){function d(){a.apply(this,arguments);this._clipData=new Float32Array(8);this._upperLeft=c.create();this._upperRight=c.create();this._lowerLeft=c.create();this._lowerRight=c.create();this._mat2=e.create();this._clipRendererInitialized=!1}b(d,a);d.prototype.createElement=
function(){var a=document.createElement("canvas");a.setAttribute("class","esri-display-object");return a};d.prototype.setElement=function(a){this.element=a};d.prototype.attach=function(b){this._resizeCanvas(b);var c=s.setupWebGL(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0});this._renderingContext=new p(c[0]);this.attached=!0;this._cachedRenderParams=v(b);return a.prototype.attach.call(this,b)};d.prototype.detach=function(b){a.prototype.detach.call(this,b);this._cachedRenderParams=this._renderingContext=
null};d.prototype.beforeRenderChildren=function(a,b){var f=a.state;if(!f.spatialReference||!(f.spatialReference._isWrappable?f.spatialReference._isWrappable():f.spatialReference.isWrappable))this._clipFrame=!1;else{var d=f.width,g=f.height,h=f.rotation,k=this._renderingContext,d=d*a.devicePixelRatio,g=g*a.devicePixelRatio,m=l.toRadian(h),n=Math.abs(Math.cos(m)),p=Math.abs(Math.sin(m)),q=Math.round(d*n+g*p),s=Math.round(f.worldScreenWidth);if(q<=s)this._clipFrame=!1;else{if(!this._clipFBO||this._clipFBO.width!==
d||this._clipFBO.height!==g)this._clipFBO=new r(k,{colorTarget:0,depthStencilTarget:3,width:d,height:g});var t=0.5*d,u=0.5*g,q=1/d,f=1/g,s=0.5*s*a.devicePixelRatio,x=0.5*(d*p+g*n),d=this._upperLeft,n=this._upperRight,p=this._lowerLeft,v=this._lowerRight;c.set(d,-s,-x);c.set(n,s,-x);c.set(p,-s,x);c.set(v,s,x);e.identity(this._mat2);e.translate(this._mat2,this._mat2,[t,u]);0!==h&&e.rotate(this._mat2,this._mat2,m);c.transformMat2d(d,d,this._mat2);c.transformMat2d(n,n,this._mat2);c.transformMat2d(p,p,
this._mat2);c.transformMat2d(v,v,this._mat2);h=this._clipData;h.set([2*p[0]*q-1,2*(g-p[1])*f-1,2*v[0]*q-1,2*(g-v[1])*f-1,2*d[0]*q-1,2*(g-d[1])*f-1,2*n[0]*q-1,2*(g-n[1])*f-1]);this._clipRendererInitialized||this._initializeClipRenderer(k);this._clipVBO.setData(h);k.bindFramebuffer(this._clipFBO);k.setDepthWriteEnabled(!0);k.setStencilWriteMask(255);k.setClearColor(0,0,0,0);k.setClearDepth(1);k.setClearStencil(0);k.clear(k.gl.COLOR_BUFFER_BIT|k.gl.DEPTH_BUFFER_BIT|k.gl.STENCIL_BUFFER_BIT);this._clipFrame=
!0}}};d.prototype.afterRenderChildren=function(a,b){if(this._clipFrame&&this._clipRendererInitialized){var c=this._renderingContext;c.bindFramebuffer();c.bindVAO(this._clipVAO);c.bindProgram(this._clipStencilProgram);c.setDepthWriteEnabled(!1);c.setDepthTestEnabled(!1);c.setStencilTestEnabled(!0);c.setBlendingEnabled(!1);c.setColorMask(!1,!1,!1,!1);c.setStencilOp(7680,7680,7681);c.setStencilWriteMask(255);c.setStencilFunction(519,1,255);c.drawElements(4,6,5123,0);c.bindVAO();c.setColorMask(!0,!0,
!0,!0);c.setBlendingEnabled(!0);c.setStencilWriteMask(255);c.setStencilFunction(514,1,255);this._blitRenderer.render(c,this._clipFBO.colorTexture,9728,1);c.setStencilTestEnabled(!1)}};d.prototype.render=function(b){var c=this.element.style;this.visible?(c.display="block",c.opacity=""+this.opacity,this._resizeCanvas(b),a.prototype.render.call(this,b),this._cachedRenderParams=v(b)):c.display="none"};d.prototype.takeScreenshot=function(a){var b=this._cachedRenderParams.devicePixelRatio,c=b*this._cachedRenderParams.state.width,
e=b*this._cachedRenderParams.state.height,f=0,d=0,g=c,h=e,l=c,n=e;if(l=a.area)f=b*l.x,d=b*l.y,g=b*l.width,h=b*l.height;void 0!==a.width&&void 0!==a.height?(l=a.width/a.height,h*l<g?(l*=h,f+=Math.floor((g-l)/2),g=Math.floor(l)):(l=g/l,d+=Math.floor((h-l)/2),h=Math.floor(l)),l=a.width,n=a.height):(l=g,n=h);b=document.createElement("canvas");b.width=l;b.height=n;var p=b.getContext("2d"),q=new Uint8Array(4*g*h),s=this._renderingContext,t=r.create(s,{colorTarget:1,depthStencilTarget:3,width:c,height:e});
s.bindFramebuffer(t);s.setViewport(0,0,c,e);this._cachedRenderParams.budget&&this._cachedRenderParams.budget.reset(Number.MAX_VALUE);var u=this._cachedRenderParams,v=this._renderingContext.gl;this._renderingContext.setClearColor(1,1,1,1);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT|v.STENCIL_BUFFER_BIT);u.context=this._renderingContext;this.renderChildren(u);t.readPixels(f,e-(d+h),g,h,6408,5121,
q);s.bindFramebuffer();s=p.getImageData(0,0,l,n);if(0!==f||0!==d||g!==c||h!==e||l!==c||n!==e)k.resampleHermite(q,g,h,s.data,l,n,!0);else{for(var c=h-1,e=0,g=4*g,w=v=u=t=h=d=f=void 0;e<c;){v=e*g;w=c*g;for(f=0;f<g;f+=4)d=q[v+f],h=q[v+f+1],t=q[v+f+2],u=q[v+f+3],q[v+f]=q[w+f],q[v+f+1]=q[w+f+1],q[v+f+2]=q[w+f+2],q[v+f+3]=q[w+f+3],q[w+f]=d,q[w+f+1]=h,q[w+f+2]=t,q[w+f+3]=u;e++;c--}g=s.data;c=0;for(e=q.length;c<e;c++)g[c]=q[c]}p.putImageData(s,0,0);p=x[a.format?a.format.toLowerCase():"png"];q=1;void 0!==
a.quality&&(q=a.quality/100);a=b.toDataURL(p,q);return m.resolve({dataURL:a,x:0,y:0,width:l,height:n})};d.prototype.prepareChildrenRenderParameters=function(a){if(!this.attached||!this._renderingContext)return null;var b=this._renderingContext,c=b.gl;b.setDepthWriteEnabled(!0);b.setStencilWriteMask(255);b.setClearColor(0,0,0,0);b.setClearDepth(1);b.setClearStencil(0);b.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT|c.STENCIL_BUFFER_BIT);b.setViewport(0,0,this.element.width,this.element.height);b.setDepthWriteEnabled(!1);
a.context=b;return a};d.prototype.attachChild=function(a,b){return a.attach(b)};d.prototype.detachChild=function(a,b){return a.detach(b)};d.prototype.renderChild=function(a,b){return a.render(b)};d.prototype._resizeCanvas=function(a){var b=this.element,c=b.style,e=a.state,f=a.devicePixelRatio;a=e.width*f;f*=e.height;if(b.width!==a||b.height!==f)b.width=a,b.height=f,c.width=e.width+"px",c.height=e.height+"px"};d.prototype._initializeClipRenderer=function(a){if(this._clipRendererInitialized)return!0;
this._blitRenderer=new h;var b={a_pos:0},c=new q(a,f,g,b);if(!c)return!1;var e=u.createVertex(a,35040,32),d=new Uint16Array([0,1,2,2,1,3]),d=u.createIndex(a,35044,d);a=new t(a,b,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:e},d);this._clipStencilProgram=c;this._clipVBO=e;this._clipVAO=a;return this._clipRendererInitialized=!0};return d}(n)})},"esri/layers/vectorTiles/views/2d/math/vec2":function(){define(["./common"],function(a){var d=a.GLMAT_ARRAY_TYPE,
b=a.GLMAT_RANDOM,c={create:function(){var a=new d(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new d(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var c=new d(2);c[0]=a;c[1]=b;return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}};c.sub=c.subtract;c.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a};
c.mul=c.multiply;c.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a};c.div=c.divide;c.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};c.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};c.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};c.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;return a};c.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)};c.dist=c.distance;c.squaredDistance=
function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d};c.sqrDist=c.squaredDistance;c.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};c.len=c.length;c.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};c.sqrLen=c.squaredLength;c.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};c.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};c.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};c.dot=function(a,b){return a[0]*
b[0]+a[1]*b[1]};c.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};c.lerp=function(a,b,c,d){var k=b[0];b=b[1];a[0]=k+d*(c[0]-k);a[1]=b+d*(c[1]-b);return a};c.random=function(a,c){c=c||1;var d=2*b()*Math.PI;a[0]=Math.cos(d)*c;a[1]=Math.sin(d)*c;return a};c.transformMat2=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=c[1]*d+c[3]*b;return a};c.transformMat2d=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*b+c[5];return a};c.transformMat3=
function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a};c.transformMat4=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a};c.forEach=function(){var a=c.create();return function(b,c,d,k,m,l){c||(c=2);d||(d=0);for(k=k?Math.min(k*c+d,b.length):b.length;d<k;d+=c)a[0]=b[d],a[1]=b[d+1],m(a,a,l),b[d]=a[0],b[d+1]=a[1];return b}}();c.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};return c})},"esri/layers/vectorTiles/views/2d/math/common":function(){define([],
function(){if(!a)var a=1E-6;if(!d)var d="undefined"!==typeof Float32Array?Float32Array:Array;if(!b)var b=Math.random;var c={GLMAT_EPSILON:a,GLMAT_ARRAY_TYPE:d,GLMAT_RANDOM:b,setMatrixArrayType:function(a){c.GLMAT_ARRAY_TYPE=a}},e=Math.PI/180,f=180/Math.PI;c.toRadian=function(a){return a*e};c.toDegree=function(a){return a*f};c.setMatrixArrayType(Array);return c})},"esri/layers/vectorTiles/views/2d/math/mat2d":function(){define(["./common"],function(a){var d=a.GLMAT_ARRAY_TYPE;a={create:function(){var a=
new d(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var c=new d(6);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];return c},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,c){var e=c[0],f=c[1],d=c[2],h=c[3],k=c[4],m=c[5],l=e*h-f*d;if(!l)return null;l=1/l;a[0]=h*l;a[1]=-f*l;a[2]=-d*l;a[3]=e*l;a[4]=(d*m-h*k)*l;a[5]=(f*k-e*m)*l;return a},
determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,c,e){var f=c[0],d=c[1],h=c[2],k=c[3],m=c[4];c=c[5];var l=e[0],n=e[1],p=e[2],r=e[3],s=e[4];e=e[5];a[0]=f*l+h*n;a[1]=d*l+k*n;a[2]=f*p+h*r;a[3]=d*p+k*r;a[4]=f*s+h*e+m;a[5]=d*s+k*e+c;return a}};a.mul=a.multiply;a.rotate=function(a,c,e){var f=c[0],d=c[1],h=c[2],k=c[3],m=c[4];c=c[5];var l=Math.sin(e);e=Math.cos(e);a[0]=f*e+h*l;a[1]=d*e+k*l;a[2]=f*-l+h*e;a[3]=d*-l+k*e;a[4]=m;a[5]=c;return a};a.scale=function(a,c,e){var f=c[1],d=c[2],
h=c[3],k=c[4],m=c[5],l=e[0];e=e[1];a[0]=c[0]*l;a[1]=f*l;a[2]=d*e;a[3]=h*e;a[4]=k;a[5]=m;return a};a.translate=function(a,c,e){var d=c[0],g=c[1],h=c[2],k=c[3],m=c[4];c=c[5];var l=e[0];e=e[1];a[0]=d;a[1]=g;a[2]=h;a[3]=k;a[4]=d*l+h*e+m;a[5]=g*l+k*e+c;return a};a.fromRotation=function(a,c){var e=Math.sin(c),d=Math.cos(c);a[0]=d;a[1]=e;a[2]=-e;a[3]=d;a[4]=0;a[5]=0;return a};a.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=c[1];a[4]=0;a[5]=0;return a};a.fromTranslation=function(a,c){a[0]=1;a[1]=
0;a[2]=0;a[3]=1;a[4]=c[0];a[5]=c[1];return a};a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports dojo/text!./bitblit.vs.glsl dojo/text!./bitblit.fs.glsl ../../../webgl/Program ../../../webgl/VertexArrayObject ../../../webgl/BufferObject".split(" "),
function(a,d,b,c,e,f,g){return function(){function a(){this._initialized=!1}a.prototype.render=function(a,b,c,e){a&&b&&(this._initialized||this._initialize(a),a.setBlendFunctionSeparate(1,771,1,771),a.bindVAO(this._vertexArrayObject),a.bindProgram(this._program),b.setSamplingMode(c),a.bindTexture(b,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",e),a.drawArrays(5,0,4),a.bindVAO())};a.prototype._initialize=function(a){if(this._initialized)return!0;var d={a_pos:0,a_tex:1},
h=new e(a,b,c,d);if(!h)return!1;var n=new Int8Array(16);n[0]=-1;n[1]=-1;n[2]=0;n[3]=0;n[4]=1;n[5]=-1;n[6]=1;n[7]=0;n[8]=-1;n[9]=1;n[10]=0;n[11]=1;n[12]=1;n[13]=1;n[14]=1;n[15]=1;a=new f(a,d,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:g.createVertex(a,35044,n)});this._program=h;this._vertexArrayObject=a;return this._initialized=!0};return a}()})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require",
"exports","dojo/_base/lang"],function(a,d,b){d.adjustScreenshotSettings=function(a,e){a=b.mixin({format:"png",quality:100},a||{});var d,g;a.includePadding?(d=e.width,g=e.height):(d=e.width-e.padding.left-e.padding.right,g=e.height-e.padding.top-e.padding.bottom);var h=d/g;void 0!==a.width&&void 0===a.height?a.height=a.width/h:void 0!==a.height&&void 0===a.width&&(a.width=h*a.height);void 0!==a.height&&(a.height=Math.floor(a.height));void 0!==a.width&&(a.width=Math.floor(a.width));!a.area&&!a.includePadding&&
(a.area={x:e.padding.left,y:e.padding.top,width:d,height:g});return a};d.resampleHermite=function(a,b,d,g,h,k,m){void 0===m&&(m=!0);var l=b/h;d/=k;for(var n=Math.ceil(l/2),p=Math.ceil(d/2),r=0;r<k;r++)for(var s=0;s<h;s++){for(var q=4*(s+(m?k-r-1:r)*h),t=0,u=0,v=0,x=0,w=0,z=0,A=0,y=(r+0.5)*d,B=Math.floor(r*d);B<(r+1)*d;B++)for(var E=Math.abs(y-(B+0.5))/p,H=(s+0.5)*l,E=E*E,J=Math.floor(s*l);J<(s+1)*l;J++){var F=Math.abs(H-(J+0.5))/n,t=Math.sqrt(E+F*F);-1<=t&&1>=t&&(t=2*t*t*t-3*t*t+1,0<t&&(F=4*(J+B*
b),A+=t*a[F+3],v+=t,255>a[F+3]&&(t=t*a[F+3]/250),x+=t*a[F],w+=t*a[F+1],z+=t*a[F+2],u+=t))}g[q]=x/u;g[q+1]=w/u;g[q+2]=z/u;g[q+3]=A/v}}})},"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define(["require","exports","./enums","./Extensions"],function(a,d,b,c){return function(){function a(b,e){this.gl=null;this._extensions=void 0;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,
modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=
0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.gl=b;this._extensions=new c(b,e);var d=b.getParameter(b.VIEWPORT);this._viewport={x:d[0],y:d[1],width:d[2],height:d[3]};d=this.extensions.textureFilterAnisotropic;this._parameters={versionString:b.getParameter(b.VERSION),
maxVertexTextureImageUnits:b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:b.getParameter(b.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:d?b.getParameter(d.MAX_TEXTURE_MAX_ANISOTROPY_EXT):void 0,maxTextureImageUnits:b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS)};this.enforceState()}Object.defineProperty(a.prototype,"extensions",{get:function(){return this._extensions},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});a.prototype.setBlendingEnabled=function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=a)};a.prototype.setBlendColor=function(a,b,c,e){if(a!==this._blendColorState.r||b!==this._blendColorState.g||c!==this._blendColorState.b||e!==this._blendColorState.a)this.gl.blendColor(a,b,c,e),
this._blendColorState.r=a,this._blendColorState.g=b,this._blendColorState.b=c,this._blendColorState.a=e};a.prototype.setBlendFunction=function(a,b){if(a!==this._blendFunctionState.srcRGB||b!==this._blendFunctionState.dstRGB)this.gl.blendFunc(a,b),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=b};a.prototype.setBlendFunctionSeparate=function(a,b,c,e){if(this._blendFunctionState.srcRGB!==a||this._blendFunctionState.srcAlpha!==
c||this._blendFunctionState.dstRGB!==b||this._blendFunctionState.dstAlpha!==e)this.gl.blendFuncSeparate(a,b,c,e),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=c,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=e};a.prototype.setBlendEquation=function(a){this._blendEquationState.mode!==a&&(this.gl.blendEquation(a),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=a)};a.prototype.setBlendEquationSeparate=function(a,b){if(this._blendEquationState.mode!==
a||this._blendEquationState.modeAlpha!==b)this.gl.blendEquationSeparate(a,b),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=b};a.prototype.setColorMask=function(a,b,c,e){if(this._colorMaskState.r!==a||this._colorMaskState.g!==b||this._colorMaskState.b!==c||this._colorMaskState.a!==e)this.gl.colorMask(a,b,c,e),this._colorMaskState.r=a,this._colorMaskState.g=b,this._colorMaskState.b=c,this._colorMaskState.a=e};a.prototype.setClearColor=function(a,b,c,e){if(this._clearColor.r!==a||
this._clearColor.g!==b||this._clearColor.b!==c||this._clearColor.a!==e)this.gl.clearColor(a,b,c,e),this._clearColor.r=a,this._clearColor.g=b,this._clearColor.b=c,this._clearColor.a=e};a.prototype.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=a)};a.prototype.setPolygonOffsetFillEnabled=function(a){this._polygonOffsetFillEnabled!==a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):
this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a)};a.prototype.setPolygonOffset=function(a,b){if(this._polygonOffset[0]!==a||this._polygonOffset[1]!==b)this._polygonOffset[0]=a,this._polygonOffset[1]=b,this.gl.polygonOffset(a,b)};a.prototype.setCullFace=function(a){this._cullFace!==a&&(this.gl.cullFace(a),this._cullFace=a)};a.prototype.setFrontFace=function(a){this._frontFace!==a&&(this.gl.frontFace(a),this._frontFace=a)};a.prototype.setScissorTestEnabled=function(a){this._scissorTestEnabled!==
a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=a)};a.prototype.setScissorRect=function(a,b,c,e){if(this._scissorRect.x!==a||this._scissorRect.y!==b||this._scissorRect.width!==c||this._scissorRect.height!==e)this.gl.scissor(a,b,c,e),this._scissorRect.x=a,this._scissorRect.y=b,this._scissorRect.width=c,this._scissorRect.height=e};a.prototype.setDepthTestEnabled=function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):
this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a)};a.prototype.setClearDepth=function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),this._clearDepth=a)};a.prototype.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a)};a.prototype.setDepthWriteEnabled=function(a){this._depthWriteEnabled!==a&&(this.gl.depthMask(a),this._depthWriteEnabled=a)};a.prototype.setDepthRange=function(a,b){if(this._depthRange.zNear!==a||this._depthRange.zFar!==b)this.gl.depthRange(a,
b),this._depthRange.zNear=a,this._depthRange.zFar=b};a.prototype.setStencilTestEnabled=function(a){this._stencilTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a)};a.prototype.setClearStencil=function(a){a!==this._clearStencil&&(this.gl.clearStencil(a),this._clearStencil=a)};a.prototype.setStencilFunction=function(a,b,c){if(this._stencilFunction.func!==a||this._stencilFunction.ref!==b||this._stencilFunction.mask!==c)this.gl.stencilFunc(a,
b,c),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=b,this._stencilFunction.mask=c};a.prototype.setStencilFunctionSeparate=function(a,b,c,e){if(this._stencilFunction.face!==a||this._stencilFunction.func!==b||this._stencilFunction.ref!==c||this._stencilFunction.mask!==e)this.gl.stencilFuncSeparate(a,b,c,e),this._stencilFunction.face=a,this._stencilFunction.func=b,this._stencilFunction.ref=c,this._stencilFunction.mask=e};a.prototype.setStencilWriteMask=function(a){this._stencilWriteMask!==
a&&(this.gl.stencilMask(a),this._stencilWriteMask=a)};a.prototype.setStencilOp=function(a,b,c){if(this._stencilOperation.fail!==a||this._stencilOperation.zFail!==b||this._stencilOperation.zPass!==c)this.gl.stencilOp(a,b,c),this._stencilOperation.face=1032,this._stencilOperation.fail=a,this._stencilOperation.zFail=b,this._stencilOperation.zPass=c};a.prototype.setStencilOpSeparate=function(a,b,c,e){if(this._stencilOperation.face!==a||this._stencilOperation.fail!==b||this._stencilOperation.zFail!==c||
this._stencilOperation.zPass!==e)this.gl.stencilOpSeparate(a,b,c,e),this._stencilOperation.face=a,this._stencilOperation.face=a,this._stencilOperation.fail=b,this._stencilOperation.zFail=c,this._stencilOperation.zPass=e};a.prototype.setLineWidth=function(a){var b=this._lineWidth;this._lineWidth!==a&&(this.gl.lineWidth(a),this._lineWidth=a);return b};a.prototype.setActiveTexture=function(a){var c=this._activeTextureUnit;0<=a&&a!==this._activeTextureUnit&&(this.gl.activeTexture(b.BASE_TEXTURE_UNIT+
a),this._activeTextureUnit=a);return c};a.prototype.clear=function(a){a&&this.gl.clear(a)};a.prototype.drawArrays=function(a,b,c){this.gl.drawArrays(a,b,c)};a.prototype.drawElements=function(a,b,c,e){5123===c?this.gl.drawElements(a,b,c,e):5125===c&&this._extensions.elementIndexUint?this.gl.drawElements(a,b,c,e):console.warn("Data type is uint however extension OES_Element_index_unit is not supported therefore this draw call cannot be made")};a.prototype.drawArraysInstanced=function(a,b,c,e){this._extensions.angleInstancedArrays?
this._extensions.angleInstancedArrays.drawArraysInstancedANGLE(a,b,c,e):console.error("Extension ANGLE_instanced_arrays isn't supported!")};a.prototype.drawElementsInstanced=function(a,b,c,e,d){this._extensions.angleInstancedArrays?this._extensions.angleInstancedArrays.drawElementsInstancedANGLE(a,b,c,e,d):console.error("Extension ANGLE_instanced_arrays isn't supported!")};a.prototype.setViewport=function(a,b,c,e){var d=this._viewport;if(d.x!==a||d.y!==b||d.width!==c||d.height!==e)d.x=a,d.y=b,d.width=
c,d.height=e,this.gl.viewport(a,b,c,e)};a.prototype.getViewport=function(){return this._viewport};a.prototype.bindProgram=function(a){a?this._activeShaderProgram!==a&&(a.initialize(),this.gl.useProgram(a.glName),this._activeShaderProgram=a):(this.gl.useProgram(null),this._activeShaderProgram=null)};a.prototype.bindTexture=function(b,c){void 0===c&&(c=0);-1===a._MAX_TEXTURE_IMAGE_UNITS&&(a._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(c>=a._MAX_TEXTURE_IMAGE_UNITS||
0>c)&&console.error("Input texture unit is out of range of available units!");var d=this._textureUnitMap[c];this.setActiveTexture(c);null==b?(null!=d&&this.gl.bindTexture(d.descriptor.target,null),this._textureUnitMap[c]=null):d&&d.id===b.id?b.applyChanges():(this.gl.bindTexture(b.descriptor.target,b.glName),b.applyChanges(),this._textureUnitMap[c]=b)};a.prototype.bindFramebuffer=function(a){a?this._activeFramebuffer!==a&&(a.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.glName),this._activeFramebuffer=
a):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};a.prototype.bindBuffer=function(b){b&&(34962===b.bufferType?this._activeVertexBuffer=a._bindBuffer(this.gl,b,b.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=a._bindBuffer(this.gl,b,b.bufferType,this._activeIndexBuffer))};a.prototype.unbindBuffer=function(b){34962===b?this._activeVertexBuffer=a._bindBuffer(this.gl,null,b,this._activeVertexBuffer):this._activeIndexBuffer=a._bindBuffer(this.gl,null,b,
this._activeIndexBuffer)};a.prototype.bindVAO=function(a){a?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===a.id||(a.bind(),this._activeVertexArrayObject=a):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};a.prototype.getBoundTexture=function(a){return this._textureUnitMap[a]};a.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};a.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};
a.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var a=0;a<this.parameters.maxTextureImageUnits;a++)this.bindTexture(null,a);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);
this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};a.prototype.enforceState=
function(){var a=this.gl,c=this._extensions.vao;c&&c.bindVertexArrayOES(null);for(var e=0;e<this.parameters.maxVertexAttributes;e++)a.disableVertexAttribArray(e);this._activeVertexBuffer?a.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):a.bindBuffer(34962,null);this._activeIndexBuffer?a.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):a.bindBuffer(34963,null);if(c&&this._activeVertexArrayObject){if(c=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),
this._activeVertexArrayObject=null;this.bindVAO(c)}a.bindFramebuffer(a.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);a.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);a.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);!0===this._blendEnabled?a.enable(this.gl.BLEND):a.disable(this.gl.BLEND);a.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);a.blendFuncSeparate(this._blendFunctionState.srcRGB,
this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);a.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);a.clearDepth(this._clearDepth);a.clearStencil(this._clearStencil);a.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);a.cullFace(this._cullFace);a.depthFunc(this._depthFunction);a.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?
a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);a.depthMask(this._depthWriteEnabled);a.frontFace(this._frontFace);a.lineWidth(this._lineWidth);!0===this._polygonCullingEnabled?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE);a.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?a.enable(a.POLYGON_OFFSET_FILL):a.disable(a.POLYGON_OFFSET_FILL);a.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?
a.enable(a.SCISSOR_TEST):a.disable(a.SCISSOR_TEST);a.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);a.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST);a.stencilMask(this._stencilWriteMask);for(c=0;c<this.parameters.maxTextureImageUnits;c++)a.activeTexture(b.BASE_TEXTURE_UNIT+c),a.bindTexture(3553,
null),(e=this._textureUnitMap[c])&&a.bindTexture(e.descriptor.target,e.glName);a.activeTexture(b.BASE_TEXTURE_UNIT+this._activeTextureUnit);a.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};a._bindBuffer=function(a,b,c,e){if(!b)return a.bindBuffer(c,null),null;if(e===b)return e;a.bindBuffer(c,b.glName);return b};a._MAX_TEXTURE_IMAGE_UNITS=-1;return a}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(a,d){d.BASE_TEXTURE_UNIT=
33984})},"esri/layers/vectorTiles/views/webgl/Extensions":function(){define(["require","exports"],function(a,d){return function(){function a(b,e){this._compressedTextureS3TCInit=this._shaderTextureLODInit=this._textureFilterAnisotropicInit=this._depthTextureInit=this._elementIndexUintInit=this._standardDerivativesInit=this._angleInstancedArraysInit=this._vaoInit=!1;this._gl=b;if(e&&e.disabledExtensions){var d=e.disabledExtensions;d.vao&&(this._vao=null,this._vaoInit=!0);d.angleInstancedArrays&&(this._angleInstancedArrays=
null,this._angleInstancedArraysInit=!0);d.standardDerivatives&&(this._standardDerivatives=null,this._standardDerivativesInit=!0);d.elementIndexUint&&(this._elementIndexUint=null,this._elementIndexUintInit=!0);d.depthTexture&&(this._depthTexture=null,this._depthTextureInit=!0);d.textureFilterAnisotropic&&(this._textureFilterAnisotropic=null,this._textureFilterAnisotropicInit=!0);d.compressedTextureS3TC&&(this._compressedTextureS3TC=null,this._compressedTextureS3TCInit=!0);d.shaderTextureLOD&&(this._shaderTextureLOD=
null,this._shaderTextureLODInit=!0)}}Object.defineProperty(a.prototype,"vao",{get:function(){this._vaoInit||(this._vao=this._gl.getExtension("OES_vertex_array_object")||this._gl.getExtension("MOZ_OES_vertex_array_object")||this._gl.getExtension("WEBKIT_OES_vertex_array_object"),this._vaoInit=!0);return this._vao},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"angleInstancedArrays",{get:function(){this._angleInstancedArraysInit||(this._angleInstancedArrays=this._gl.getExtension("ANGLE_instanced_arrays"),
this._angleInstancedArraysInit=!0);return this._angleInstancedArrays},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"standardDerivatives",{get:function(){this._standardDerivativesInit||(this._standardDerivatives=this._gl.getExtension("OES_standard_derivatives"),this._standardDerivativesInit=!0);return this._standardDerivatives},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"elementIndexUint",{get:function(){this._elementIndexUintInit||(this._elementIndexUint=
this._gl.getExtension("OES_element_index_uint"),this._elementIndexUintInit=!0);return this._elementIndexUint},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"depthTexture",{get:function(){this._depthTextureInit||(this._depthTexture=this._gl.getExtension("WEBGL_depth_texture")||this._gl.getExtension("MOZ_WEBGL_depth_texture")||this._gl.getExtension("WEBKIT_WEBGL_depth_texture"),this._depthTextureInit=!0);return this._depthTexture},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"textureFilterAnisotropic",{get:function(){this._textureFilterAnisotropicInit||(this._textureFilterAnisotropic=this._gl.getExtension("EXT_texture_filter_anisotropic")||this._gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this._gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this._textureFilterAnisotropicInit=!0);return this._textureFilterAnisotropic},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"shaderTextureLOD",{get:function(){this._shaderTextureLODInit||(this._shaderTextureLOD=
this._gl.getExtension("EXT_shader_texture_lod"),this._shaderTextureLODInit=!0);return this._shaderTextureLOD},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"compressedTextureS3TC",{get:function(){this._compressedTextureS3TCInit||(this._compressedTextureS3TC=this._gl.getExtension("WEBGL_compressed_texture_s3tc"),this._compressedTextureS3TCInit=!0);return this._compressedTextureS3TC},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require",
"exports","./Texture"],function(a,d,b){return function(){function a(e,d,g,h){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=e;this._desc={colorTarget:d.colorTarget,depthStencilTarget:d.depthStencilTarget,width:d.width,height:d.height,multisampled:d.multisampled};this._id=a._nextId++;g&&(e=void 0,g instanceof b?(this._colorAttachment=g,e=g.descriptor):(e=g,this._colorAttachment=new b(this._context,e)),0!==this._desc.colorTarget&&
console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),a._validateTextureDimensions(e,this._desc));h&&(this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),g=void 0,h instanceof b?(this._depthStencilTexture=h,g=this._depthStencilTexture.descriptor):(g=h,this._depthStencilTexture=new b(this._context,
g)),a._validateTextureDimensions(g,this._desc))}a.create=function(b,d){return new a(b,d)};a.createWithAttachments=function(b,d,g,h){return new a(b,g,d,h)};Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"colorTexture",{get:function(){return this._colorAttachment instanceof b?this._colorAttachment:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});
a.prototype.dispose=function(){this._context&&this._glName&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),this._context.gl.deleteFramebuffer(this._glName),this._glName=null)};a.prototype.attachColorTexture=function(b){if(b){a._validateTextureDimensions(b.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,b.glName,0)}this._colorAttachment=
b}};a.prototype.detachColorTexture=function(){var a=void 0;if(this._colorAttachment instanceof b){a=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;this._context.gl.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)}this._colorAttachment=null}return a};a.prototype.attachDepthStencilTexture=function(b){if(b){var d=b.descriptor;34041!==d.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");
34042!==d.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!");this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");a._validateTextureDimensions(d,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),d=this._context.gl,d.framebufferTexture2D(d.FRAMEBUFFER,
d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,b.glName,0));this._depthStencilTexture=b}};a.prototype.detachDepthStencilTexture=function(){var a=this._depthStencilTexture;if(a&&this._initialized){this._context.bindFramebuffer(this);var b=this._context.gl;this._context.gl.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return a};a.prototype.copyToTexture=function(a,b,c,d,k,m,l){(0>a||0>b||0>k||0>m)&&console.error("Offsets cannot be negative!");
(0>=c||0>=d)&&console.error("Copy width and height must be greater than zero!");var n=this._desc,p=l.descriptor;3553!==l.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(a+c>n.width||b+d>n.height||k+c>p.width||m+d>p.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");n=this._context;n.bindTexture(l);n.bindFramebuffer(this);n.gl.copyTexSubImage2D(3553,0,k,m,a,b,c,d)};a.prototype.readPixels=function(a,b,c,d,k,m,l){(0>=
c||0>=d)&&console.error("Copy width and height must be greater than zero!");l||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(a,b,c,d,k,m,l)};a.prototype.resize=function(e,d){var g=this._desc;if(!(g.width===e&&g.height===d))if(this._initialized)g.width=e,g.height=d,this._colorAttachment instanceof b?(h=this._colorAttachment,g=h.descriptor,g.width=e,g.height=d,this._colorAttachment=new b(this._context,g),a._validateTextureDimensions(h.descriptor,
this._desc)):this._colorAttachment=null,null!=this._depthStencilTexture&&(g=this._depthStencilTexture.descriptor,g.width=e,g.height=d,this._depthStencilTexture=new b(this._context,g)),this._initialized=!1;else{g.width=e;g.height=d;if(this._colorAttachment instanceof b){var h=this._colorAttachment;h.resize(e,d)}this._depthStencilTexture&&this._depthStencilTexture.resize(e,d)}};a.prototype.initialize=function(){if(this._initialized)return!1;var a=this._context.gl,c=a.createFramebuffer(),d=this._desc;
a.bindFramebuffer(a.FRAMEBUFFER,c);if(!this._colorAttachment)if(0===d.colorTarget)this._colorAttachment=new b(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:d.width,height:d.height});else{var h=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,h);a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,d.width,d.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,h);this._colorAttachment=h}this._colorAttachment instanceof
b&&a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._colorAttachment.glName,0);switch(d.depthStencilTarget){case 1:case 3:h=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,h);var k=1===d.depthStencilTarget?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT;a.renderbufferStorage(a.RENDERBUFFER,1===d.depthStencilTarget?a.DEPTH_COMPONENT16:a.DEPTH_STENCIL,d.width,d.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,k,a.RENDERBUFFER,h);this._depthAttachment=h;break;case 2:h=
a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,h);a.renderbufferStorage(a.RENDERBUFFER,a.STENCIL_INDEX8,d.width,d.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.STENCIL_ATTACHMENT,a.RENDERBUFFER,h);this._stencilAttachment=h;break;case 4:this._depthStencilTexture||(this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new b(this._context,
{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:d.width,height:d.height})),a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,this._depthStencilTexture.glName,0)}a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=c;return this._initialized=!0};a.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof b){var a=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);
var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)}a.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(a=this._colorAttachment,c=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(a));this._colorAttachment=null};a.prototype._disposeDepthStencilAttachments=function(){var a=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);
var b=this._context.gl;b.framebufferRenderbuffer(b.FRAMEBUFFER,1===this._desc.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,null)}a.deleteRenderbuffer(this._depthAttachment);this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),b=this._context.gl,b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,b.RENDERBUFFER,null)),a.deleteRenderbuffer(this._stencilAttachment),this._stencilAttachment=null);this._depthStencilTexture&&
(this._initialized&&(this._context.bindFramebuffer(this),a=this._context.gl,a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};a._validateTextureDimensions=function(a,b){3553!==a.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==b.width&&0<=b.width&&void 0!==b.height&&0<=b.height?(b.width!==a.width||b.height!==a.height)&&console.error("Color attachment texture must match the framebuffer's!"):
(b.width=a.width,b.height=a.height)};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/webgl/webgl-utils":function(){define([],function(){var a=function(a,b){for(var d=["webgl","experimental-webgl","webkit-3d","moz-webgl"],g=null,h=0;h<d.length;++h){try{g=a.getContext(d[h],b)}catch(k){}if(g)break}return g},d=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){return window.setTimeout(a,
1E3/60)}).bind(window),b=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout).bind(window);return{create3DContext:a,setupWebGL:function(b,d){function f(a){var d=b.parentNode;d&&(d.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
a+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}if(!window.WebGLRenderingContext)return f('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'];var g=a(b,d);return!g?(f('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e']):[g]},detectWebGL:function(){var b;try{b=window.WebGLRenderingContext}catch(d){b=[!1,0]}var f;try{f=a(document.createElement("canvas"))}catch(g){f=[!1,1]}return!b?[!1,0]:!f?[!1,1]:[!0,{VERSION:f.getParameter(f.VERSION),SHADING_LANGUAGE_VERSION:f.getParameter(f.SHADING_LANGUAGE_VERSION),VENDOR:f.getParameter(f.VENDOR),RENDERER:f.getParameter(f.RENDERER),
EXTENSIONS:f.getSupportedExtensions(),MAX_TEXTURE_SIZE:f.getParameter(f.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:f.getParameter(f.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:f.getParameter(f.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]},requestAnimFrame:d,cancelAnimFrame:b}})},"esri/layers/vectorTiles/views/2d/FrameBudget":function(){define(["require","exports","../../core/now"],function(a,d,b){return function(){function a(b){void 0===b&&(b=Number.MAX_VALUE);this._budget=this._begin=0;this.enabled=
!0;this.reset(b)}a.now=function(){return b()};Object.defineProperty(a.prototype,"done",{get:function(){return this.enabled&&this.elapsed>=this._budget},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"elapsed",{get:function(){return b()-this._begin},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"remaining",{get:function(){return Math.max(this._budget-this.elapsed,0)},enumerable:!0,configurable:!0});a.prototype.reset=function(a){void 0===a&&(a=Number.MAX_VALUE);
this._begin=b();this._budget=this.enabled?a:Number.MAX_VALUE};return a}()})},"esri/layers/vectorTiles/views/2d/layers/support/TileInfoView":function(){define("require exports ./LODInfo ./TileKey ./TileSpan ./TileCoverage".split(" "),function(a,d,b,c,e,f){var g=function(){function a(b,c,d,e,f,g,h,k){this.x=b;this.ymin=c;this.ymax=d;this.invM=e;this.leftAdjust=f;this.rightAdjust=g;this.leftBound=h;this.rightBound=k}a.create=function(b,c){b[1]>c[1]&&(d=[c,b],b=d[0],c=d[1]);var d=b[0],e=b[1],f=c[0],g=
c[1],h=f-d,t=g-e,t=0!==t?h/t:0,u=(Math.ceil(e)-e)*t,v=(Math.floor(e)-e)*t;return new a(d,Math.floor(e),Math.ceil(g),t,0>h?u:v,0>h?v:u,0>h?f:d,0>h?d:f);var d};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),h=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(c,d){var e=this;this.scales=[];this._lodInfos=
null;this._infoByScale={};this._infoByLevel={};var f=c.lods.slice();f.sort(function(a,b){return b.scale-a.scale});var g=this._lodInfos=f.map(function(a){return b.create(c,a,d)});f.forEach(function(a,b){e._infoByLevel[a.level]=g[b];e._infoByScale[a.scale]=g[b];e.scales[b]=a.scale},this);this._wrap=c.spatialReference.isWrappable}a.prototype.getTileTopLeft=function(a,b){var c=this._infoByLevel[b.level];return!c?a:c.getTileTopLeft(a,b)};a.prototype.getTileBottomRight=function(a,b){var c=this._infoByLevel[b.level];
return!c?a:c.getTileBottomRight(a,b)};a.prototype.getTileResolution=function(a){a=this._infoByLevel[a.level];return!a?-1:a.resolution};a.prototype.getTileParentId=function(a){a=c.from(a);var b=this._lodInfos.indexOf(this._infoByLevel[a.level])-1;return 0>b?null:this.getTileIdAtParent(this._lodInfos[b],a)};a.prototype.getTileIdAtParent=function(a,b){var d=c.from(b),e=this._infoByLevel[d.level];if(a.resolution<e.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+a.resolution+
" is not a parent resolution of "+e.resolution);return a.resolution===e.resolution?d.id:c.getId(a.level,Math.floor(d.row*e.resolution/a.resolution+0.01),Math.floor(d.col*e.resolution/a.resolution+0.01),d.world)};a.prototype.getTileCoverage=function(a){var b=this.getClosestInfoForScale(a.scale),c=this._wrap,d;d=Infinity;var k=-Infinity,s,q,t=[];h[0][0]=h[0][1]=h[1][1]=h[3][0]=0;h[1][0]=h[2][0]=a.size[0];h[2][1]=h[3][1]=a.size[1];for(var u=h.map(function(c){a.toMap(c,c);c[0]=b.getColumnForX(c[0]);c[1]=
b.getRowForY(c[1]);return c}),v=[],x=3,w=0;4>w;w++)u[w][1]!==u[x][1]&&(x=g.create(u[w],u[x]),d=Math.min(x.ymin,d),k=Math.max(x.ymax,k),void 0===v[x.ymin]&&(v[x.ymin]=[]),v[x.ymin].push(x)),x=w;if(null==d||null==k||100<k-d)return null;for(u=[];d<k;){null!=v[d]&&(u=u.concat(v[d]));s=Infinity;q=-Infinity;for(w=u.length-1;0<=w;w--)x=u[w],s=Math.min(s,x.getLeftCol()),q=Math.max(q,x.getRightCol());s=Math.floor(s);q=Math.floor(q);if(d>=b.first[1]&&d<=b.last[1])if(c)if(b.size[0]<b.worldSize[0]){w=Math.floor(s/
b.worldSize[0]);for(x=Math.floor(q/b.worldSize[0]);w<=x;w++)t.push(new e(d,Math.max(b.getFirstColumnForWorld(w),s),Math.min(b.getLastColumnForWorld(w),q)))}else t.push(new e(d,s,q));else s>b.last[0]||q<b.first[0]||(s=Math.max(s,b.first[0]),q=Math.min(q,b.last[0]),t.push(new e(d,s,q)));d+=1;for(w=u.length-1;0<=w;w--)x=u[w],x.ymax>=d?x.incrRow():u.splice(w,1)}return new f(b,t)};a.prototype.intersects=function(a,b){var d=c.from(b),e=this._infoByLevel[d.level],f=a.lodInfo;if(f.resolution>e.resolution){var g=
c.fromId(this.getTileIdAtParent(f,d)),h=f.denormalizeCol(g.col,g.world);return a.spans.some(function(a){return a.row===g.row&&a.colFrom<=h&&a.colTo>=h})}if(f.resolution<e.resolution){var k=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]),u=k[0],v=k[1],x=k[2],k=k[3],w=e.denormalizeCol(d.col,d.world),z=f.getColumnForX(e.getXForColumn(w)),A=f.getRowForY(e.getYForRow(d.row)),
w=f.getColumnForX(e.getXForColumn(w+1))-1,e=f.getRowForY(e.getYForRow(d.row+1))-1;return!(z>k||w<x||A>v||e<u)}var y=f.denormalizeCol(d.col,d.world);return a.spans.some(function(a){return a.row===d.row&&a.colFrom<=y&&a.colTo>=y})};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;this._infoByScale[a]||(a=b.reduce(function(b,c,d,e){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]));return this._infoByScale[a]};return a}()})},"esri/layers/vectorTiles/views/2d/layers/support/LODInfo":function(){define(["require",
"exports","./TileKey","../../../../geometry/support/spatialReferenceUtils"],function(a,d,b,c){function e(a,b,c){a[0]=b;a[1]=c;return a}return function(){function a(b,c,d,e,f,n,p,r,s,q,t){this.level=b;this.resolution=c;this.origin=d;this.first=e;this.last=f;this.size=n;this.norm=p;this.worldStart=r;this.worldEnd=s;this.worldSize=q;this.wrap=t}a.create=function(b,d,k){var m=c.getInfo(b.spatialReference),l=[b.origin.x,b.origin.y],n=[b.size[0]*d.resolution,b.size[1]*d.resolution],p=[-Infinity,-Infinity],
r=[Infinity,Infinity],s=[Infinity,Infinity];k&&(e(p,Math.max(0,Math.floor((k.xmin-l[0])/n[0])),Math.max(0,Math.floor((l[1]-k.ymax)/n[1]))),e(r,Math.max(0,Math.floor((k.xmax-l[0])/n[0])),Math.max(0,Math.floor((l[1]-k.ymin)/n[1]))),e(s,r[0]-p[0]+1,r[1]-p[1]+1));var q;m?(b=[Math.ceil(Math.round(2*m.origin[1]/d.resolution)/b.size[0]),s[1]],m=[Math.floor((m.origin[0]-l[0])/n[0]),p[1]],k=[b[0]-m[0]-1,r[1]],q=!0):(m=p,k=r,b=s,q=!1);return new a(d.level,d.resolution,l,p,r,s,n,m,k,b,q)};a.prototype.normalizeCol=
function(a){if(!this.wrap)return a;var b=this.worldSize[0];return 0>a?b-1-Math.abs((a+1)%b):a%b};a.prototype.denormalizeCol=function(a,b){return!this.wrap?a:this.worldSize[0]*b+a};a.prototype.getWorldForColumn=function(a){return!this.wrap?0:Math.floor(a/this.worldSize[0])};a.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};a.prototype.getLastColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};a.prototype.getColumnForX=function(a){return(a-
this.origin[0])/this.norm[0]};a.prototype.getXForColumn=function(a){return this.origin[0]+a*this.norm[0]};a.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]};a.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]};a.prototype.getTileTopLeft=function(a,c){var d=b.from(c);return e(a,this.getXForColumn(this.denormalizeCol(d.col,d.world)),this.getYForRow(d.row))};a.prototype.getTileBottomRight=function(a,c){var d=b.from(c);return e(a,this.getXForColumn(this.denormalizeCol(d.col,
d.world)+1),this.getYForRow(d.row+1))};return a}()})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(a,d,b){d.isGeographic=function(a){return a.wkid?null==b[a.wkid]:a.wkt?/^\s*GEOGCS/i.test(a.wkt):!1};d.getInfo=function(a){return a.wkid?c[a.wkid]:null};a=[-2.0037508342788905E7,2.0037508342788905E7];d=[-2.0037508342787E7,2.0037508342787E7];var c={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:d,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:d,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:d,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:d,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define([],function(){var a,d={values:[1,0.3048,0.3048006096012192,0.3047972654,0.9143917962,0.201166195164,0.9143984146160287,0.3047994715386762,20.11676512155263,20.11678249437587,0.9143985307444408,0.91439523,0.3047997101815088,20.116756,5E4,15E4],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,
2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,
3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,
3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,
3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,
5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,
6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,
6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,
6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,
6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,
7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,
7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,
26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,
53034:0,53048:0,53049:0,54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,
103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,
103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,
103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,
103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(a=2E3;2045>=a;a++)d[a]=0;for(a=2056;2065>=a;a++)d[a]=0;for(a=2067;2135>=a;a++)d[a]=0;for(a=2137;2154>=a;a++)d[a]=0;for(a=2161;2170>=a;a++)d[a]=0;for(a=2172;2193>=a;a++)d[a]=0;for(a=2195;2198>=a;a++)d[a]=0;for(a=2200;2203>=a;a++)d[a]=0;for(a=2205;2217>=a;a++)d[a]=0;for(a=2222;2224>=a;a++)d[a]=1;for(a=2225;2250>=
a;a++)d[a]=2;for(a=2251;2253>=a;a++)d[a]=1;for(a=2257;2264>=a;a++)d[a]=2;for(a=2274;2279>=a;a++)d[a]=2;for(a=2280;2282>=a;a++)d[a]=1;for(a=2283;2289>=a;a++)d[a]=2;for(a=2290;2292>=a;a++)d[a]=0;for(a=2308;2313>=a;a++)d[a]=0;for(a=2315;2491>=a;a++)d[a]=0;for(a=2494;2866>=a;a++)d[a]=0;for(a=2867;2869>=a;a++)d[a]=1;for(a=2870;2888>=a;a++)d[a]=2;for(a=2891;2895>=a;a++)d[a]=2;for(a=2896;2898>=a;a++)d[a]=1;for(a=2902;2908>=a;a++)d[a]=2;for(a=2915;2920>=a;a++)d[a]=2;for(a=2921;2923>=a;a++)d[a]=1;for(a=2924;2930>=
a;a++)d[a]=2;for(a=2931;2962>=a;a++)d[a]=0;for(a=2964;2968>=a;a++)d[a]=2;for(a=2969;2973>=a;a++)d[a]=0;for(a=2975;2991>=a;a++)d[a]=0;for(a=2995;3051>=a;a++)d[a]=0;for(a=3054;3079>=a;a++)d[a]=0;for(a=3081;3088>=a;a++)d[a]=0;for(a=3092;3101>=a;a++)d[a]=0;for(a=3106;3138>=a;a++)d[a]=0;for(a=3146;3151>=a;a++)d[a]=0;for(a=3153;3166>=a;a++)d[a]=0;for(a=3168;3172>=a;a++)d[a]=0;for(a=3174;3203>=a;a++)d[a]=0;for(a=3294;3358>=a;a++)d[a]=0;for(a=3367;3403>=a;a++)d[a]=0;for(a=3408;3416>=a;a++)d[a]=0;for(a=3417;3438>=
a;a++)d[a]=2;for(a=3441;3446>=a;a++)d[a]=2;for(a=3447;3450>=a;a++)d[a]=0;for(a=3451;3459>=a;a++)d[a]=2;for(a=3460;3478>=a;a++)d[a]=0;for(a=3554;3559>=a;a++)d[a]=0;for(a=3560;3570>=a;a++)d[a]=2;for(a=3571;3581>=a;a++)d[a]=0;for(a=3594;3597>=a;a++)d[a]=0;for(a=3601;3604>=a;a++)d[a]=0;for(a=3637;3639>=a;a++)d[a]=0;for(a=3665;3667>=a;a++)d[a]=0;for(a=3693;3695>=a;a++)d[a]=0;for(a=3701;3727>=a;a++)d[a]=0;for(a=3728;3739>=a;a++)d[a]=2;for(a=3740;3751>=a;a++)d[a]=0;for(a=3753;3760>=a;a++)d[a]=2;for(a=3761;3773>=
a;a++)d[a]=0;for(a=3775;3777>=a;a++)d[a]=0;for(a=3779;3781>=a;a++)d[a]=0;for(a=3783;3785>=a;a++)d[a]=0;for(a=3788;3791>=a;a++)d[a]=0;for(a=3797;3802>=a;a++)d[a]=0;for(a=3814;3816>=a;a++)d[a]=0;for(a=3825;3829>=a;a++)d[a]=0;for(a=3832;3841>=a;a++)d[a]=0;for(a=3844;3852>=a;a++)d[a]=0;for(a=3873;3885>=a;a++)d[a]=0;for(a=3890;3893>=a;a++)d[a]=0;for(a=3907;3912>=a;a++)d[a]=0;for(a=3942;3950>=a;a++)d[a]=0;for(a=3968;3970>=a;a++)d[a]=0;for(a=3973;3976>=a;a++)d[a]=0;for(a=3986;3989>=a;a++)d[a]=0;for(a=3994;3997>=
a;a++)d[a]=0;for(a=4048;4051>=a;a++)d[a]=0;for(a=4056;4063>=a;a++)d[a]=0;for(a=4093;4096>=a;a++)d[a]=0;for(a=4390;4398>=a;a++)d[a]=0;for(a=4399;4413>=a;a++)d[a]=2;for(a=4418;4433>=a;a++)d[a]=2;for(a=4455;4457>=a;a++)d[a]=2;for(a=4484;4489>=a;a++)d[a]=0;for(a=4491;4554>=a;a++)d[a]=0;for(a=4568;4589>=a;a++)d[a]=0;for(a=4652;4656>=a;a++)d[a]=0;for(a=4766;4800>=a;a++)d[a]=0;for(a=5014;5016>=a;a++)d[a]=0;for(a=5069;5072>=a;a++)d[a]=0;for(a=5105;5130>=a;a++)d[a]=0;for(a=5173;5188>=a;a++)d[a]=0;for(a=5253;5259>=
a;a++)d[a]=0;for(a=5269;5275>=a;a++)d[a]=0;for(a=5292;5311>=a;a++)d[a]=0;for(a=5329;5331>=a;a++)d[a]=0;for(a=5343;5349>=a;a++)d[a]=0;for(a=5355;5357>=a;a++)d[a]=0;for(a=5387;5389>=a;a++)d[a]=0;for(a=5459;5463>=a;a++)d[a]=0;for(a=5479;5482>=a;a++)d[a]=0;for(a=5518;5520>=a;a++)d[a]=0;for(a=5530;5539>=a;a++)d[a]=0;for(a=5550;5552>=a;a++)d[a]=0;for(a=5562;5583>=a;a++)d[a]=0;for(a=5623;5625>=a;a++)d[a]=2;for(a=5631;5639>=a;a++)d[a]=0;for(a=5649;5653>=a;a++)d[a]=0;for(a=5663;5680>=a;a++)d[a]=0;for(a=5682;5685>=
a;a++)d[a]=0;for(a=5875;5877>=a;a++)d[a]=0;for(a=5921;5940>=a;a++)d[a]=0;for(a=6050;6125>=a;a++)d[a]=0;for(a=6244;6275>=a;a++)d[a]=0;for(a=6328;6348>=a;a++)d[a]=0;for(a=6350;6356>=a;a++)d[a]=0;for(a=6366;6372>=a;a++)d[a]=0;for(a=6381;6387>=a;a++)d[a]=0;for(a=6393;6404>=a;a++)d[a]=0;for(a=6480;6483>=a;a++)d[a]=0;for(a=6511;6514>=a;a++)d[a]=0;for(a=6579;6581>=a;a++)d[a]=0;for(a=6619;6624>=a;a++)d[a]=0;for(a=6625;6627>=a;a++)d[a]=2;for(a=6628;6632>=a;a++)d[a]=0;for(a=6634;6637>=a;a++)d[a]=0;for(a=6669;6692>=
a;a++)d[a]=0;for(a=6707;6709>=a;a++)d[a]=0;for(a=6720;6723>=a;a++)d[a]=0;for(a=6732;6738>=a;a++)d[a]=0;for(a=6931;6933>=a;a++)d[a]=0;for(a=6956;6959>=a;a++)d[a]=0;for(a=7005;7007>=a;a++)d[a]=0;for(a=7057;7070>=a;a++)d[a]=2;for(a=7074;7082>=a;a++)d[a]=0;for(a=7109;7118>=a;a++)d[a]=0;for(a=7119;7127>=a;a++)d[a]=1;for(a=7374;7376>=a;a++)d[a]=0;for(a=7528;7586>=a;a++)d[a]=0;for(a=7587;7645>=a;a++)d[a]=2;for(a=7845;7859>=a;a++)d[a]=0;for(a=20002;20032>=a;a++)d[a]=0;for(a=20062;20092>=a;a++)d[a]=0;for(a=
20135;20138>=a;a++)d[a]=0;for(a=20248;20258>=a;a++)d[a]=0;for(a=20348;20358>=a;a++)d[a]=0;for(a=20436;20440>=a;a++)d[a]=0;for(a=20822;20824>=a;a++)d[a]=0;for(a=20934;20936>=a;a++)d[a]=0;for(a=21035;21037>=a;a++)d[a]=0;for(a=21095;21097>=a;a++)d[a]=0;for(a=21148;21150>=a;a++)d[a]=0;for(a=21413;21423>=a;a++)d[a]=0;for(a=21473;21483>=a;a++)d[a]=0;for(a=21780;21782>=a;a++)d[a]=0;for(a=21891;21894>=a;a++)d[a]=0;for(a=21896;21899>=a;a++)d[a]=0;for(a=22171;22177>=a;a++)d[a]=0;for(a=22181;22187>=a;a++)d[a]=
0;for(a=22191;22197>=a;a++)d[a]=0;for(a=22234;22236>=a;a++)d[a]=0;for(a=22521;22525>=a;a++)d[a]=0;for(a=22991;22994>=a;a++)d[a]=0;for(a=23028;23038>=a;a++)d[a]=0;for(a=23830;23853>=a;a++)d[a]=0;for(a=23866;23872>=a;a++)d[a]=0;for(a=23877;23884>=a;a++)d[a]=0;for(a=23886;23894>=a;a++)d[a]=0;for(a=23946;23948>=a;a++)d[a]=0;for(a=24311;24313>=a;a++)d[a]=0;for(a=24342;24347>=a;a++)d[a]=0;for(a=24370;24374>=a;a++)d[a]=10;for(a=24375;24381>=a;a++)d[a]=0;for(a=24718;24721>=a;a++)d[a]=0;for(a=24817;24821>=
a;a++)d[a]=0;for(a=24877;24882>=a;a++)d[a]=0;for(a=24891;24893>=a;a++)d[a]=0;for(a=25391;25395>=a;a++)d[a]=0;for(a=25828;25838>=a;a++)d[a]=0;for(a=26191;26195>=a;a++)d[a]=0;for(a=26391;26393>=a;a++)d[a]=0;for(a=26701;26722>=a;a++)d[a]=0;for(a=26729;26799>=a;a++)d[a]=2;for(a=26801;26803>=a;a++)d[a]=2;for(a=26811;26813>=a;a++)d[a]=2;for(a=26847;26870>=a;a++)d[a]=2;for(a=26891;26899>=a;a++)d[a]=0;for(a=26901;26923>=a;a++)d[a]=0;for(a=26929;26946>=a;a++)d[a]=0;for(a=26948;26998>=a;a++)d[a]=0;for(a=27037;27040>=
a;a++)d[a]=0;for(a=27205;27232>=a;a++)d[a]=0;for(a=27258;27260>=a;a++)d[a]=0;for(a=27391;27398>=a;a++)d[a]=0;for(a=27561;27564>=a;a++)d[a]=0;for(a=27571;27574>=a;a++)d[a]=0;for(a=27581;27584>=a;a++)d[a]=0;for(a=27591;27594>=a;a++)d[a]=0;for(a=28191;28193>=a;a++)d[a]=0;for(a=28348;28358>=a;a++)d[a]=0;for(a=28402;28432>=a;a++)d[a]=0;for(a=28462;28492>=a;a++)d[a]=0;for(a=29118;29122>=a;a++)d[a]=0;for(a=29168;29172>=a;a++)d[a]=0;for(a=29177;29185>=a;a++)d[a]=0;for(a=29187;29195>=a;a++)d[a]=0;for(a=29900;29903>=
a;a++)d[a]=0;for(a=30161;30179>=a;a++)d[a]=0;for(a=30491;30494>=a;a++)d[a]=0;for(a=30729;30732>=a;a++)d[a]=0;for(a=31251;31259>=a;a++)d[a]=0;for(a=31265;31268>=a;a++)d[a]=0;for(a=31275;31279>=a;a++)d[a]=0;for(a=31281;31297>=a;a++)d[a]=0;for(a=31461;31469>=a;a++)d[a]=0;for(a=31491;31495>=a;a++)d[a]=0;for(a=31917;31922>=a;a++)d[a]=0;for(a=31965;32E3>=a;a++)d[a]=0;for(a=32001;32003>=a;a++)d[a]=2;for(a=32005;32031>=a;a++)d[a]=2;for(a=32033;32060>=a;a++)d[a]=2;for(a=32064;32067>=a;a++)d[a]=2;for(a=32074;32077>=
a;a++)d[a]=2;for(a=32081;32086>=a;a++)d[a]=0;for(a=32107;32130>=a;a++)d[a]=0;for(a=32133;32158>=a;a++)d[a]=0;for(a=32164;32167>=a;a++)d[a]=2;for(a=32180;32199>=a;a++)d[a]=0;for(a=32201;32260>=a;a++)d[a]=0;for(a=32301;32360>=a;a++)d[a]=0;for(a=32601;32662>=a;a++)d[a]=0;for(a=32664;32667>=a;a++)d[a]=2;for(a=32701;32761>=a;a++)d[a]=0;for(a=53001;53004>=a;a++)d[a]=0;for(a=53008;53019>=a;a++)d[a]=0;for(a=53021;53032>=a;a++)d[a]=0;for(a=53042;53046>=a;a++)d[a]=0;for(a=53074;53080>=a;a++)d[a]=0;for(a=54001;54004>=
a;a++)d[a]=0;for(a=54008;54019>=a;a++)d[a]=0;for(a=54021;54032>=a;a++)d[a]=0;for(a=54042;54046>=a;a++)d[a]=0;for(a=54048;54053>=a;a++)d[a]=0;for(a=54074;54080>=a;a++)d[a]=0;for(a=102001;102040>=a;a++)d[a]=0;for(a=102042;102063>=a;a++)d[a]=0;for(a=102065;102067>=a;a++)d[a]=0;for(a=102070;102117>=a;a++)d[a]=0;for(a=102122;102216>=a;a++)d[a]=0;for(a=102221;102377>=a;a++)d[a]=0;for(a=102382;102388>=a;a++)d[a]=0;for(a=102389;102398>=a;a++)d[a]=2;for(a=102399;102444>=a;a++)d[a]=0;for(a=102445;102447>=a;a++)d[a]=
2;for(a=102448;102458>=a;a++)d[a]=0;for(a=102459;102468>=a;a++)d[a]=2;for(a=102469;102496>=a;a++)d[a]=0;for(a=102500;102519>=a;a++)d[a]=1;for(a=102520;102524>=a;a++)d[a]=0;for(a=102525;102529>=a;a++)d[a]=2;for(a=102530;102561>=a;a++)d[a]=0;for(a=102570;102588>=a;a++)d[a]=0;for(a=102590;102598>=a;a++)d[a]=0;for(a=102601;102603>=a;a++)d[a]=0;for(a=102605;102628>=a;a++)d[a]=0;for(a=102629;102646>=a;a++)d[a]=2;for(a=102648;102700>=a;a++)d[a]=2;for(a=102701;102703>=a;a++)d[a]=0;for(a=102707;102730>=a;a++)d[a]=
2;for(a=102733;102758>=a;a++)d[a]=2;for(a=102767;102798>=a;a++)d[a]=0;for(a=102965;102969>=a;a++)d[a]=0;for(a=102971;102973>=a;a++)d[a]=0;for(a=102975;102989>=a;a++)d[a]=0;for(a=102990;102992>=a;a++)d[a]=1;for(a=102997;103002>=a;a++)d[a]=0;for(a=103003;103008>=a;a++)d[a]=2;for(a=103009;103011>=a;a++)d[a]=0;for(a=103012;103014>=a;a++)d[a]=2;for(a=103019;103021>=a;a++)d[a]=0;for(a=103022;103024>=a;a++)d[a]=2;for(a=103029;103031>=a;a++)d[a]=0;for(a=103032;103034>=a;a++)d[a]=2;for(a=103065;103068>=a;a++)d[a]=
0;for(a=103074;103076>=a;a++)d[a]=0;for(a=103077;103079>=a;a++)d[a]=1;for(a=103080;103082>=a;a++)d[a]=0;for(a=103083;103085>=a;a++)d[a]=2;for(a=103090;103093>=a;a++)d[a]=0;for(a=103097;103099>=a;a++)d[a]=0;for(a=103100;103102>=a;a++)d[a]=2;for(a=103107;103109>=a;a++)d[a]=0;for(a=103110;103112>=a;a++)d[a]=2;for(a=103113;103116>=a;a++)d[a]=0;for(a=103117;103120>=a;a++)d[a]=2;for(a=103153;103157>=a;a++)d[a]=0;for(a=103158;103162>=a;a++)d[a]=2;for(a=103163;103165>=a;a++)d[a]=0;for(a=103166;103168>=a;a++)d[a]=
1;for(a=103169;103171>=a;a++)d[a]=2;for(a=103186;103188>=a;a++)d[a]=0;for(a=103189;103191>=a;a++)d[a]=2;for(a=103192;103195>=a;a++)d[a]=0;for(a=103196;103199>=a;a++)d[a]=2;for(a=103200;103224>=a;a++)d[a]=0;for(a=103225;103227>=a;a++)d[a]=1;for(a=103232;103237>=a;a++)d[a]=0;for(a=103238;103243>=a;a++)d[a]=2;for(a=103244;103246>=a;a++)d[a]=0;for(a=103247;103249>=a;a++)d[a]=2;for(a=103254;103256>=a;a++)d[a]=0;for(a=103257;103259>=a;a++)d[a]=2;for(a=103264;103266>=a;a++)d[a]=0;for(a=103267;103269>=a;a++)d[a]=
2;for(a=103300;103375>=a;a++)d[a]=0;for(a=103381;103383>=a;a++)d[a]=0;for(a=103384;103386>=a;a++)d[a]=1;for(a=103387;103389>=a;a++)d[a]=0;for(a=103390;103392>=a;a++)d[a]=2;for(a=103397;103399>=a;a++)d[a]=0;for(a=103400;103471>=a;a++)d[a]=2;for(a=103476;103478>=a;a++)d[a]=0;for(a=103479;103481>=a;a++)d[a]=2;for(a=103486;103488>=a;a++)d[a]=0;for(a=103489;103491>=a;a++)d[a]=2;for(a=103492;103495>=a;a++)d[a]=0;for(a=103496;103499>=a;a++)d[a]=2;for(a=103528;103543>=a;a++)d[a]=0;for(a=103544;103548>=a;a++)d[a]=
2;for(a=103549;103551>=a;a++)d[a]=0;for(a=103552;103554>=a;a++)d[a]=1;for(a=103555;103557>=a;a++)d[a]=2;for(a=103558;103560>=a;a++)d[a]=0;for(a=103571;103573>=a;a++)d[a]=0;for(a=103574;103576>=a;a++)d[a]=2;for(a=103577;103580>=a;a++)d[a]=0;for(a=103581;103583>=a;a++)d[a]=2;for(a=103600;103694>=a;a++)d[a]=0;for(a=103700;103793>=a;a++)d[a]=2;for(a=103794;103871>=a;a++)d[a]=0;for(a=103900;103971>=a;a++)d[a]=2;return d})},"esri/layers/vectorTiles/views/2d/layers/support/TileSpan":function(){define(["require",
"exports"],function(a,d){return function(){return function(a,c,d){this.row=a;this.colFrom=c;this.colTo=d}}()})},"esri/layers/vectorTiles/views/2d/layers/support/TileCoverage":function(){define(["require","exports"],function(a,d){return function(){return function(a,c){this.lodInfo=a;this.spans=c}}()})},"esri/layers/vectorTiles/views/2d/layers/support/TileStrategy":function(){define(["require","exports","../../../../core/LRUCache","./TileKey"],function(a,d,b,c){function e(a,b){a["delete"](b)}var f=
[],g=[],h=[null,null],k=[],m=new b(30);return function(){function a(b,c,d,e,f){void 0===f&&(f=null);this.container=b;this.tileInfoView=c;this.requestUpdate=d;this.fetchTile=e;this.tileFilter=f;this._tiles=new Map;this._tilesToRender=new Map;this._requests=new Map;this._updates=new Map;this._prevResolution=Number.POSITIVE_INFINITY;this._isStationary=!1}a.prototype.destroy=function(){this._requests&&(this._requests.forEach(function(a){a.isFulfilled()||a.cancel()}),this._tilesToRender=this._requests=
null)};Object.defineProperty(a.prototype,"updating",{get:function(){return 0!==this._requests.size||0!==this._updates.size},enumerable:!0,configurable:!0});a.prototype.update=function(a){var b=this,d=this._tiles,g=this._tilesToRender,h=this._requests,l=this._updates,u=this.tileInfoView.getTileCoverage(a.state);if(u){var v=u.lodInfo.level,x=a.state.resolution>this._prevResolution;this._createCoverageList(f,u);var w=this.tileFilter?this.tileFilter([],f):f;g.clear();for(var z=0,A=0;A<w.length;A++){var y=
w[A];if(d.has(y)){var B=d.get(y);g.set(y,B);z++;B.attached||x||this._addParentTile(y,g)}else m.has(y)?z++:h.has(y)||this._getTile(y,a),x||this._addParentTile(y,g)}var E=z===w.length;!this._isStationary&&a.stationary&&this.requestUpdate();this._isStationary=a.stationary;var H=[],J=[],F;d.forEach(function(a,d){F=c.from(d);g.has(d)||((x||!E)&&b.tileInfoView.intersects(u,F)?J.push(d):(F.level>v||!b.tileInfoView.intersects(u,F))&&H.push(d))});for(B=0;B<J.length;B++)y=J[B],g.set(y,d.get(y));for(a=0;a<H.length;a++)y=
H[a],l.has(y)&&(l.get(y).cancel(y),e(l,y)),B=d.get(y),B.dispose(),e(d,y);this.container.removeAllChildren();g.forEach(function(a){return b.container.addChild(a)});h.forEach(function(a,d){F=c.from(d);if(F.level>v||!b.tileInfoView.intersects(u,F))a.cancel(),k.push(d)});for(d=0;d<k.length;d++)y=k[d],e(h,y);k.length=0}};a.prototype.updateTiles=function(a,b){var c=this;this._tilesToRender.forEach(function(d,f){if(d.attached){var g=a(d,b);g&&(c._updates.has(f)&&(c._updates.get(f).cancel(),e(c._updates,
f)),g.then(function(a){e(c._updates,f);c._tilesToRender.has(f)&&c._tilesToRender.set(f,a)}).otherwise(function(a){e(c._updates,f);if(a&&"cancel"!==a.dojoType)throw a;}),c._updates.set(f,g))}})};a.prototype._addParentTile=function(a,b){this._getAvailableParentTile(h,a);h[0]&&!b.has(h[0])&&b.set(h[0],h[1])};a.prototype._getTile=function(a,b){var d=this,f=this.fetchTile(a,b).then(function(b){var f=c.fromId(a);d.tileInfoView.getTileTopLeft(b.topLeft,f);d.tileInfoView.getTileBottomRight(b.bottomRight,
f);b.resolution=d.tileInfoView.getTileResolution(f);d._tiles.set(a,b);e(d._requests,a);d.requestUpdate()}).otherwise(function(b){b&&"no data"===b.message&&m.insert(a,a);e(d._requests,a)});this._requests.set(a,f)};a.prototype._getAvailableParentTile=function(a,b){a[0]=null;a[1]=null;for(var c=b;c=this.tileInfoView.getTileParentId(c);)if(this._tiles.has(c)){a[0]=c;a[1]=this._tiles.get(c);break}return a};a.prototype._createCoverageList=function(a,b){a.length=0;g.length=0;var d=b.spans;if(0!==d.length){for(var e=
0,f=0,h=Infinity,k=-Infinity,e=d[0].row,f=d[d.length-1].row,l=0;l<d.length;l++)for(var m=d[l],w=m.colFrom,m=m.colTo;w<=m;w++)h=Math.min(h,w),k=Math.max(k,w);var l=b.lodInfo,w=l.level,f=e+Math.floor((f-e)/2),h=h+Math.floor((k-h)/2),z,m=f-e;0<=m&&m<d.length&&(z=c.from(w,f,l.normalizeCol(h),l.getWorldForColumn(h)),g.push({dist:0,id:z.id}));for(var A,k=0;k<d.length;k++){m=d[k];e=m.row;w=m.colFrom;for(m=m.colTo;w<=m;w++)A=Math.abs(w-h)+Math.abs(e-f),0!==A&&(z.row=e,z.col=l.normalizeCol(w),z.world=l.getWorldForColumn(w),
g.push({dist:A,id:z.id}))}g.sort(function(a,b){return a.dist-b.dist});for(d=0;d<g.length;d++)a.push(g[d].id)}};return a}()})},"esri/layers/vectorTiles/core/LRUCache":function(){define(["require","exports"],function(a,d){return function(){function a(b){this._cache={};this._lruQueue=[];if(0>=b)throw Error("LRU cache size must be bigger than zero!");this._maxSize=b}a.prototype.has=function(a){return void 0!==this._cache[a]};a.prototype.insert=function(a,b){null!==this.use(a)?this._cache[a]=b:(this._collect(),
this._cache[a]=b,this._lruQueue.unshift(a))};a.prototype.use=function(a){var b=this._cache[a];if(!b)return null;this._lruQueue.splice(this._lruQueue.indexOf(a),1);this._lruQueue.unshift(a);return b};a.prototype.print=function(){for(var a=0,b=this._lruQueue;a<b.length;a++);};a.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var a=this._lruQueue.pop(),b=this._cache[a];b&&b.dispose&&b.dispose();delete this._cache[a]}};return a}()})},"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/background.vs.glsl":"attribute vec2 a_pos;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform mediump vec2 u_normalized_origin;\r\nuniform mediump float u_coord_range;\r\nuniform mediump float u_depth;\r\n\r\nvoid main() {\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/background.fs.glsl":"uniform lowp vec4 u_color;\r\nvoid main() {\r\n  gl_FragColor \x3d u_color;\r\n}","url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/patternFillShader.vs.glsl":"uniform highp mat4 u_transformMatrix;\r\nuniform highp vec2 u_normalized_origin;\r\nuniform mediump float u_depth;\r\nuniform mediump mat3 u_pattern_matrix; // can we use meduim precision??\r\n\r\nattribute vec2 a_pos;\r\n\r\nvarying mediump vec2 v_tileTextureCoord;\r\n\r\nvoid main()\r\n{\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0);\r\n  // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n  // The pattern matrix is a 3x3 scale matrix which 'tiles' the texture inside the tile, translating from tile coordinates\r\n  // (-4k to 8k -1) to texture coordinates.\r\n  v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/patternFillShader.fs.glsl":"uniform lowp float u_opacity;\r\nuniform mediump vec2 u_pattern_tl;\r\nuniform mediump vec2 u_pattern_br;\r\nuniform sampler2D u_texture;\r\n\r\nvarying mediump vec2 v_tileTextureCoord;\r\n\r\nvoid main()\r\n{\r\n  // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n  mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n  // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n  // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n  // we need to only sample from area that has our sprite in the mosaic.\r\n  mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n  // sample the sprite mosaic\r\n  lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n  gl_FragColor \x3d u_opacity * color;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineShader.vs.glsl":"/* The implementation of the renderer is based on the article and implementation of MB described here:\r\n* https://www.mapbox.com/blog/drawing-antialiased-lines/\r\n*/\r\n\r\nattribute vec2 a_pos;\r\nattribute vec2 a_offset;\r\nattribute float a_accumulatedDistance;\r\n\r\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n// relative to the tile's upper left corner\r\n// the extrusion vector.\r\nuniform highp mat4 u_transformMatrix;\r\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\r\nuniform highp mat4 u_extrudeMatrix;\r\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\r\nuniform highp vec2 u_normalized_origin;\r\n// the z of the layer. Given by the order of the layers in the style\r\nuniform mediump float u_depth;\r\n// the inset and outset of the line\r\nuniform mediump float u_lineHalfWidth;\r\n// the interpolated normal to the line. the information is packed into the LSB of the vertex coordinate\r\nvarying mediump vec2 v_normal;\r\n// the accumulated distance along the line. We need this information in order to render the dashes.\r\nvarying highp float v_accumulatedDistance;\r\n\r\nconst float scale \x3d 1.0 / 31.0;\r\n\r\nvoid main()\r\n{\r\n  // extract the normal from the list significat bit. It has a value of 0 or 1, but we need it to be either -1 or 1 therefore\r\n  // we need to change 0 to -1.\r\n  lowp vec2 normal \x3d mod(a_pos, 2.0);\r\n  normal.y \x3d normal.y \x3d\x3d 0.0 ? -1.0 : 1.0;\r\n  v_normal \x3d normal;\r\n\r\n  // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n  // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n  mediump vec2 dist \x3d u_lineHalfWidth * a_offset * scale;\r\n\r\n  // transform the vertex\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n\r\n  // the accumulated distance will be used to calculate the dashes (or the no-data...)\r\n  v_accumulatedDistance \x3d a_accumulatedDistance;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineShader.fs.glsl":"/* The implementation of the renderer is based on the article and implementation of MB described here:\r\n* https://www.mapbox.com/blog/drawing-antialiased-lines/\r\n*/\r\n\r\nuniform mediump float u_lineHalfWidth;\r\nuniform lowp vec4 u_color;\r\nuniform mediump vec2 u_dasharray;\r\nuniform lowp float u_blur;\r\n\r\nvarying mediump vec2 v_normal;\r\nvarying highp float v_accumulatedDistance;\r\n\r\nvoid main()\r\n{\r\n  // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n  // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n  // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n  mediump float fragDist \x3d length(v_normal) * u_lineHalfWidth;\r\n\r\n  // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n  // We need to count for both sides of the line.\r\n  lowp float alpha \x3d clamp( min(fragDist + u_blur + 1.0, u_lineHalfWidth - fragDist) / u_blur, 0.0, 1.0);\r\n\r\n  // now calculate the dashes given the accumulated distance of the line:\r\n  // start with calculating a normalized position along the line\r\n  lowp float dashPos \x3d  mod(v_accumulatedDistance, u_dasharray.x + u_dasharray.y);\r\n\r\n  // calculate the contribution to the alpha of the dash part. It is provided by the shortest portion of the position along the dash.\r\n  // we must clamp since the value might be bigger than 1 or smaller than zero (when over a dash).\r\n  //   | \x3c--- pos along the dash part\r\n  // -------_______-------_______\r\n  // when the dashPos is over the 'gap' part of the dash u_dasharray.x - dashPos is negative and therefore the alpha will\r\n  // get clamped to zero.\r\n  // when u_dasharray.x - dashPos is positive, or when dashPos is smaller than 1.0, it gives us a soft edge to each dash part.\r\n  // along the direction of the line.\r\n  lowp float dashAlpha \x3d clamp( min(dashPos, u_dasharray.x - dashPos), 0.0, 1.0);\r\n\r\n  // if we don't have a no-data part to the dash then it is a solid line\r\n  dashAlpha \x3d max(sign(-u_dasharray.y), dashAlpha); //sign(-u_dasharray.y) \x3e 0.0 ? 1.0 : dashAlpha;\r\n  // finally multiply the fragment's alpha by the calculated dash-alpha\r\n  alpha *\x3d dashAlpha;\r\n\r\n  // output the fragment color\r\n gl_FragColor \x3d alpha * u_color;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/patternLineShader.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_offset;\r\nattribute float a_accumulatedDistance;\r\n\r\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n// relative to the tile's upper left corner\r\n// the extrusion vector.\r\nuniform highp mat4 u_transformMatrix;\r\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\r\nuniform highp mat4 u_extrudeMatrix;\r\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\r\nuniform highp vec2 u_normalized_origin;\r\n// the z of the layer. Given by the order of the layers in the style\r\nuniform mediump float u_depth;\r\n// the inset and outset of the line\r\nuniform mediump float u_lineHalfWidth;\r\n// the interpolated normal to the line. the information is packed into the LSB of the vertex coordinate\r\nvarying mediump vec2 v_normal;\r\n// the accumulated distance along the line. We need this information in order to render the dashes.\r\nvarying highp float v_accumulatedDistance;\r\n\r\nconst float scale \x3d 1.0 / 31.0;\r\n\r\nvoid main()\r\n{\r\n  // extract the normal from the list significat bit. It has a value of 0 or 1, but we need it to be either -1 or 1 therefore\r\n  // we need to change 0 to -1.\r\n  lowp vec2 normal \x3d mod(a_pos, 2.0);\r\n  normal.y \x3d normal.y \x3d\x3d 0.0 ? -1.0 : 1.0;\r\n  v_normal \x3d normal;\r\n\r\n  // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n  // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n  mediump vec2 dist \x3d u_lineHalfWidth * a_offset * scale;\r\n\r\n  // transform the vertex\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n\r\n  // the accumulated distance will be used to calculate the dashes (or the no-data...)\r\n  v_accumulatedDistance \x3d a_accumulatedDistance;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/patternLineShader.fs.glsl":"uniform mediump float u_lineHalfWidth;\r\nuniform lowp float u_blur;\r\nuniform lowp float u_opacity;\r\nuniform mediump vec2 u_pattern_tl;\r\nuniform mediump vec2 u_pattern_br;\r\nuniform mediump vec2 u_spriteSize;\r\nuniform sampler2D u_texture;\r\n\r\nvarying mediump vec2 v_normal;\r\nvarying highp float v_accumulatedDistance;\r\n\r\nvoid main()\r\n{\r\n  // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n  // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n  // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n  mediump float fragDist \x3d length(v_normal) * u_lineHalfWidth;\r\n\r\n  // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n  // We need to count for both sides of the line.\r\n  lowp float alpha \x3d clamp( min(fragDist + u_blur + 1.0, u_lineHalfWidth - fragDist) / u_blur, 0.0, 1.0);\r\n  // add the line's opacity to the alpha\r\n  alpha *\x3d u_opacity;\r\n\r\n  // we need to calculate the relative portion of the line texture along the line given the accumulated distance aliong the line\r\n  // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n  mediump float relativeTexX \x3d mod(v_accumulatedDistance / u_spriteSize.x, 1.0);\r\n\r\n  // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n  // which range from -1.0 to 1.0. On the line's centerline, the value of the interpolated normal is 0.0, however the relative\r\n  // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n  // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n  //              | -\x3e linwe-width / 2\r\n  //      - - - - - - - - - - - - - -\r\n  //              | -\x3e linwe-width / 2\r\n  //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n  mediump float relativeTexY \x3d 0.5 + (v_normal.y * u_lineHalfWidth / u_spriteSize.y);\r\n\r\n  // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n  mediump vec2 texCoord \x3d mix(u_pattern_tl, u_pattern_br, vec2(relativeTexX, relativeTexY));\r\n\r\n  // get the color from the texture\r\n  lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n  // 'un-premultiply' the color\r\n  lowp float inv_alpha \x3d (1.0 / clamp(color.a, 0.00390625, 1.0));\r\n  // finally write the fragment value\r\n  gl_FragColor \x3d alpha * color;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineJoinShader.vs.glsl":"attribute vec2 a_pos;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform highp vec2 u_normalized_origin;\r\nuniform highp float u_depth;\r\nuniform highp vec2 u_screen;\r\nuniform mediump float u_size;\r\nuniform mediump float u_pixelRatio;\r\n\r\nvarying mediump vec2 v_vertexPosition;\r\n\r\nvoid main()\r\n{\r\n  gl_PointSize \x3d u_pixelRatio * u_size;\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0);\r\n\r\n  // calculate the vertex position in pixels (we need to add one in order to shift the origin from the center of the viewport)\r\n  v_vertexPosition \x3d (gl_Position.xy + 1.0) * u_screen;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineJoinShader.fs.glsl":"uniform lowp vec4 u_color;\r\nuniform mediump float u_lineHalfWidth;\r\nuniform mediump float u_oneOverPixelRatio;\r\n\r\nvarying mediump vec2 v_vertexPosition;\r\n\r\nvoid main()\r\n{\r\n  // get the distance of the current fragment from the actual vertex\r\n  mediump float fragDist \x3d length(v_vertexPosition - u_oneOverPixelRatio * gl_FragCoord.xy);\r\n\r\n  // rounding the quare: calculate the alpha given the difference between the line-width and the distance of the fragment\r\n  // from the center-line. We will end up with a nice round circle with a soft edge.\r\n  lowp float alpha \x3d clamp(u_lineHalfWidth - fragDist, 0.0, 1.0);\r\n\r\n  // finally output the fragment color\r\n  gl_FragColor \x3d alpha * u_color;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/solidFillShader.vs.glsl":"attribute vec2 a_pos;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform highp vec2 u_normalized_origin;\r\nuniform mediump float u_depth;\r\n\r\nvoid main()\r\n{\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n}\r\n","url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/solidFillShader.fs.glsl":"uniform lowp vec4 u_color;\r\nvoid main()\r\n{\r\n  gl_FragColor \x3d u_color;\r\n}",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/fillOutlineShader.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_offset;\r\nattribute vec2 a_xnormal;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform highp mat4 u_extrudeMatrix;\r\nuniform highp vec2 u_normalized_origin;\r\nuniform mediump float u_depth;\r\nuniform mediump float u_outline_width;\r\n\r\nvarying lowp vec2 v_normal;\r\n\r\nconst float scale \x3d 1.0 / 15.0;\r\n\r\nvoid main()\r\n{\r\n  v_normal \x3d a_xnormal;\r\n\r\n   // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n    // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n  mediump vec4 dist \x3d vec4(u_outline_width * a_offset * scale, 0.0, 0.0);\r\n\r\n  // Remove the texture normal bit of the position before scaling it with the\r\n  // model/view matrix. Add the extrusion vector *after* the model/view matrix\r\n  // because we're extruding the line in pixel space, regardless of the current\r\n  // tile's zoom level.\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * dist;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/fillOutlineShader.fs.glsl":"uniform lowp vec4 u_color;\r\nvarying mediump vec2 v_normal;\r\n\r\nvoid main()\r\n{\r\n  // Calculate the distance of the pixel from the line in pixels.\r\n  lowp float dist \x3d abs(v_normal.y);\r\n\r\n  lowp float alpha \x3d smoothstep(1.0, 0.0, dist);\r\n  gl_FragColor \x3d alpha * u_color;\r\n}\r\n","url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/iconShader.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_vertexOffset;\r\nattribute vec4 a_tex;\r\nattribute vec4 a_levelInfo;\r\n\r\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n// relative to the tile's upper left corner\r\n// the extrusion vector.\r\nuniform highp mat4 u_transformMatrix;\r\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\r\nuniform highp mat4 u_extrudeMatrix;\r\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\r\nuniform highp vec2 u_normalized_origin;\r\n// the size of the mosaic given in pixels\r\nuniform vec2 u_mosaicSize;\r\n// the z of the layer. Given by the order of the layers in the style\r\nuniform mediump float u_depth;\r\n// the map's rotation from the north\r\nuniform mediump float u_mapRotation;\r\nuniform mediump float u_level;\r\n// indicate whether the current set of iconst should be kept upright when the map is rotated\r\nuniform lowp float u_keepUpright;\r\n// the rate of the change in the opacity (fade) of the icons\r\nuniform mediump float u_fadeSpeed;\r\n// the low level we transition (to/from)\r\nuniform mediump float u_minfadeLevel;\r\n// the high level we transition (to/from)\r\nuniform mediump float u_maxfadeLevel;\r\n// the amount of fade given teh current time past the last recorded level\r\nuniform mediump float u_fadeChange;\r\n// the opacity of the layer given by the painter\r\nuniform mediump float u_opacity;\r\n// the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\nvarying lowp vec2 v_tex;\r\n// the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n// opacity of the layer given by the painter\r\nvarying lowp float v_transparency;\r\n\r\n// the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n// by 16 and then at the shader devide by the same number\r\nconst float offsetPrecision \x3d 1.0 / 32.0;\r\n\r\nvoid main()\r\n{\r\n  mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n  mediump float a_angle        \x3d a_levelInfo[1];\r\n  mediump float a_minLevel    \x3d a_levelInfo[2];\r\n  mediump float a_maxLevel    \x3d a_levelInfo[3];\r\n\r\n  // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n  mediump float delta_z \x3d 0.0;\r\n\r\n  // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n  mediump float rotated \x3d mod(a_angle - u_mapRotation, 256.0);\r\n  delta_z +\x3d (1.0 - step(u_keepUpright,0.0)) * step(65.0,rotated) * (1.0 - step(193.0,rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (65 \x3c\x3d rotated) \x26\x26 (rotated \x3c 193)\r\n\r\n  // u_level is the current service level adjusted for the change in font size\r\n  delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n  delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n  // calculate the alpha given the change in the fade and the fade-speed\r\n  lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n  // if the speed is positive we are zooming in and therefore we need to 'fade-in'. Else we need to 'fade-out'\r\n  v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n  // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n  if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n  {\r\n      v_transparency \x3d 0.0;\r\n  }\r\n  if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n  {\r\n      v_transparency \x3d 1.0;\r\n  }\r\n\r\n  // if label had been faded out, clip it\r\n  delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\r\n  v_tex \x3d a_tex.xy / u_mosaicSize;\r\n\r\n  v_transparency *\x3d u_opacity;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/iconShader.fs.glsl":"uniform lowp sampler2D u_texture;\r\nvarying lowp vec2 v_tex;\r\nvarying lowp float v_transparency;\r\n\r\nvoid main()\r\n{\r\n  lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n  gl_FragColor \x3d v_transparency * color;\r\n}\r\n","url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/sdfShader.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_vertexOffset;\r\nattribute vec4 a_tex;\r\nattribute vec4 a_levelInfo;\r\n\r\n// attribute bool a_visible; // --\x3e a one bit controlling the visibility of the vertex\r\n\r\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n// relative to the tile's upper left corner\r\n// the extrusion vector.\r\nuniform highp mat4 u_transformMatrix;\r\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\r\nuniform highp mat4 u_extrudeMatrix;\r\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\r\nuniform highp vec2 u_normalized_origin;\r\n// the size of the mosaic given in pixels\r\nuniform vec2 u_mosaicSize;\r\n// the z of the layer. Given by the order of the layers in the style\r\nuniform mediump float u_depth;\r\n// the map's rotation from the north\r\nuniform mediump float u_mapRotation;\r\nuniform mediump float u_level;\r\n// indicate whether the current set of iconst should be kept upright when the map is rotated\r\nuniform lowp float u_keepUpright;\r\n// the rate of the change in the opacity (fade) of the icons\r\nuniform mediump float u_fadeSpeed;\r\n// the low level we transition (to/from)\r\nuniform mediump float u_minfadeLevel;\r\n// the high level we transition (to/from)\r\nuniform mediump float u_maxfadeLevel;\r\n// the amount of fade given teh current time past the last recorded level\r\nuniform mediump float u_fadeChange;\r\n// the opacity of the layer given by the painter\r\nuniform mediump float u_opacity;\r\n// the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\nvarying lowp vec2 v_tex;\r\n// the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n// opacity of the layer given by the painter\r\nvarying lowp float v_transparency;\r\n\r\n// the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n// by 16 and then at the shader devide by the same number\r\nconst float offsetPrecision \x3d 1.0 / 32.0;\r\n\r\nvoid main()\r\n{\r\n  mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n  mediump float a_angle        \x3d a_levelInfo[1];\r\n  mediump float a_minLevel    \x3d a_levelInfo[2];\r\n  mediump float a_maxLevel    \x3d a_levelInfo[3];\r\n\r\n  // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n  mediump float delta_z \x3d 0.0;\r\n\r\n  // TODO: force clipping the vertex in case that the vertex isn't visible\r\n  //delta_z +\x3d a_visible ? 0.0 : 1.0;\r\n\r\n  // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n  mediump float rotated \x3d mod(a_angle - u_mapRotation, 256.0);\r\n  delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(65.0, rotated) * (1.0 - step(193.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (65 \x3c\x3d rotated) \x26\x26 (rotated \x3c 193)\r\n\r\n  // u_level is the current service level adjusted for the change in font size\r\n  delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n  delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n  // calculate the alpha given the change in the fade and the fade-speed\r\n  lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n  // if the speed is positive we are zooming in and therefore we need to 'fade-in'. Else we need to 'fade-out'\r\n  v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n  // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n  if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n  {\r\n      v_transparency \x3d 0.0;\r\n  }\r\n  if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n  {\r\n      v_transparency \x3d 1.0;\r\n  }\r\n\r\n  // if label has been faded out, clip it\r\n  delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\r\n  v_tex \x3d a_tex.xy / u_mosaicSize;\r\n\r\n  v_transparency *\x3d u_opacity;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/sdfShader.fs.glsl":"uniform lowp sampler2D u_texture;\r\nuniform lowp vec4 u_color;\r\nuniform mediump float u_edgeDistance;\r\nuniform mediump float u_edgeWidth;\r\n\r\nvarying lowp vec2 v_tex;\r\nvarying lowp float v_transparency;\r\n\r\n// this is taken from http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf\r\n// and https://www.mapbox.com/blog/text-signed-distance-fields/\r\n// http://metalbyexample.com/rendering-text-in-metal-with-signed-distance-fields/\r\n\r\nvoid main()\r\n{\r\n  // read the distance from the SDF texture\r\n  lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n  // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n  mediump float alpha \x3d smoothstep(u_edgeDistance - u_edgeWidth, u_edgeDistance + u_edgeWidth, dist) * v_transparency;\r\n\r\n  gl_FragColor \x3d alpha * u_color;\r\n\r\n// YF: this code allow having both a fill and an outline colors combined in a single pass\r\n//  lowp float geometryAlpha \x3d smoothstep(0.75 - 0.21, 0.75 + 0.21, dist) * v_transparency;\r\n//  lowp vec4 geometryColor \x3d vec4(u_color.rgb, geometryAlpha * u_color.a);\r\n//\r\n//  if (true) {\r\n//    lowp float haloAlpha \x3d smoothstep(0.0 - 0.1, 0.0 + 0.1, dist) * v_transparency;\r\n//    lowp vec4 haloColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n//    haloColor \x3d vec4(haloColor.rgb, haloAlpha);\r\n//\r\n//    // calculate the composite color\r\n//    lowp float compositeAlpha \x3d geometryColor.a + haloColor.a * (1.0 - geometryColor.a);\r\n//    lowp vec3 compositeColor \x3d vec3(geometryColor) * geometryColor.a + vec3(haloColor) * haloColor.a * (1.0 - geometryColor.a);\r\n//    compositeColor /\x3d compositeAlpha;\r\n//    gl_FragColor \x3d vec4(compositeColor, compositeAlpha);\r\n//  }\r\n//  else {\r\n//    gl_FragColor \x3d geometryColor;\r\n//  }\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/tileInfo.vs.glsl":"attribute vec2 a_pos;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform mediump vec2 u_normalized_origin;\r\nuniform mediump float u_depth;\r\nuniform mediump float u_coord_ratio;\r\nuniform mediump vec2 u_delta; // in tile coordinates\r\nuniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\nvarying mediump vec2 v_tex;\r\n\r\nvoid main() {\r\n  mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n  v_tex \x3d a_pos;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/tileInfo.fs.glsl":"uniform mediump sampler2D u_texture;\r\nvarying mediump vec2 v_tex;\r\n\r\nvoid main(void) {\r\n  lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n  gl_FragColor \x3d 0.75 * color;\r\n}\r\n","url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/stencil.vs.glsl":"attribute vec2 a_pos;\r\n\r\nvoid main() {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n}\r\n","url:esri/layers/vectorTiles/views/2d/engine/webgl/stencil.fs.glsl":"void main() {\r\n  gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n}\r\n","url:esri/layers/vectorTiles/views/2d/engine/webgl/bitblit.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_tex;\r\n\r\nvarying mediump vec2 v_uv;\r\n\r\nvoid main(void) {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n  v_uv \x3d a_tex;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/2d/engine/webgl/bitblit.fs.glsl":"\tuniform lowp sampler2D u_tex;\r\n\tuniform lowp float u_opacity;\r\n\r\n\tvarying mediump vec2 v_uv;\r\n\r\n\tvoid main() {\r\n\t\tlowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n    // Note: output in pre-multiplied alpha for correct alpha compositing\r\n\t\tgl_FragColor \x3d color *  u_opacity;\r\n\t}\r\n","*now":function(a){a(['dojo/i18n!*preload*esri/layers/nls/VectorTileLayerImpl*["ar","bs","cs","da","de","el","en","es","et","fi","fr","he","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])}}});
define("esri/layers/VectorTileLayerImpl","dojo/_base/lang dojo/has dojo/dom-construct dojo/dom-style dojo/io-query ../geometry/Extent ../geometry/screenUtils ../geometry/scaleUtils ../SpatialReference ../config ../lang ../domUtils ../urlUtils ../kernel ./layer ./TileInfo ./unitBezier ./vectorTiles/request ./vectorTiles/core/promiseUtils ./vectorTiles/core/urlUtils ./vectorTiles/layers/support/vectorTileLayerLoader ./vectorTiles/views/vectorTiles/style/StyleRepository ./vectorTiles/views/vectorTiles/VectorTileContainer ./vectorTiles/views/vectorTiles/TileHandler ./vectorTiles/views/2d/engine/StageGL ./vectorTiles/views/2d/FrameBudget ./vectorTiles/views/2d/layers/support/TileInfoView ./vectorTiles/views/2d/layers/support/TileStrategy ./vectorTiles/views/2d/layers/support/TileKey ./vectorTiles/views/webgl/webgl-utils".split(" "),
function(a,d,b,c,e,f,g,h,k,m,l,n,p,r,s,q,t,u,v,x,w,z,A,y,B,E,H,J,F,I){var L=t.ease;g=s.createSubclass({declaredClass:"esri.layers.VectorTileLayer",_mapsWithAttribution:["World_Basemap"],_eventMap:{"style-change":["style"]},constructor:function(a,b){this._frame=this._frame.bind(this);this._params=b||{};b&&(b.tileServers&&b.tileServers.length)&&(this.tileServers=b.tileServers=b.tileServers.map(function(a){return p.getAbsoluteUrl(a)},this));this._viewState={scale:0,width:0,height:0,size:[0,0],rotation:0,
resolution:1,center:[0,0],toScreen:function(a,b){var c=this.center[1]+0.5*this.resolution*this.height;a[0]=(b[0]-(this.center[0]-0.5*this.resolution*this.width))/this.resolution;a[1]=(c-b[1])/this.resolution;return a},toMap:function(a,b){var c=this.center[1]+0.5*this.resolution*this.height;a[0]=this.center[0]-0.5*this.resolution*this.width+b[0]*this.resolution;a[1]=c-b[1]*this.resolution;return a}};this._budget=new E(6);this._renderParameters={budget:this._budget,state:this._viewState,devicePixelRatio:window.devicePixelRatio,
stationary:!0};this._updateParameters={budget:this._budget,state:this._viewState,devicePixelRatio:window.devicePixelRatio,stationary:!0};this.setStyle(a);this.registerConnectEvents()},setStyle:function(a){return this.loadStyle(a)},getStyle:function(){return this.currentStyleInfo&&this.currentStyleInfo.style||null},opacity:1,setOpacity:function(a){if(this.opacity!=a)this.onOpacityChange(this.opacity=a)},onOpacityChange:function(){},_pinching:!1,_refreshTS:null,_reCheckTS:/[\?\&]_ts=/ig,_reReplaceTS:/([\?\&]_ts=)[0-9]+/ig,
addTimestampToURL:function(a){var b=this._refreshTS;b&&(a=this._reCheckTS.test(a)?a.replace(this._reReplaceTS,"$$$1"+b):a+((-1===a.indexOf("?")?"?":"\x26")+"_ts\x3d"+b));return a},getTileUrl:function(a,b,c){var d=this._getToken(),f=this._url&&this._url.query,g=this.tileServers[b%this.tileServers.length],g=g.replace(/\{z\}/gi,a.toString()).replace(/\{level\}/gi,a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{row\}/gi,b.toString()).replace(/\{x\}/gi,c.toString()).replace(/\{col\}/gi,c.toString());
f&&(g+="?"+e.objectToQuery(f));if(d&&(!f||!f.token))g+=(-1===g.indexOf("?")?"?":"\x26")+"token\x3d"+d;g=this.addTimestampToURL(g);return p.addProxy(g)},loadStyle:function(a){if(this._loadingPromise&&"string"===typeof a&&this.url===a)return this._loadingPromise;this._stopDisplay();var b=this._loadingPromise;this._loadingPromise=w.loadMetadata(a).then(function(a){this.url=a.url;this._url=a.parsedUrl;this.currentStyleInfo={serviceUrl:a.serviceUrl,styleUrl:a.styleUrl,style:a.style,layerDefinition:a.layerDefinition};
this.styleRepository=new z(a.style,a);this._read(a.layerDefinition);this.onStyleChange(this.getStyle())}.bind(this)).then(function(){this.loaded||(this.loaded=!0,this.onLoad(this));!this.suspended&&!this._tileHandler&&this._startDisplay()}.bind(this)).otherwise(function(a){this._errorHandler(a);throw a;}.bind(this));b&&!b.isFulfilled()&&b.cancel();return this._loadingPromise},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},
takeScreenshot:function(a){return this._stageGL?this._stageGL.takeScreenshot(a):v.reject("No valid GL context!")},_setMap:function(d,e,f){this.inherited(arguments);this._map=d;var g=this._div=b.create("div",null,e);c.set(g,{position:"absolute",width:d.width+"px",height:d.height+"px",overflow:"visible",opacity:this.opacity});this._onResizeHandle=d.on("resize",a.hitch(this,this._onResizeHandler));this._onOpacityHandle=this.on("opacity-change",a.hitch(this,this._opacityChangeHandler));this._onScaleVisHandle=
this.on("scale-visibility-change",a.hitch(this,function(){}));this._onVisibilityHandle=this.on("visibility-change",a.hitch(this,function(){}));this._stageGL=new B;this._stageGL.setElement(this._stageGL.createElement());this._div.appendChild(this._stageGL.element);this._stageGL.parent={requestChildRender:this._scheduleRender.bind(this)};this._stageGL.attach(this._renderParameters);this._startDisplay();this.evaluateSuspension();if(this.suspended&&!d.loaded)var h=d.on("load",a.hitch(this,function(){h.remove();
this.evaluateSuspension()}));return g},_unsetMap:function(a,c){this._map=null;this.suspended||this._stopDisplay();this._stageGL.detach(this._renderParameters);this._stageGL=null;b.destroy(this._div);this._div=null;this._handles&&this._handles.forEach(function(a){a.remove()});this._handles=null;this._onResizeHandle=this._onResizeHandle&&this._onResizeHandle.remove()&&null;this._onOpacityHandle=this._onOpacityHandle&&this._onOpacityHandle.remove()&&null;this._onScaleVisHandle=this._onScaleVisHandle&&
this._onScaleVisHandle.remove()&&null;this._onVisibilityHandle=this._onVisibilityHandle&&this._onVisibilityHandle.remove()&&null;this.inherited(arguments)},_read:function(a){this.version=a.currentVersion||a.version;this.fullExtent=new f(a.fullExtent);this.initialExtent=new f(a.initialExtent);this.spatialReference=this.fullExtent.spatialReference;this.tileInfo=new q(a.tileInfo);this.tileInfo.size=[this.tileInfo.cols,this.tileInfo.height];this.tileInfo.spatialReference.isWrappable=this.tileInfo.spatialReference._isWrappable();
this.tileInfo.scales=this.tileInfo.lods.map(function(a){return a.scale});this.tileInfo.scaleToZoom=function(a){for(var b=this.scales,c=b.length-1,d=0;d<c;d++){var e=b[d],f=b[d+1];if(e<=a)break;if(f===a)return d+1;if(e>a&&f<a)return d+1-(a-f)/(e-f)}return d};this._hasMin||this.setMinScale(a.minScale);this._hasMax||this.setMaxScale(a.maxScale);a.tileMap&&(this.tileIndexUrl=x.join(this.currentStyleInfo.serviceUrl,a.tileMap));this._params.tileServers||(this.tileServers=this.currentStyleInfo.serviceUrl?
a.tiles.map(function(a,b,c){return x.join(this.currentStyleInfo.serviceUrl,a)},this):a.tiles);a=null;this.currentStyleInfo.serviceUrl&&(a=x.urlToObject(this.currentStyleInfo.serviceUrl),a=this._getDefaultAttribution(a.path));a?(this.attributionDataUrl=a,this.hasAttributionData=!0):(this.attributionDataUrl=null,this.hasAttributionData=!1)},_getDefaultAttribution:function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);
if(b&&(a=b[3])){var b=b[2]||"",c;a=a.toLowerCase();for(var d=0,e=this._mapsWithAttribution.length;d<e;d++)if(c=this._mapsWithAttribution[d],-1<c.toLowerCase().indexOf(a))return a=window.location.protocol,("http:"===a||"https:"===a?a:"https:")+"//static.arcgis.com/attribution/Vector"+b+"/"+c}},_startDisplay:function(){var a={styleRepository:this.styleRepository,tileIndexUrl:this.tileIndexUrl,tileInfo:this.tileInfo,fullExtent:{width:this.fullExtent.getWidth()},getTileUrl:this.getTileUrl.bind(this)};
this._renderParameters.devicePixelRatio=this._updateParameters.devicePixelRatio=window.devicePixelRatio;this._vectorTileContainer=new A;this._stageGL.addChild(this._vectorTileContainer);this._tileHandler=new y(a,this._scheduleUpdate.bind(this));this._tileInfoView=new H(this.tileInfo,this.fullExtent);this._tileHandler.updateTile.bind(this._tileHandler);this._tileHandler.start().then(function(){this._tileStrategy=new J(this._vectorTileContainer,this._tileInfoView,this._scheduleUpdate.bind(this),function(a,
b){return this._tileHandler.getVectorTile(F.fromId(a),b)}.bind(this));this._vectorTileContainer.initialize(this._tileHandler.spriteMosaic,this._tileHandler.glyphMosaic,this.tileInfo,this._tileInfoView);this._scheduleUpdate()}.bind(this))},_stopDisplay:function(){this._tileStrategy&&(this._frameRequested=this._updateRequested=this._renderRequested=!1,this._animation&&(this._animation.stop(),this._animation=null),this._vectorTileContainer.removeAllChildren(),this._stageGL.removeChild(this._vectorTileContainer),
this._vectorTileContainer=null,this._tileHandler.stop(),this._tileHandler.destroy(),this._tileStrategy.destroy(),this._tileInfoView=this._tileHandler=this._tileStrategy=null)},_scheduleRender:function(){this._renderRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleUpdate:function(){this._updateRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleFrame:function(){this._map&&!this._frameRequested&&(this._frameRequested=!0,D(this._frame))},_frame:function(){if(this._frameRequested){this._frameRequested=
!1;this._renderParameters.devicePixelRatio!==window.devicePixelRatio&&(this._renderParameters.devicePixelRatio=this._updateParameters.devicePixelRatio=window.devicePixelRatio,this._stopDisplay(),this._startDisplay());this._animation&&(this._animation.step(),this._animation.running||(this._animation=null));this._updateParameters.stationary=this._renderParameters.stationary=!this._animation&&!this._pinching&&!this._panning;this._budget.reset();this._viewState.resolution=this._viewState.scale/(96*39.37*
h.getUnitValueForSR(this.spatialReference));this._renderRequested&&(this._renderRequested=!1,this._stageGL.render(this._renderParameters));if(this._updateRequested){this._updateRequested=!1;var a=this._tileHandler.updateTile.bind(this._tileHandler);this._tileStrategy.updateTiles(a,this._updateParameters);this._tileStrategy.update(this._updateParameters)}this._animation&&(this._scheduleRender(),this._scheduleUpdate())}},_setViewState:function(b){b=a.mixin(this._viewState,b);b.center.type&&(b.center=
[b.center.x,b.center.y]);this._scheduleRender();this._scheduleUpdate()},_animateViewState:function(a,b){var c=b.immediate||0===m.defaults.map.zoomDuration;this._animation=null;if(c)this._setViewState(a);else{var c=this._viewState,d=m.defaults.map.zoomDuration,e=K()+16,f=c.center[0],g=c.center[1],h=c.scale,k=Array.isArray(a.center)?a.center[0]:a.center.x,l=Array.isArray(a.center)?a.center[1]:a.center.y,n=a.scale||c.scale,p=this;this._animation={running:!0,stop:function(){this.running=!1},step:function(){if(this.running){var a=
(K()+16-e)/d;1<=a&&(a=1,this.running=!1);a=L(a);p._setViewState({center:[f+(k-f)*a,g+(l-g)*a],scale:h+(n-h)*a})}}};this._scheduleRender();this._scheduleUpdate()}},onStyleChange:function(a){},_opacityChangeHandler:function(a){this._div&&(this._div.style.opacity=a.opacity)},_onResizeHandler:function(a){var b=this._div&&this._div.style;b&&(b.width=a.width+"px",b.height=a.height+"px",this._setViewState({center:a.extent.getCenter(),width:a.width,height:a.height,size:[a.width,a.height]}))},onResume:function(){var b=
this._map;this.inherited(arguments);n.show(this._div);this._setViewState({center:b.extent.getCenter(),scale:b.getScale(),width:b.width,height:b.height,size:[b.width,b.height]});this._handles=[b.on("pan-end",a.hitch(this,this._onPanEndHandler)),b.on("pan",a.hitch(this,this._onPanExtentChangeHandler)),b.on("extent-change",a.hitch(this,this._onExtentChangeHandler)),b.on("scale",a.hitch(this,this._onScaleHandler))]},onSuspend:function(){this.inherited(arguments);n.hide(this._div);this._handles.forEach(function(a){a.remove()});
this._handles=null},_onPanEndHandler:function(a){this._panning=!1;this._setViewState({center:a.extent.getCenter(),scale:this._map.getScale()})},_onPanExtentChangeHandler:function(a){this._panning=!0;this._animation&&(this._animation.stop(),this._animation=null);this._setViewState({center:a.extent.getCenter(),scale:this._map.getScale()})},_onExtentChangeHandler:function(a){var b=this._pinching||a.immediate;this._animateViewState({center:a.extent.getCenter(),scale:a.lod.scale},{immediate:b});this._pinching=
!1},_onScaleHandler:function(a){this._animation&&(this._animation.stop(),this._animation=null);var b=this._map;if(b._zoomAnimDiv.extent)this._pinching=this._panning=!1,this._animateViewState({center:b._zoomAnimDiv.extent.getCenter(),scale:b._zoomAnimDiv.newLod.scale},{immediate:a.immediate});else{var c=b.navigationManager,d=c._dragOrigin;a=b.extent.getCenter();var e=d.x-0.5*b.width,d=d.y-0.5*b.height,f=b.extent.getWidth()/b.width,g;c._pinchScale?(this._pinching=!0,c=c._pinchScale,g=f/c,a.x-=e*(g-
f),a.y+=d*(g-f),b=b.__LOD.scale/c,this._setViewState({center:a,scale:b})):c._zoomEndExtent&&(this._pinching=!1,c=b.getScale()/b.navigationManager._zoomEndLod.scale,g=f/c,a.x-=e*(g-f),a.y+=d*(g-f),b=b.navigationManager._zoomEndLod.scale,this._animateViewState({center:a,scale:b},{immediate:!1}))}}});g.ACCESS_TOKEN=null;g.supported=function(){return I.detectWebGL()[0]};var K=function(){var a,b=window.performance||{},c=b.now||b.webkitNow||b.msNow||b.oNow||b.mozNow;if(void 0!==c)return function(){return c.call(b)};
a=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-a}}();k=d("ff");l=d("ie");r=d("webkit");d=d("opera");var G=(new Date).getTime(),D=window.requestAnimationFrame;D||(D=window[(r&&"webkit"||k&&"moz"||d&&"o"||l&&"ms")+"RequestAnimationFrame"])||(D=function(a){var b=K(),c=Math.max(0,16-(b-G)),d=window.setTimeout(function(){a(K())},c);G=b+c;return d});return g});